"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/bytemd";
exports.ids = ["vendor-chunks/bytemd"];
exports.modules = {

/***/ "(ssr)/./node_modules/bytemd/dist/index.css":
/*!********************************************!*\
  !*** ./node_modules/bytemd/dist/index.css ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"657e9ee0af24\");\nif (false) {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYnl0ZW1kL2Rpc3QvaW5kZXguY3NzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxpRUFBZSxjQUFjO0FBQzdCLElBQUksS0FBVSxFQUFFLEVBQXVCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGV0dHljb2RlLWZyb250ZW5kLy4vbm9kZV9tb2R1bGVzL2J5dGVtZC9kaXN0L2luZGV4LmNzcz8yMDI5Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiNjU3ZTllZTBhZjI0XCJcbmlmIChtb2R1bGUuaG90KSB7IG1vZHVsZS5ob3QuYWNjZXB0KCkgfVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/bytemd/dist/index.css\n");

/***/ }),

/***/ "(ssr)/./node_modules/bytemd/dist/index.mjs":
/*!********************************************!*\
  !*** ./node_modules/bytemd/dist/index.mjs ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Editor: () => (/* binding */ Editor),\n/* harmony export */   Viewer: () => (/* binding */ Viewer),\n/* harmony export */   getProcessor: () => (/* binding */ getProcessor)\n/* harmony export */ });\n/* harmony import */ var codemirror_ssr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! codemirror-ssr */ \"(ssr)/./node_modules/codemirror-ssr/lib/codemirror.js\");\n/* harmony import */ var codemirror_ssr_addon_display_placeholder_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! codemirror-ssr/addon/display/placeholder.js */ \"(ssr)/./node_modules/codemirror-ssr/addon/display/placeholder.js\");\n/* harmony import */ var codemirror_ssr_addon_edit_continuelist_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! codemirror-ssr/addon/edit/continuelist.js */ \"(ssr)/./node_modules/codemirror-ssr/addon/edit/continuelist.js\");\n/* harmony import */ var codemirror_ssr_addon_mode_overlay_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! codemirror-ssr/addon/mode/overlay.js */ \"(ssr)/./node_modules/codemirror-ssr/addon/mode/overlay.js\");\n/* harmony import */ var codemirror_ssr_mode_gfm_gfm_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! codemirror-ssr/mode/gfm/gfm.js */ \"(ssr)/./node_modules/codemirror-ssr/mode/gfm/gfm.js\");\n/* harmony import */ var codemirror_ssr_mode_markdown_markdown_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! codemirror-ssr/mode/markdown/markdown.js */ \"(ssr)/./node_modules/codemirror-ssr/mode/markdown/markdown.js\");\n/* harmony import */ var codemirror_ssr_mode_xml_xml_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! codemirror-ssr/mode/xml/xml.js */ \"(ssr)/./node_modules/codemirror-ssr/mode/xml/xml.js\");\n/* harmony import */ var codemirror_ssr_mode_yaml_frontmatter_yaml_frontmatter_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! codemirror-ssr/mode/yaml-frontmatter/yaml-frontmatter.js */ \"(ssr)/./node_modules/codemirror-ssr/mode/yaml-frontmatter/yaml-frontmatter.js\");\n/* harmony import */ var codemirror_ssr_mode_yaml_yaml_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! codemirror-ssr/mode/yaml/yaml.js */ \"(ssr)/./node_modules/codemirror-ssr/mode/yaml/yaml.js\");\n/* harmony import */ var select_files__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! select-files */ \"(ssr)/./node_modules/select-files/dist/index.esm.js\");\n/* harmony import */ var word_count__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! word-count */ \"(ssr)/./node_modules/word-count/index.js\");\n/* harmony import */ var unist_util_visit__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! unist-util-visit */ \"(ssr)/./node_modules/unist-util-visit/lib/index.js\");\n/* harmony import */ var tippy_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! tippy.js */ \"(ssr)/./node_modules/tippy.js/dist/tippy.esm.js\");\n/* harmony import */ var hast_util_sanitize__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! hast-util-sanitize */ \"(ssr)/./node_modules/hast-util-sanitize/lib/schema.js\");\n/* harmony import */ var rehype_raw__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! rehype-raw */ \"(ssr)/./node_modules/rehype-raw/index.js\");\n/* harmony import */ var rehype_sanitize__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! rehype-sanitize */ \"(ssr)/./node_modules/rehype-sanitize/index.js\");\n/* harmony import */ var rehype_stringify__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! rehype-stringify */ \"(ssr)/./node_modules/rehype-stringify/lib/index.js\");\n/* harmony import */ var remark_parse__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! remark-parse */ \"(ssr)/./node_modules/remark-parse/lib/index.js\");\n/* harmony import */ var remark_rehype__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! remark-rehype */ \"(ssr)/./node_modules/remark-rehype/lib/index.js\");\n/* harmony import */ var unified__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! unified */ \"(ssr)/./node_modules/unified/lib/index.js\");\n/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! lodash-es */ \"(ssr)/./node_modules/lodash-es/debounce.js\");\n/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! lodash-es */ \"(ssr)/./node_modules/lodash-es/throttle.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst index = \"\";\nfunction noop() {\n}\nfunction run(fn) {\n  return fn();\n}\nfunction blank_object() {\n  return /* @__PURE__ */ Object.create(null);\n}\nfunction run_all(fns) {\n  fns.forEach(run);\n}\nfunction is_function(thing) {\n  return typeof thing === \"function\";\n}\nfunction safe_not_equal(a, b) {\n  return a != a ? b == b : a !== b || (a && typeof a === \"object\" || typeof a === \"function\");\n}\nfunction not_equal(a, b) {\n  return a != a ? b == b : a !== b;\n}\nfunction is_empty(obj) {\n  return Object.keys(obj).length === 0;\n}\nfunction append(target, node) {\n  target.appendChild(node);\n}\nfunction insert(target, node, anchor) {\n  target.insertBefore(node, anchor || null);\n}\nfunction detach(node) {\n  if (node.parentNode) {\n    node.parentNode.removeChild(node);\n  }\n}\nfunction destroy_each(iterations, detaching) {\n  for (let i = 0; i < iterations.length; i += 1) {\n    if (iterations[i])\n      iterations[i].d(detaching);\n  }\n}\nfunction element(name) {\n  return document.createElement(name);\n}\nfunction text(data) {\n  return document.createTextNode(data);\n}\nfunction empty() {\n  return text(\"\");\n}\nfunction listen(node, event, handler, options) {\n  node.addEventListener(event, handler, options);\n  return () => node.removeEventListener(event, handler, options);\n}\nfunction self(fn) {\n  return function(event) {\n    if (event.target === this)\n      fn.call(this, event);\n  };\n}\nfunction attr(node, attribute, value) {\n  if (value == null)\n    node.removeAttribute(attribute);\n  else if (node.getAttribute(attribute) !== value)\n    node.setAttribute(attribute, value);\n}\nfunction children(element2) {\n  return Array.from(element2.childNodes);\n}\nfunction set_data(text2, data) {\n  data = \"\" + data;\n  if (text2.wholeText !== data)\n    text2.data = data;\n}\nfunction toggle_class(element2, name, toggle) {\n  element2.classList[toggle ? \"add\" : \"remove\"](name);\n}\nfunction custom_event(type, detail, { bubbles = false, cancelable = false } = {}) {\n  const e = document.createEvent(\"CustomEvent\");\n  e.initCustomEvent(type, bubbles, cancelable, detail);\n  return e;\n}\nlet current_component;\nfunction set_current_component(component) {\n  current_component = component;\n}\nfunction get_current_component() {\n  if (!current_component)\n    throw new Error(\"Function called outside component initialization\");\n  return current_component;\n}\nfunction onMount(fn) {\n  get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n  get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n  get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n  const component = get_current_component();\n  return (type, detail, { cancelable = false } = {}) => {\n    const callbacks = component.$$.callbacks[type];\n    if (callbacks) {\n      const event = custom_event(type, detail, { cancelable });\n      callbacks.slice().forEach((fn) => {\n        fn.call(component, event);\n      });\n      return !event.defaultPrevented;\n    }\n    return true;\n  };\n}\nconst dirty_components = [];\nconst binding_callbacks = [];\nlet render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = /* @__PURE__ */ Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n  if (!update_scheduled) {\n    update_scheduled = true;\n    resolved_promise.then(flush);\n  }\n}\nfunction tick() {\n  schedule_update();\n  return resolved_promise;\n}\nfunction add_render_callback(fn) {\n  render_callbacks.push(fn);\n}\nconst seen_callbacks = /* @__PURE__ */ new Set();\nlet flushidx = 0;\nfunction flush() {\n  if (flushidx !== 0) {\n    return;\n  }\n  const saved_component = current_component;\n  do {\n    try {\n      while (flushidx < dirty_components.length) {\n        const component = dirty_components[flushidx];\n        flushidx++;\n        set_current_component(component);\n        update(component.$$);\n      }\n    } catch (e) {\n      dirty_components.length = 0;\n      flushidx = 0;\n      throw e;\n    }\n    set_current_component(null);\n    dirty_components.length = 0;\n    flushidx = 0;\n    while (binding_callbacks.length)\n      binding_callbacks.pop()();\n    for (let i = 0; i < render_callbacks.length; i += 1) {\n      const callback = render_callbacks[i];\n      if (!seen_callbacks.has(callback)) {\n        seen_callbacks.add(callback);\n        callback();\n      }\n    }\n    render_callbacks.length = 0;\n  } while (dirty_components.length);\n  while (flush_callbacks.length) {\n    flush_callbacks.pop()();\n  }\n  update_scheduled = false;\n  seen_callbacks.clear();\n  set_current_component(saved_component);\n}\nfunction update($$) {\n  if ($$.fragment !== null) {\n    $$.update();\n    run_all($$.before_update);\n    const dirty = $$.dirty;\n    $$.dirty = [-1];\n    $$.fragment && $$.fragment.p($$.ctx, dirty);\n    $$.after_update.forEach(add_render_callback);\n  }\n}\nfunction flush_render_callbacks(fns) {\n  const filtered = [];\n  const targets = [];\n  render_callbacks.forEach((c) => fns.indexOf(c) === -1 ? filtered.push(c) : targets.push(c));\n  targets.forEach((c) => c());\n  render_callbacks = filtered;\n}\nconst outroing = /* @__PURE__ */ new Set();\nlet outros;\nfunction group_outros() {\n  outros = {\n    r: 0,\n    c: [],\n    p: outros\n    // parent group\n  };\n}\nfunction check_outros() {\n  if (!outros.r) {\n    run_all(outros.c);\n  }\n  outros = outros.p;\n}\nfunction transition_in(block, local) {\n  if (block && block.i) {\n    outroing.delete(block);\n    block.i(local);\n  }\n}\nfunction transition_out(block, local, detach2, callback) {\n  if (block && block.o) {\n    if (outroing.has(block))\n      return;\n    outroing.add(block);\n    outros.c.push(() => {\n      outroing.delete(block);\n      if (callback) {\n        if (detach2)\n          block.d(1);\n        callback();\n      }\n    });\n    block.o(local);\n  } else if (callback) {\n    callback();\n  }\n}\nfunction create_component(block) {\n  block && block.c();\n}\nfunction mount_component(component, target, anchor, customElement) {\n  const { fragment, after_update } = component.$$;\n  fragment && fragment.m(target, anchor);\n  if (!customElement) {\n    add_render_callback(() => {\n      const new_on_destroy = component.$$.on_mount.map(run).filter(is_function);\n      if (component.$$.on_destroy) {\n        component.$$.on_destroy.push(...new_on_destroy);\n      } else {\n        run_all(new_on_destroy);\n      }\n      component.$$.on_mount = [];\n    });\n  }\n  after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n  const $$ = component.$$;\n  if ($$.fragment !== null) {\n    flush_render_callbacks($$.after_update);\n    run_all($$.on_destroy);\n    $$.fragment && $$.fragment.d(detaching);\n    $$.on_destroy = $$.fragment = null;\n    $$.ctx = [];\n  }\n}\nfunction make_dirty(component, i) {\n  if (component.$$.dirty[0] === -1) {\n    dirty_components.push(component);\n    schedule_update();\n    component.$$.dirty.fill(0);\n  }\n  component.$$.dirty[i / 31 | 0] |= 1 << i % 31;\n}\nfunction init(component, options, instance2, create_fragment2, not_equal2, props, append_styles, dirty = [-1]) {\n  const parent_component = current_component;\n  set_current_component(component);\n  const $$ = component.$$ = {\n    fragment: null,\n    ctx: [],\n    // state\n    props,\n    update: noop,\n    not_equal: not_equal2,\n    bound: blank_object(),\n    // lifecycle\n    on_mount: [],\n    on_destroy: [],\n    on_disconnect: [],\n    before_update: [],\n    after_update: [],\n    context: new Map(options.context || (parent_component ? parent_component.$$.context : [])),\n    // everything else\n    callbacks: blank_object(),\n    dirty,\n    skip_bound: false,\n    root: options.target || parent_component.$$.root\n  };\n  append_styles && append_styles($$.root);\n  let ready = false;\n  $$.ctx = instance2 ? instance2(component, options.props || {}, (i, ret, ...rest) => {\n    const value = rest.length ? rest[0] : ret;\n    if ($$.ctx && not_equal2($$.ctx[i], $$.ctx[i] = value)) {\n      if (!$$.skip_bound && $$.bound[i])\n        $$.bound[i](value);\n      if (ready)\n        make_dirty(component, i);\n    }\n    return ret;\n  }) : [];\n  $$.update();\n  ready = true;\n  run_all($$.before_update);\n  $$.fragment = create_fragment2 ? create_fragment2($$.ctx) : false;\n  if (options.target) {\n    if (options.hydrate) {\n      const nodes = children(options.target);\n      $$.fragment && $$.fragment.l(nodes);\n      nodes.forEach(detach);\n    } else {\n      $$.fragment && $$.fragment.c();\n    }\n    if (options.intro)\n      transition_in(component.$$.fragment);\n    mount_component(component, options.target, options.anchor, options.customElement);\n    flush();\n  }\n  set_current_component(parent_component);\n}\nclass SvelteComponent {\n  $destroy() {\n    destroy_component(this, 1);\n    this.$destroy = noop;\n  }\n  $on(type, callback) {\n    if (!is_function(callback)) {\n      return noop;\n    }\n    const callbacks = this.$$.callbacks[type] || (this.$$.callbacks[type] = []);\n    callbacks.push(callback);\n    return () => {\n      const index2 = callbacks.indexOf(callback);\n      if (index2 !== -1)\n        callbacks.splice(index2, 1);\n    };\n  }\n  $set($$props) {\n    if (this.$$set && !is_empty($$props)) {\n      this.$$.skip_bound = true;\n      this.$$set($$props);\n      this.$$.skip_bound = false;\n    }\n  }\n}\nconst bold = \"Bold\";\nconst boldText = \"bold text\";\nconst cheatsheet = \"Markdown Cheatsheet\";\nconst closeHelp = \"Close help\";\nconst closeToc = \"Close table of contents\";\nconst code = \"Code\";\nconst codeBlock = \"Code block\";\nconst codeLang = \"lang\";\nconst codeText = \"code\";\nconst exitFullscreen = \"Exit fullscreen\";\nconst exitPreviewOnly = \"Exit preview only\";\nconst exitWriteOnly = \"Exit write only\";\nconst fullscreen = \"Fullscreen\";\nconst h1 = \"Heading 1\";\nconst h2 = \"Heading 2\";\nconst h3 = \"Heading 3\";\nconst h4 = \"Heading 4\";\nconst h5 = \"Heading 5\";\nconst h6 = \"Heading 6\";\nconst headingText = \"heading\";\nconst help = \"Help\";\nconst hr = \"Horizontal rule\";\nconst image = \"Image\";\nconst imageAlt = \"alt\";\nconst imageTitle = \"title\";\nconst italic = \"Italic\";\nconst italicText = \"italic text\";\nconst limited = \"The maximum character limit has been reached\";\nconst lines = \"Lines\";\nconst link = \"Link\";\nconst linkText = \"link text\";\nconst ol = \"Ordered list\";\nconst olItem = \"item\";\nconst preview = \"Preview\";\nconst previewOnly = \"Preview only\";\nconst quote = \"Quote\";\nconst quotedText = \"quoted text\";\nconst shortcuts = \"Shortcuts\";\nconst source = \"Source code\";\nconst sync = \"Scroll sync\";\nconst toc = \"Table of contents\";\nconst top = \"Scroll to top\";\nconst ul = \"Unordered list\";\nconst ulItem = \"item\";\nconst words = \"Words\";\nconst write = \"Write\";\nconst writeOnly = \"Write only\";\nconst en = {\n  bold,\n  boldText,\n  cheatsheet,\n  closeHelp,\n  closeToc,\n  code,\n  codeBlock,\n  codeLang,\n  codeText,\n  exitFullscreen,\n  exitPreviewOnly,\n  exitWriteOnly,\n  fullscreen,\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6,\n  headingText,\n  help,\n  hr,\n  image,\n  imageAlt,\n  imageTitle,\n  italic,\n  italicText,\n  limited,\n  lines,\n  link,\n  linkText,\n  ol,\n  olItem,\n  preview,\n  previewOnly,\n  quote,\n  quotedText,\n  shortcuts,\n  source,\n  sync,\n  toc,\n  top,\n  ul,\n  ulItem,\n  words,\n  write,\n  writeOnly\n};\nconst icons = {\n  Close: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"none\" viewBox=\"0 0 48 48\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"4\" d=\"m8 8 32 32M8 40 40 8\"/></svg>',\n  H: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"none\" viewBox=\"0 0 48 48\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"4\" d=\"M12 5v38M36 5v38M12 24h24\"/></svg>',\n  H1: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"none\" viewBox=\"0 0 48 48\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"4\" d=\"M6 8v32M25 8v32M6 24h19M34.226 24 39 19.017V40\"/></svg>',\n  H2: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"none\" viewBox=\"0 0 48 48\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"4\" d=\"M6 8v32M24 8v32M7 24h16M32 25c0-3.167 2.667-5 5-5s5 1.833 5 5c0 5.7-10 9.933-10 15h10\"/></svg>',\n  H3: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"none\" viewBox=\"0 0 48 48\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"4\" d=\"M6 8v32M24 8v32M7 24h16M32 20h10l-7 9c4 0 7 2 7 6s-3 5-5 5c-2.381 0-4-1-5-2.1\"/></svg>',\n  LevelFourTitle: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"none\" viewBox=\"0 0 48 48\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"4\" d=\"M6 8v32M24 8v32M7 24h16M39.977 40V20L31 32.997v2.023h12\"/></svg>',\n  LevelFiveTitle: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"none\" viewBox=\"0 0 48 48\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"4\" d=\"M6 8v32M24 8v32M7 24h16M40 21.01h-8v7.024C32 28 34 27 37 27s4 2.534 4 6.5-1 6.5-5 6.5c-3 0-4-2-4-3.992\"/></svg>',\n  LevelSixTitle: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"none\" viewBox=\"0 0 48 48\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"4\" d=\"M6 8v32M24 8v32M7 24h16\"/><path stroke=\"currentColor\" stroke-width=\"4\" d=\"M36.5 40a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11Z\"/><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"4\" d=\"M41.596 24.74C40.778 22.545 38.804 21 36.5 21c-3.038 0-5.5 2.686-5.5 6v7\"/></svg>',\n  TextBold: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"none\" viewBox=\"0 0 48 48\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"4\" d=\"M24 24c5.506 0 9.969-4.477 9.969-10S29.506 4 24 4H11v20h13ZM28.031 44C33.537 44 38 39.523 38 34s-4.463-10-9.969-10H11v20h17.031Z\" clip-rule=\"evenodd\"/></svg>',\n  TextItalic: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"none\" viewBox=\"0 0 48 48\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"4\" d=\"M20 6h16M12 42h16M29 5.952 19 42\"/></svg>',\n  Quote: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"none\" viewBox=\"0 0 48 48\"><path fill=\"currentColor\" fill-rule=\"evenodd\" d=\"M18.853 9.116C11.323 13.952 7.14 19.58 6.303 26.003 5 36 13.94 40.893 18.47 36.497 23 32.1 20.285 26.52 17.005 24.994c-3.28-1.525-5.286-.994-4.936-3.033.35-2.038 5.016-7.69 9.116-10.322a.749.749 0 0 0 .114-1.02L20.285 9.3c-.44-.572-.862-.55-1.432-.185ZM38.679 9.116c-7.53 4.836-11.714 10.465-12.55 16.887-1.303 9.997 7.637 14.89 12.167 10.494 4.53-4.397 1.815-9.977-1.466-11.503-3.28-1.525-5.286-.994-4.936-3.033.35-2.038 5.017-7.69 9.117-10.322a.749.749 0 0 0 .113-1.02L40.11 9.3c-.44-.572-.862-.55-1.431-.185Z\" clip-rule=\"evenodd\"/></svg>',\n  LinkOne: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"none\" viewBox=\"0 0 48 48\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"4\" d=\"m26.24 16.373-9.14-9.14c-2.661-2.661-7.035-2.603-9.768.131-2.734 2.734-2.793 7.107-.131 9.768l7.935 7.936M32.903 23.003l7.935 7.935c2.661 2.662 2.603 7.035-.13 9.769-2.735 2.734-7.108 2.792-9.77.13l-9.14-9.14\"/><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"4\" d=\"M26.11 26.142c2.733-2.734 2.792-7.108.13-9.769M21.799 21.798c-2.734 2.734-2.792 7.108-.131 9.769\"/></svg>',\n  Pic: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"none\" viewBox=\"0 0 48 48\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"4\" d=\"M5 10a2 2 0 0 1 2-2h34a2 2 0 0 1 2 2v28a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V10Z\" clip-rule=\"evenodd\"/><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"4\" d=\"M14.5 18a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z\" clip-rule=\"evenodd\"/><path stroke=\"currentColor\" stroke-linejoin=\"round\" stroke-width=\"4\" d=\"m15 24 5 4 6-7 17 13v4a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-4l10-10Z\"/></svg>',\n  Code: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"none\" viewBox=\"0 0 48 48\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"4\" d=\"M16 13 4 25.432 16 37M32 13l12 12.432L32 37\"/><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"4\" d=\"m28 4-7 40\"/></svg>',\n  CodeBrackets: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"none\" viewBox=\"0 0 48 48\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"4\" d=\"M16 4c-2 0-5 1-5 5v9c0 3-5 5-5 5s5 2 5 5v11c0 4 3 5 5 5M32 4c2 0 5 1 5 5v9c0 3 5 5 5 5s-5 2-5 5v11c0 4-3 5-5 5\"/></svg>',\n  ListTwo: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"none\" viewBox=\"0 0 48 48\"><path stroke=\"currentColor\" stroke-linejoin=\"round\" stroke-width=\"4\" d=\"M9 42a4 4 0 1 0 0-8 4 4 0 0 0 0 8ZM9 14a4 4 0 1 0 0-8 4 4 0 0 0 0 8ZM9 28a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z\"/><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"4\" d=\"M21 24h22M21 38h22M21 10h22\"/></svg>',\n  OrderedList: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"none\" viewBox=\"0 0 48 48\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"4\" d=\"M9 4v9M12 13H6M12 27H6M6 20s3-3 5 0-5 7-5 7M6 34.5s2-3 5-1 0 4.5 0 4.5 3 2.5 0 4.5-5-1-5-1M11 38H9M9 4 6 6M21 24h22M21 38h22M21 10h22\"/></svg>',\n  DividingLine: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"none\" viewBox=\"0 0 48 48\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"4\" d=\"M5 24h38M21 38h6M37 38h6M21 10h6M5 38h6M5 10h6M37 10h6\"/></svg>',\n  AlignTextLeftOne: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"none\" viewBox=\"0 0 48 48\"><path stroke=\"currentColor\" stroke-linejoin=\"round\" stroke-width=\"4\" d=\"M39 6H9a3 3 0 0 0-3 3v30a3 3 0 0 0 3 3h30a3 3 0 0 0 3-3V9a3 3 0 0 0-3-3Z\"/><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"4\" d=\"M26 24H14M34 15H14M32 33H14\"/></svg>',\n  Helpcenter: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"none\" viewBox=\"0 0 48 48\"><path stroke=\"currentColor\" stroke-linejoin=\"round\" stroke-width=\"4\" d=\"M39 6H9a3 3 0 0 0-3 3v30a3 3 0 0 0 3 3h30a3 3 0 0 0 3-3V9a3 3 0 0 0-3-3Z\"/><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"4\" d=\"M24 28.625v-4a6 6 0 1 0-6-6\"/><path fill=\"currentColor\" fill-rule=\"evenodd\" d=\"M24 37.625a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z\" clip-rule=\"evenodd\"/></svg>',\n  LeftExpand: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"none\" viewBox=\"0 0 48 48\"><rect width=\"28\" height=\"36\" x=\"6\" y=\"6\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"4\" rx=\"2\"/><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"4\" d=\"M42 6v36\"/></svg>',\n  RightExpand: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"none\" viewBox=\"0 0 48 48\"><rect width=\"28\" height=\"36\" x=\"14\" y=\"6\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"4\" rx=\"2\"/><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"4\" d=\"M6 6v36\"/></svg>',\n  OffScreen: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"none\" viewBox=\"0 0 48 48\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"4\" d=\"M33 6v9h9M15 6v9H6M15 42v-9H6M33 42v-9h8.9\"/></svg>',\n  FullScreen: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"none\" viewBox=\"0 0 48 48\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"4\" d=\"M33 6h9v9M42 33v9h-9M15 42H6v-9M6 15V6h9\"/></svg>',\n  GithubOne: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"none\" viewBox=\"0 0 48 48\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"4\" d=\"M29.344 30.477c2.404-.5 4.585-1.366 6.28-2.638C38.52 25.668 40 22.314 40 19c0-2.324-.881-4.494-2.407-6.332-.85-1.024 1.636-8.667-.573-7.638-2.21 1.03-5.45 3.308-7.147 2.805A20.712 20.712 0 0 0 24 7c-1.8 0-3.532.223-5.147.634C16.505 8.232 14.259 6 12 5.03c-2.26-.97-1.026 6.934-1.697 7.765C8.84 14.605 8 16.73 8 19c0 3.314 1.79 6.668 4.686 8.84 1.93 1.446 4.348 2.368 7.054 2.822M19.74 30.662c-1.159 1.275-1.738 2.486-1.738 3.632v8.717M29.345 30.477c1.097 1.44 1.646 2.734 1.646 3.88v8.654M6 31.215c.899.11 1.566.524 2 1.24.652 1.075 3.074 5.063 5.825 5.063h4.177\"/></svg>'\n};\nfunction createCodeMirror() {\n  const codemirror = (0,codemirror_ssr__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n  (0,codemirror_ssr_addon_display_placeholder_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(codemirror);\n  (0,codemirror_ssr_addon_mode_overlay_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(codemirror);\n  (0,codemirror_ssr_mode_xml_xml_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(codemirror);\n  (0,codemirror_ssr_mode_markdown_markdown_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(codemirror);\n  (0,codemirror_ssr_mode_gfm_gfm_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(codemirror);\n  (0,codemirror_ssr_mode_yaml_yaml_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(codemirror);\n  (0,codemirror_ssr_mode_yaml_frontmatter_yaml_frontmatter_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(codemirror);\n  (0,codemirror_ssr_addon_edit_continuelist_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(codemirror);\n  return codemirror;\n}\nfunction createEditorUtils(codemirror, editor) {\n  return {\n    /**\n     * Wrap text with decorators, for example:\n     *\n     * `text -> *text*`\n     */\n    wrapText(before, after = before) {\n      const range = editor.somethingSelected() ? editor.listSelections()[0] : editor.findWordAt(editor.getCursor());\n      const from = range.from();\n      const to = range.to();\n      const text2 = editor.getRange(from, to);\n      const fromBefore = codemirror.Pos(from.line, from.ch - before.length);\n      const toAfter = codemirror.Pos(to.line, to.ch + after.length);\n      if (editor.getRange(fromBefore, from) === before && editor.getRange(to, toAfter) === after) {\n        editor.replaceRange(text2, fromBefore, toAfter);\n        editor.setSelection(\n          fromBefore,\n          codemirror.Pos(fromBefore.line, fromBefore.ch + text2.length)\n        );\n      } else {\n        editor.replaceRange(before + text2 + after, from, to);\n        const cursor = editor.getCursor();\n        editor.setSelection(\n          codemirror.Pos(cursor.line, cursor.ch - after.length - text2.length),\n          codemirror.Pos(cursor.line, cursor.ch - after.length)\n        );\n      }\n    },\n    /**\n     * replace multiple lines\n     *\n     * `line -> # line`\n     */\n    replaceLines(replace) {\n      const [selection] = editor.listSelections();\n      const range = [\n        codemirror.Pos(selection.from().line, 0),\n        codemirror.Pos(selection.to().line)\n      ];\n      const lines2 = editor.getRange(...range).split(\"\\n\");\n      editor.replaceRange(lines2.map(replace).join(\"\\n\"), ...range);\n      editor.setSelection(...range);\n    },\n    /**\n     * Append a block based on the cursor position\n     */\n    appendBlock(content) {\n      const cursor = editor.getCursor();\n      let emptyLine = -1;\n      for (let i = cursor.line; i < editor.lineCount(); i++) {\n        if (!editor.getLine(i).trim()) {\n          emptyLine = i;\n          break;\n        }\n      }\n      if (emptyLine === -1) {\n        editor.replaceRange(\"\\n\", codemirror.Pos(editor.lineCount()));\n        emptyLine = editor.lineCount();\n      }\n      editor.replaceRange(\"\\n\" + content, codemirror.Pos(emptyLine));\n      return codemirror.Pos(emptyLine + 1, 0);\n    },\n    /**\n     * Triggers a virtual file input and let user select files\n     *\n     * https://www.npmjs.com/package/select-files\n     */\n    selectFiles: select_files__WEBPACK_IMPORTED_MODULE_9__[\"default\"]\n  };\n}\nfunction findStartIndex(num, nums) {\n  let startIndex = nums.length - 2;\n  for (let i = 0; i < nums.length; i++) {\n    if (num < nums[i]) {\n      startIndex = i - 1;\n      break;\n    }\n  }\n  startIndex = Math.max(startIndex, 0);\n  return startIndex;\n}\nconst getShortcutWithPrefix = (key, shift = false) => {\n  const shiftPrefix = shift ? \"Shift-\" : \"\";\n  const CmdPrefix = typeof navigator !== \"undefined\" && /Mac/.test(navigator.platform) ? \"Cmd-\" : \"Ctrl-\";\n  return shiftPrefix + CmdPrefix + key;\n};\nasync function handleImageUpload({ editor, appendBlock, codemirror }, uploadImages, files) {\n  const imgs = await uploadImages(files);\n  const pos = appendBlock(\n    imgs.map(({ url, alt, title }, i) => {\n      alt = alt != null ? alt : files[i].name;\n      return `![${alt}](${url}${title ? ` \"${title}\"` : \"\"})`;\n    }).join(\"\\n\\n\")\n  );\n  editor.setSelection(pos, codemirror.Pos(pos.line + imgs.length * 2 - 2));\n  editor.focus();\n}\nfunction getBuiltinActions(locale, plugins, uploadImages) {\n  const leftActions = [\n    {\n      icon: icons.H,\n      handler: {\n        type: \"dropdown\",\n        actions: [1, 2, 3, 4, 5, 6].map((level) => ({\n          title: locale[`h${level}`],\n          icon: [\n            icons.H1,\n            icons.H2,\n            icons.H3,\n            icons.LevelFourTitle,\n            icons.LevelFiveTitle,\n            icons.LevelSixTitle\n          ][level - 1],\n          cheatsheet: level <= 3 ? `${\"#\".repeat(level)} ${locale.headingText}` : void 0,\n          handler: {\n            type: \"action\",\n            click({ replaceLines, editor }) {\n              replaceLines((line) => {\n                line = line.trim().replace(/^#*/, \"\").trim();\n                line = \"#\".repeat(level) + \" \" + line;\n                return line;\n              });\n              editor.focus();\n            }\n          }\n        }))\n      }\n    },\n    {\n      title: locale.bold,\n      icon: icons.TextBold,\n      cheatsheet: `**${locale.boldText}**`,\n      handler: {\n        type: \"action\",\n        shortcut: getShortcutWithPrefix(\"B\"),\n        click({ wrapText, editor }) {\n          wrapText(\"**\");\n          editor.focus();\n        }\n      }\n    },\n    {\n      title: locale.italic,\n      icon: icons.TextItalic,\n      cheatsheet: `*${locale.italicText}*`,\n      handler: {\n        type: \"action\",\n        shortcut: getShortcutWithPrefix(\"I\"),\n        click({ wrapText, editor }) {\n          wrapText(\"*\");\n          editor.focus();\n        }\n      }\n    },\n    {\n      title: locale.quote,\n      icon: icons.Quote,\n      cheatsheet: `> ${locale.quotedText}`,\n      handler: {\n        type: \"action\",\n        click({ replaceLines, editor }) {\n          replaceLines((line) => \"> \" + line);\n          editor.focus();\n        }\n      }\n    },\n    {\n      title: locale.link,\n      icon: icons.LinkOne,\n      cheatsheet: `[${locale.linkText}](url)`,\n      handler: {\n        type: \"action\",\n        shortcut: getShortcutWithPrefix(\"K\"),\n        click({ editor, wrapText, codemirror }) {\n          wrapText(\"[\", \"](url)\");\n          const cursor = editor.getCursor();\n          editor.setSelection(\n            codemirror.Pos(cursor.line, cursor.ch + 2),\n            codemirror.Pos(cursor.line, cursor.ch + 5)\n          );\n          editor.focus();\n        }\n      }\n    },\n    {\n      title: locale.image,\n      icon: icons.Pic,\n      cheatsheet: `![${locale.imageAlt}](url \"${locale.imageTitle}\")`,\n      handler: uploadImages ? {\n        type: \"action\",\n        shortcut: getShortcutWithPrefix(\"I\", true),\n        async click(ctx) {\n          const fileList = await (0,select_files__WEBPACK_IMPORTED_MODULE_9__[\"default\"])({\n            accept: \"image/*\",\n            multiple: true\n          });\n          if (fileList == null ? void 0 : fileList.length) {\n            await handleImageUpload(ctx, uploadImages, Array.from(fileList));\n          }\n        }\n      } : void 0\n    },\n    {\n      title: locale.code,\n      icon: icons.Code,\n      cheatsheet: \"`\" + locale.codeText + \"`\",\n      handler: {\n        type: \"action\",\n        shortcut: getShortcutWithPrefix(\"K\", true),\n        click({ wrapText, editor }) {\n          wrapText(\"`\");\n          editor.focus();\n        }\n      }\n    },\n    {\n      title: locale.codeBlock,\n      icon: icons.CodeBrackets,\n      cheatsheet: \"```\" + locale.codeLang + \"↵\",\n      handler: {\n        type: \"action\",\n        shortcut: getShortcutWithPrefix(\"C\", true),\n        click({ editor, appendBlock, codemirror }) {\n          const pos = appendBlock(\"```js\\n```\");\n          editor.setSelection(\n            codemirror.Pos(pos.line, 3),\n            codemirror.Pos(pos.line, 5)\n          );\n          editor.focus();\n        }\n      }\n    },\n    {\n      title: locale.ul,\n      icon: icons.ListTwo,\n      cheatsheet: `- ${locale.ulItem}`,\n      handler: {\n        type: \"action\",\n        shortcut: getShortcutWithPrefix(\"U\", true),\n        click({ replaceLines, editor }) {\n          replaceLines((line) => \"- \" + line);\n          editor.focus();\n        }\n      }\n    },\n    {\n      title: locale.ol,\n      icon: icons.OrderedList,\n      cheatsheet: `1. ${locale.olItem}`,\n      handler: {\n        type: \"action\",\n        shortcut: getShortcutWithPrefix(\"O\", true),\n        click({ replaceLines, editor }) {\n          replaceLines((line, i) => `${i + 1}. ${line}`);\n          editor.focus();\n        }\n      }\n    },\n    {\n      title: locale.hr,\n      icon: icons.DividingLine,\n      cheatsheet: \"---\"\n    }\n  ];\n  const rightActions = [];\n  plugins.forEach(({ actions }) => {\n    if (actions) {\n      actions.forEach((action) => {\n        if (!action.position || action.position !== \"right\")\n          leftActions.push(action);\n        else\n          rightActions.unshift(action);\n      });\n    }\n  });\n  return {\n    leftActions,\n    rightActions\n  };\n}\nfunction get_each_context$2(ctx, list, i) {\n  const child_ctx = ctx.slice();\n  child_ctx[5] = list[i];\n  return child_ctx;\n}\nfunction get_each_context_1$1(ctx, list, i) {\n  const child_ctx = ctx.slice();\n  child_ctx[5] = list[i];\n  return child_ctx;\n}\nfunction create_if_block_1$2(ctx) {\n  let li;\n  let div0;\n  let raw_value = (\n    /*action*/\n    ctx[5].icon + \"\"\n  );\n  let div1;\n  let t0_value = (\n    /*action*/\n    ctx[5].title + \"\"\n  );\n  let t0;\n  let div2;\n  let code2;\n  let t1_value = (\n    /*action*/\n    ctx[5].cheatsheet + \"\"\n  );\n  let t1;\n  return {\n    c() {\n      li = element(\"li\");\n      div0 = element(\"div\");\n      div1 = element(\"div\");\n      t0 = text(t0_value);\n      div2 = element(\"div\");\n      code2 = element(\"code\");\n      t1 = text(t1_value);\n      attr(div0, \"class\", \"bytemd-help-icon\");\n      attr(div1, \"class\", \"bytemd-help-title\");\n      attr(div2, \"class\", \"bytemd-help-content\");\n    },\n    m(target, anchor) {\n      insert(target, li, anchor);\n      append(li, div0);\n      div0.innerHTML = raw_value;\n      append(li, div1);\n      append(div1, t0);\n      append(li, div2);\n      append(div2, code2);\n      append(code2, t1);\n    },\n    p(ctx2, dirty) {\n      if (dirty & /*items*/\n      4 && raw_value !== (raw_value = /*action*/\n      ctx2[5].icon + \"\"))\n        div0.innerHTML = raw_value;\n      if (dirty & /*items*/\n      4 && t0_value !== (t0_value = /*action*/\n      ctx2[5].title + \"\"))\n        set_data(t0, t0_value);\n      if (dirty & /*items*/\n      4 && t1_value !== (t1_value = /*action*/\n      ctx2[5].cheatsheet + \"\"))\n        set_data(t1, t1_value);\n    },\n    d(detaching) {\n      if (detaching)\n        detach(li);\n    }\n  };\n}\nfunction create_each_block_1$1(ctx) {\n  let if_block_anchor;\n  let if_block = (\n    /*action*/\n    ctx[5].cheatsheet && create_if_block_1$2(ctx)\n  );\n  return {\n    c() {\n      if (if_block)\n        if_block.c();\n      if_block_anchor = empty();\n    },\n    m(target, anchor) {\n      if (if_block)\n        if_block.m(target, anchor);\n      insert(target, if_block_anchor, anchor);\n    },\n    p(ctx2, dirty) {\n      if (\n        /*action*/\n        ctx2[5].cheatsheet\n      ) {\n        if (if_block) {\n          if_block.p(ctx2, dirty);\n        } else {\n          if_block = create_if_block_1$2(ctx2);\n          if_block.c();\n          if_block.m(if_block_anchor.parentNode, if_block_anchor);\n        }\n      } else if (if_block) {\n        if_block.d(1);\n        if_block = null;\n      }\n    },\n    d(detaching) {\n      if (if_block)\n        if_block.d(detaching);\n      if (detaching)\n        detach(if_block_anchor);\n    }\n  };\n}\nfunction create_if_block$3(ctx) {\n  let li;\n  let div0;\n  let raw_value = (\n    /*action*/\n    ctx[5].icon + \"\"\n  );\n  let div1;\n  let t0_value = (\n    /*action*/\n    ctx[5].title + \"\"\n  );\n  let t0;\n  let div2;\n  let kbd;\n  let t1_value = (\n    /*action*/\n    ctx[5].handler.shortcut + \"\"\n  );\n  let t1;\n  return {\n    c() {\n      li = element(\"li\");\n      div0 = element(\"div\");\n      div1 = element(\"div\");\n      t0 = text(t0_value);\n      div2 = element(\"div\");\n      kbd = element(\"kbd\");\n      t1 = text(t1_value);\n      attr(div0, \"class\", \"bytemd-help-icon\");\n      attr(div1, \"class\", \"bytemd-help-title\");\n      attr(div2, \"class\", \"bytemd-help-content\");\n    },\n    m(target, anchor) {\n      insert(target, li, anchor);\n      append(li, div0);\n      div0.innerHTML = raw_value;\n      append(li, div1);\n      append(div1, t0);\n      append(li, div2);\n      append(div2, kbd);\n      append(kbd, t1);\n    },\n    p(ctx2, dirty) {\n      if (dirty & /*items*/\n      4 && raw_value !== (raw_value = /*action*/\n      ctx2[5].icon + \"\"))\n        div0.innerHTML = raw_value;\n      if (dirty & /*items*/\n      4 && t0_value !== (t0_value = /*action*/\n      ctx2[5].title + \"\"))\n        set_data(t0, t0_value);\n      if (dirty & /*items*/\n      4 && t1_value !== (t1_value = /*action*/\n      ctx2[5].handler.shortcut + \"\"))\n        set_data(t1, t1_value);\n    },\n    d(detaching) {\n      if (detaching)\n        detach(li);\n    }\n  };\n}\nfunction create_each_block$2(ctx) {\n  let if_block_anchor;\n  let if_block = (\n    /*action*/\n    ctx[5].handler && /*action*/\n    ctx[5].handler.type === \"action\" && /*action*/\n    ctx[5].handler.shortcut && create_if_block$3(ctx)\n  );\n  return {\n    c() {\n      if (if_block)\n        if_block.c();\n      if_block_anchor = empty();\n    },\n    m(target, anchor) {\n      if (if_block)\n        if_block.m(target, anchor);\n      insert(target, if_block_anchor, anchor);\n    },\n    p(ctx2, dirty) {\n      if (\n        /*action*/\n        ctx2[5].handler && /*action*/\n        ctx2[5].handler.type === \"action\" && /*action*/\n        ctx2[5].handler.shortcut\n      ) {\n        if (if_block) {\n          if_block.p(ctx2, dirty);\n        } else {\n          if_block = create_if_block$3(ctx2);\n          if_block.c();\n          if_block.m(if_block_anchor.parentNode, if_block_anchor);\n        }\n      } else if (if_block) {\n        if_block.d(1);\n        if_block = null;\n      }\n    },\n    d(detaching) {\n      if (if_block)\n        if_block.d(detaching);\n      if (detaching)\n        detach(if_block_anchor);\n    }\n  };\n}\nfunction create_fragment$5(ctx) {\n  let div;\n  let h20;\n  let t0_value = (\n    /*locale*/\n    ctx[0].cheatsheet + \"\"\n  );\n  let t0;\n  let ul0;\n  let h21;\n  let t1_value = (\n    /*locale*/\n    ctx[0].shortcuts + \"\"\n  );\n  let t1;\n  let ul1;\n  let each_value_1 = (\n    /*items*/\n    ctx[2]\n  );\n  let each_blocks_1 = [];\n  for (let i = 0; i < each_value_1.length; i += 1) {\n    each_blocks_1[i] = create_each_block_1$1(get_each_context_1$1(ctx, each_value_1, i));\n  }\n  let each_value = (\n    /*items*/\n    ctx[2]\n  );\n  let each_blocks = [];\n  for (let i = 0; i < each_value.length; i += 1) {\n    each_blocks[i] = create_each_block$2(get_each_context$2(ctx, each_value, i));\n  }\n  return {\n    c() {\n      div = element(\"div\");\n      h20 = element(\"h2\");\n      t0 = text(t0_value);\n      ul0 = element(\"ul\");\n      for (let i = 0; i < each_blocks_1.length; i += 1) {\n        each_blocks_1[i].c();\n      }\n      h21 = element(\"h2\");\n      t1 = text(t1_value);\n      ul1 = element(\"ul\");\n      for (let i = 0; i < each_blocks.length; i += 1) {\n        each_blocks[i].c();\n      }\n      attr(div, \"class\", \"bytemd-help\");\n      toggle_class(div, \"bytemd-hidden\", !/*visible*/\n      ctx[1]);\n    },\n    m(target, anchor) {\n      insert(target, div, anchor);\n      append(div, h20);\n      append(h20, t0);\n      append(div, ul0);\n      for (let i = 0; i < each_blocks_1.length; i += 1) {\n        if (each_blocks_1[i]) {\n          each_blocks_1[i].m(ul0, null);\n        }\n      }\n      append(div, h21);\n      append(h21, t1);\n      append(div, ul1);\n      for (let i = 0; i < each_blocks.length; i += 1) {\n        if (each_blocks[i]) {\n          each_blocks[i].m(ul1, null);\n        }\n      }\n    },\n    p(ctx2, [dirty]) {\n      if (dirty & /*locale*/\n      1 && t0_value !== (t0_value = /*locale*/\n      ctx2[0].cheatsheet + \"\"))\n        set_data(t0, t0_value);\n      if (dirty & /*items*/\n      4) {\n        each_value_1 = /*items*/\n        ctx2[2];\n        let i;\n        for (i = 0; i < each_value_1.length; i += 1) {\n          const child_ctx = get_each_context_1$1(ctx2, each_value_1, i);\n          if (each_blocks_1[i]) {\n            each_blocks_1[i].p(child_ctx, dirty);\n          } else {\n            each_blocks_1[i] = create_each_block_1$1(child_ctx);\n            each_blocks_1[i].c();\n            each_blocks_1[i].m(ul0, null);\n          }\n        }\n        for (; i < each_blocks_1.length; i += 1) {\n          each_blocks_1[i].d(1);\n        }\n        each_blocks_1.length = each_value_1.length;\n      }\n      if (dirty & /*locale*/\n      1 && t1_value !== (t1_value = /*locale*/\n      ctx2[0].shortcuts + \"\"))\n        set_data(t1, t1_value);\n      if (dirty & /*items*/\n      4) {\n        each_value = /*items*/\n        ctx2[2];\n        let i;\n        for (i = 0; i < each_value.length; i += 1) {\n          const child_ctx = get_each_context$2(ctx2, each_value, i);\n          if (each_blocks[i]) {\n            each_blocks[i].p(child_ctx, dirty);\n          } else {\n            each_blocks[i] = create_each_block$2(child_ctx);\n            each_blocks[i].c();\n            each_blocks[i].m(ul1, null);\n          }\n        }\n        for (; i < each_blocks.length; i += 1) {\n          each_blocks[i].d(1);\n        }\n        each_blocks.length = each_value.length;\n      }\n      if (dirty & /*visible*/\n      2) {\n        toggle_class(div, \"bytemd-hidden\", !/*visible*/\n        ctx2[1]);\n      }\n    },\n    i: noop,\n    o: noop,\n    d(detaching) {\n      if (detaching)\n        detach(div);\n      destroy_each(each_blocks_1, detaching);\n      destroy_each(each_blocks, detaching);\n    }\n  };\n}\nfunction instance$5($$self, $$props, $$invalidate) {\n  let items;\n  let { actions } = $$props;\n  let { locale } = $$props;\n  let { visible } = $$props;\n  function flatItems(actions2) {\n    let items2 = [];\n    actions2.forEach((action) => {\n      const { handler, cheatsheet: cheatsheet2 } = action;\n      if ((handler == null ? void 0 : handler.type) === \"dropdown\") {\n        items2.push(...flatItems(handler.actions));\n      }\n      if (cheatsheet2) {\n        items2.push(action);\n      }\n    });\n    return items2;\n  }\n  $$self.$$set = ($$props2) => {\n    if (\"actions\" in $$props2)\n      $$invalidate(3, actions = $$props2.actions);\n    if (\"locale\" in $$props2)\n      $$invalidate(0, locale = $$props2.locale);\n    if (\"visible\" in $$props2)\n      $$invalidate(1, visible = $$props2.visible);\n  };\n  $$self.$$.update = () => {\n    if ($$self.$$.dirty & /*actions*/\n    8) {\n      $$invalidate(2, items = flatItems(actions));\n    }\n  };\n  return [locale, visible, items, actions];\n}\nclass Help extends SvelteComponent {\n  constructor(options) {\n    super();\n    init(this, options, instance$5, create_fragment$5, safe_not_equal, { actions: 3, locale: 0, visible: 1 });\n  }\n}\nfunction create_if_block_1$1(ctx) {\n  let span;\n  let t_value = (\n    /*locale*/\n    ctx[2].limited + \"\"\n  );\n  let t;\n  return {\n    c() {\n      span = element(\"span\");\n      t = text(t_value);\n      attr(span, \"class\", \"bytemd-status-error\");\n    },\n    m(target, anchor) {\n      insert(target, span, anchor);\n      append(span, t);\n    },\n    p(ctx2, dirty) {\n      if (dirty & /*locale*/\n      4 && t_value !== (t_value = /*locale*/\n      ctx2[2].limited + \"\"))\n        set_data(t, t_value);\n    },\n    d(detaching) {\n      if (detaching)\n        detach(span);\n    }\n  };\n}\nfunction create_if_block$2(ctx) {\n  let label;\n  let input;\n  let t_value = (\n    /*locale*/\n    ctx[2].sync + \"\"\n  );\n  let t;\n  let mounted;\n  let dispose;\n  return {\n    c() {\n      label = element(\"label\");\n      input = element(\"input\");\n      t = text(t_value);\n      attr(input, \"type\", \"checkbox\");\n      input.checked = /*syncEnabled*/\n      ctx[1];\n    },\n    m(target, anchor) {\n      insert(target, label, anchor);\n      append(label, input);\n      append(label, t);\n      if (!mounted) {\n        dispose = listen(\n          input,\n          \"change\",\n          /*change_handler*/\n          ctx[8]\n        );\n        mounted = true;\n      }\n    },\n    p(ctx2, dirty) {\n      if (dirty & /*syncEnabled*/\n      2) {\n        input.checked = /*syncEnabled*/\n        ctx2[1];\n      }\n      if (dirty & /*locale*/\n      4 && t_value !== (t_value = /*locale*/\n      ctx2[2].sync + \"\"))\n        set_data(t, t_value);\n    },\n    d(detaching) {\n      if (detaching)\n        detach(label);\n      mounted = false;\n      dispose();\n    }\n  };\n}\nfunction create_fragment$4(ctx) {\n  let div2;\n  let div0;\n  let span0;\n  let t0_value = (\n    /*locale*/\n    ctx[2].words + \"\"\n  );\n  let t0;\n  let t1;\n  let strong0;\n  let t2;\n  let span1;\n  let t3_value = (\n    /*locale*/\n    ctx[2].lines + \"\"\n  );\n  let t3;\n  let t4;\n  let strong1;\n  let t5;\n  let div1;\n  let span2;\n  let t6_value = (\n    /*locale*/\n    ctx[2].top + \"\"\n  );\n  let t6;\n  let mounted;\n  let dispose;\n  let if_block0 = (\n    /*islimited*/\n    ctx[3] && create_if_block_1$1(ctx)\n  );\n  let if_block1 = (\n    /*showSync*/\n    ctx[0] && create_if_block$2(ctx)\n  );\n  return {\n    c() {\n      div2 = element(\"div\");\n      div0 = element(\"div\");\n      span0 = element(\"span\");\n      t0 = text(t0_value);\n      t1 = text(\": \");\n      strong0 = element(\"strong\");\n      t2 = text(\n        /*words*/\n        ctx[5]\n      );\n      span1 = element(\"span\");\n      t3 = text(t3_value);\n      t4 = text(\": \");\n      strong1 = element(\"strong\");\n      t5 = text(\n        /*lines*/\n        ctx[4]\n      );\n      if (if_block0)\n        if_block0.c();\n      div1 = element(\"div\");\n      if (if_block1)\n        if_block1.c();\n      span2 = element(\"span\");\n      t6 = text(t6_value);\n      attr(div0, \"class\", \"bytemd-status-left\");\n      attr(div1, \"class\", \"bytemd-status-right\");\n      attr(div2, \"class\", \"bytemd-status\");\n    },\n    m(target, anchor) {\n      insert(target, div2, anchor);\n      append(div2, div0);\n      append(div0, span0);\n      append(span0, t0);\n      append(span0, t1);\n      append(span0, strong0);\n      append(strong0, t2);\n      append(div0, span1);\n      append(span1, t3);\n      append(span1, t4);\n      append(span1, strong1);\n      append(strong1, t5);\n      if (if_block0)\n        if_block0.m(div0, null);\n      append(div2, div1);\n      if (if_block1)\n        if_block1.m(div1, null);\n      append(div1, span2);\n      append(span2, t6);\n      if (!mounted) {\n        dispose = [\n          listen(\n            span2,\n            \"click\",\n            /*click_handler*/\n            ctx[9]\n          ),\n          listen(span2, \"keydown\", self(\n            /*keydown_handler*/\n            ctx[10]\n          ))\n        ];\n        mounted = true;\n      }\n    },\n    p(ctx2, [dirty]) {\n      if (dirty & /*locale*/\n      4 && t0_value !== (t0_value = /*locale*/\n      ctx2[2].words + \"\"))\n        set_data(t0, t0_value);\n      if (dirty & /*words*/\n      32)\n        set_data(\n          t2,\n          /*words*/\n          ctx2[5]\n        );\n      if (dirty & /*locale*/\n      4 && t3_value !== (t3_value = /*locale*/\n      ctx2[2].lines + \"\"))\n        set_data(t3, t3_value);\n      if (dirty & /*lines*/\n      16)\n        set_data(\n          t5,\n          /*lines*/\n          ctx2[4]\n        );\n      if (\n        /*islimited*/\n        ctx2[3]\n      ) {\n        if (if_block0) {\n          if_block0.p(ctx2, dirty);\n        } else {\n          if_block0 = create_if_block_1$1(ctx2);\n          if_block0.c();\n          if_block0.m(div0, null);\n        }\n      } else if (if_block0) {\n        if_block0.d(1);\n        if_block0 = null;\n      }\n      if (\n        /*showSync*/\n        ctx2[0]\n      ) {\n        if (if_block1) {\n          if_block1.p(ctx2, dirty);\n        } else {\n          if_block1 = create_if_block$2(ctx2);\n          if_block1.c();\n          if_block1.m(div1, span2);\n        }\n      } else if (if_block1) {\n        if_block1.d(1);\n        if_block1 = null;\n      }\n      if (dirty & /*locale*/\n      4 && t6_value !== (t6_value = /*locale*/\n      ctx2[2].top + \"\"))\n        set_data(t6, t6_value);\n    },\n    i: noop,\n    o: noop,\n    d(detaching) {\n      if (detaching)\n        detach(div2);\n      if (if_block0)\n        if_block0.d();\n      if (if_block1)\n        if_block1.d();\n      mounted = false;\n      run_all(dispose);\n    }\n  };\n}\nfunction instance$4($$self, $$props, $$invalidate) {\n  let words2;\n  let lines2;\n  let { showSync } = $$props;\n  let { value } = $$props;\n  let { syncEnabled } = $$props;\n  let { locale } = $$props;\n  let { islimited } = $$props;\n  const dispatch = createEventDispatcher();\n  const change_handler = () => dispatch(\"sync\", !syncEnabled);\n  const click_handler = () => dispatch(\"top\");\n  const keydown_handler = (e) => [\"Enter\", \"Space\"].includes(e.code) && dispatch(\"top\");\n  $$self.$$set = ($$props2) => {\n    if (\"showSync\" in $$props2)\n      $$invalidate(0, showSync = $$props2.showSync);\n    if (\"value\" in $$props2)\n      $$invalidate(7, value = $$props2.value);\n    if (\"syncEnabled\" in $$props2)\n      $$invalidate(1, syncEnabled = $$props2.syncEnabled);\n    if (\"locale\" in $$props2)\n      $$invalidate(2, locale = $$props2.locale);\n    if (\"islimited\" in $$props2)\n      $$invalidate(3, islimited = $$props2.islimited);\n  };\n  $$self.$$.update = () => {\n    if ($$self.$$.dirty & /*value*/\n    128) {\n      $$invalidate(5, words2 = word_count__WEBPACK_IMPORTED_MODULE_10__(value));\n    }\n    if ($$self.$$.dirty & /*value*/\n    128) {\n      $$invalidate(4, lines2 = value.split(\"\\n\").length);\n    }\n  };\n  return [\n    showSync,\n    syncEnabled,\n    locale,\n    islimited,\n    lines2,\n    words2,\n    dispatch,\n    value,\n    change_handler,\n    click_handler,\n    keydown_handler\n  ];\n}\nclass Status extends SvelteComponent {\n  constructor(options) {\n    super();\n    init(this, options, instance$4, create_fragment$4, safe_not_equal, {\n      showSync: 0,\n      value: 7,\n      syncEnabled: 1,\n      locale: 2,\n      islimited: 3\n    });\n  }\n}\nfunction get_each_context$1(ctx, list, i) {\n  const child_ctx = ctx.slice();\n  child_ctx[11] = list[i];\n  child_ctx[13] = i;\n  return child_ctx;\n}\nfunction create_each_block$1(ctx) {\n  let li;\n  let t_value = (\n    /*item*/\n    ctx[11].text + \"\"\n  );\n  let t;\n  let li_class_value;\n  let li_style_value;\n  let mounted;\n  let dispose;\n  function click_handler() {\n    return (\n      /*click_handler*/\n      ctx[8](\n        /*index*/\n        ctx[13]\n      )\n    );\n  }\n  function keydown_handler(...args) {\n    return (\n      /*keydown_handler*/\n      ctx[9](\n        /*index*/\n        ctx[13],\n        ...args\n      )\n    );\n  }\n  return {\n    c() {\n      li = element(\"li\");\n      t = text(t_value);\n      attr(li, \"class\", li_class_value = `bytemd-toc-${/*item*/\n      ctx[11].level}`);\n      attr(li, \"style\", li_style_value = `padding-left:${/*item*/\n      (ctx[11].level - /*minLevel*/\n      ctx[3]) * 16 + 8}px`);\n      toggle_class(\n        li,\n        \"bytemd-toc-active\",\n        /*currentHeadingIndex*/\n        ctx[4] === /*index*/\n        ctx[13]\n      );\n      toggle_class(\n        li,\n        \"bytemd-toc-first\",\n        /*item*/\n        ctx[11].level === /*minLevel*/\n        ctx[3]\n      );\n    },\n    m(target, anchor) {\n      insert(target, li, anchor);\n      append(li, t);\n      if (!mounted) {\n        dispose = [\n          listen(li, \"click\", click_handler),\n          listen(li, \"keydown\", self(keydown_handler))\n        ];\n        mounted = true;\n      }\n    },\n    p(new_ctx, dirty) {\n      ctx = new_ctx;\n      if (dirty & /*items*/\n      4 && t_value !== (t_value = /*item*/\n      ctx[11].text + \"\"))\n        set_data(t, t_value);\n      if (dirty & /*items*/\n      4 && li_class_value !== (li_class_value = `bytemd-toc-${/*item*/\n      ctx[11].level}`)) {\n        attr(li, \"class\", li_class_value);\n      }\n      if (dirty & /*items, minLevel*/\n      12 && li_style_value !== (li_style_value = `padding-left:${/*item*/\n      (ctx[11].level - /*minLevel*/\n      ctx[3]) * 16 + 8}px`)) {\n        attr(li, \"style\", li_style_value);\n      }\n      if (dirty & /*items, currentHeadingIndex*/\n      20) {\n        toggle_class(\n          li,\n          \"bytemd-toc-active\",\n          /*currentHeadingIndex*/\n          ctx[4] === /*index*/\n          ctx[13]\n        );\n      }\n      if (dirty & /*items, items, minLevel*/\n      12) {\n        toggle_class(\n          li,\n          \"bytemd-toc-first\",\n          /*item*/\n          ctx[11].level === /*minLevel*/\n          ctx[3]\n        );\n      }\n    },\n    d(detaching) {\n      if (detaching)\n        detach(li);\n      mounted = false;\n      run_all(dispose);\n    }\n  };\n}\nfunction create_fragment$3(ctx) {\n  let div;\n  let h22;\n  let t_value = (\n    /*locale*/\n    ctx[0].toc + \"\"\n  );\n  let t;\n  let ul2;\n  let each_value = (\n    /*items*/\n    ctx[2]\n  );\n  let each_blocks = [];\n  for (let i = 0; i < each_value.length; i += 1) {\n    each_blocks[i] = create_each_block$1(get_each_context$1(ctx, each_value, i));\n  }\n  return {\n    c() {\n      div = element(\"div\");\n      h22 = element(\"h2\");\n      t = text(t_value);\n      ul2 = element(\"ul\");\n      for (let i = 0; i < each_blocks.length; i += 1) {\n        each_blocks[i].c();\n      }\n      attr(div, \"class\", \"bytemd-toc\");\n      toggle_class(div, \"bytemd-hidden\", !/*visible*/\n      ctx[1]);\n    },\n    m(target, anchor) {\n      insert(target, div, anchor);\n      append(div, h22);\n      append(h22, t);\n      append(div, ul2);\n      for (let i = 0; i < each_blocks.length; i += 1) {\n        if (each_blocks[i]) {\n          each_blocks[i].m(ul2, null);\n        }\n      }\n    },\n    p(ctx2, [dirty]) {\n      if (dirty & /*locale*/\n      1 && t_value !== (t_value = /*locale*/\n      ctx2[0].toc + \"\"))\n        set_data(t, t_value);\n      if (dirty & /*items, minLevel, currentHeadingIndex, dispatch*/\n      60) {\n        each_value = /*items*/\n        ctx2[2];\n        let i;\n        for (i = 0; i < each_value.length; i += 1) {\n          const child_ctx = get_each_context$1(ctx2, each_value, i);\n          if (each_blocks[i]) {\n            each_blocks[i].p(child_ctx, dirty);\n          } else {\n            each_blocks[i] = create_each_block$1(child_ctx);\n            each_blocks[i].c();\n            each_blocks[i].m(ul2, null);\n          }\n        }\n        for (; i < each_blocks.length; i += 1) {\n          each_blocks[i].d(1);\n        }\n        each_blocks.length = each_value.length;\n      }\n      if (dirty & /*visible*/\n      2) {\n        toggle_class(div, \"bytemd-hidden\", !/*visible*/\n        ctx2[1]);\n      }\n    },\n    i: noop,\n    o: noop,\n    d(detaching) {\n      if (detaching)\n        detach(div);\n      destroy_each(each_blocks, detaching);\n    }\n  };\n}\nfunction instance$3($$self, $$props, $$invalidate) {\n  let { hast } = $$props;\n  let { currentBlockIndex } = $$props;\n  let { locale } = $$props;\n  let { visible } = $$props;\n  const dispatch = createEventDispatcher();\n  let items;\n  let minLevel = 6;\n  let currentHeadingIndex = 0;\n  function stringifyHeading(e) {\n    let result = \"\";\n    (0,unist_util_visit__WEBPACK_IMPORTED_MODULE_11__.visit)(e, (node) => {\n      if (node.type === \"text\") {\n        result += node.value;\n      }\n    });\n    return result;\n  }\n  const click_handler = (index2) => {\n    dispatch(\"click\", index2);\n  };\n  const keydown_handler = (index2, e) => {\n    if ([\"Enter\", \"Space\"].includes(e.code)) {\n      dispatch(\"click\", index2);\n    }\n  };\n  $$self.$$set = ($$props2) => {\n    if (\"hast\" in $$props2)\n      $$invalidate(6, hast = $$props2.hast);\n    if (\"currentBlockIndex\" in $$props2)\n      $$invalidate(7, currentBlockIndex = $$props2.currentBlockIndex);\n    if (\"locale\" in $$props2)\n      $$invalidate(0, locale = $$props2.locale);\n    if (\"visible\" in $$props2)\n      $$invalidate(1, visible = $$props2.visible);\n  };\n  $$self.$$.update = () => {\n    if ($$self.$$.dirty & /*hast, minLevel, items, currentBlockIndex*/\n    204) {\n      (() => {\n        $$invalidate(2, items = []);\n        $$invalidate(4, currentHeadingIndex = 0);\n        hast.children.filter((v) => v.type === \"element\").forEach((node, index2) => {\n          if (node.tagName[0] === \"h\" && !!node.children.length) {\n            const i = Number(node.tagName[1]);\n            $$invalidate(3, minLevel = Math.min(minLevel, i));\n            items.push({ level: i, text: stringifyHeading(node) });\n          }\n          if (currentBlockIndex >= index2) {\n            $$invalidate(4, currentHeadingIndex = items.length - 1);\n          }\n        });\n      })();\n    }\n  };\n  return [\n    locale,\n    visible,\n    items,\n    minLevel,\n    currentHeadingIndex,\n    dispatch,\n    hast,\n    currentBlockIndex,\n    click_handler,\n    keydown_handler\n  ];\n}\nclass Toc extends SvelteComponent {\n  constructor(options) {\n    super();\n    init(this, options, instance$3, create_fragment$3, not_equal, {\n      hast: 6,\n      currentBlockIndex: 7,\n      locale: 0,\n      visible: 1\n    });\n  }\n}\nfunction get_each_context(ctx, list, i) {\n  const child_ctx = ctx.slice();\n  child_ctx[25] = list[i];\n  child_ctx[27] = i;\n  return child_ctx;\n}\nfunction get_each_context_1(ctx, list, i) {\n  const child_ctx = ctx.slice();\n  child_ctx[25] = list[i];\n  child_ctx[27] = i;\n  return child_ctx;\n}\nfunction create_else_block(ctx) {\n  let div0;\n  let t0_value = (\n    /*locale*/\n    ctx[2].write + \"\"\n  );\n  let t0;\n  let div1;\n  let t1_value = (\n    /*locale*/\n    ctx[2].preview + \"\"\n  );\n  let t1;\n  let mounted;\n  let dispose;\n  return {\n    c() {\n      div0 = element(\"div\");\n      t0 = text(t0_value);\n      div1 = element(\"div\");\n      t1 = text(t1_value);\n      attr(div0, \"class\", \"bytemd-toolbar-tab\");\n      toggle_class(\n        div0,\n        \"bytemd-toolbar-tab-active\",\n        /*activeTab*/\n        ctx[1] !== \"preview\"\n      );\n      attr(div1, \"class\", \"bytemd-toolbar-tab\");\n      toggle_class(\n        div1,\n        \"bytemd-toolbar-tab-active\",\n        /*activeTab*/\n        ctx[1] === \"preview\"\n      );\n    },\n    m(target, anchor) {\n      insert(target, div0, anchor);\n      append(div0, t0);\n      insert(target, div1, anchor);\n      append(div1, t1);\n      if (!mounted) {\n        dispose = [\n          listen(\n            div0,\n            \"click\",\n            /*click_handler*/\n            ctx[16]\n          ),\n          listen(div0, \"keydown\", self(\n            /*keydown_handler*/\n            ctx[17]\n          )),\n          listen(\n            div1,\n            \"click\",\n            /*click_handler_1*/\n            ctx[18]\n          ),\n          listen(div1, \"keydown\", self(\n            /*keydown_handler_1*/\n            ctx[19]\n          ))\n        ];\n        mounted = true;\n      }\n    },\n    p(ctx2, dirty) {\n      if (dirty & /*locale*/\n      4 && t0_value !== (t0_value = /*locale*/\n      ctx2[2].write + \"\"))\n        set_data(t0, t0_value);\n      if (dirty & /*activeTab*/\n      2) {\n        toggle_class(\n          div0,\n          \"bytemd-toolbar-tab-active\",\n          /*activeTab*/\n          ctx2[1] !== \"preview\"\n        );\n      }\n      if (dirty & /*locale*/\n      4 && t1_value !== (t1_value = /*locale*/\n      ctx2[2].preview + \"\"))\n        set_data(t1, t1_value);\n      if (dirty & /*activeTab*/\n      2) {\n        toggle_class(\n          div1,\n          \"bytemd-toolbar-tab-active\",\n          /*activeTab*/\n          ctx2[1] === \"preview\"\n        );\n      }\n    },\n    d(detaching) {\n      if (detaching)\n        detach(div0);\n      if (detaching)\n        detach(div1);\n      mounted = false;\n      run_all(dispose);\n    }\n  };\n}\nfunction create_if_block_1(ctx) {\n  let each_1_anchor;\n  let each_value_1 = (\n    /*actions*/\n    ctx[3]\n  );\n  let each_blocks = [];\n  for (let i = 0; i < each_value_1.length; i += 1) {\n    each_blocks[i] = create_each_block_1(get_each_context_1(ctx, each_value_1, i));\n  }\n  return {\n    c() {\n      for (let i = 0; i < each_blocks.length; i += 1) {\n        each_blocks[i].c();\n      }\n      each_1_anchor = empty();\n    },\n    m(target, anchor) {\n      for (let i = 0; i < each_blocks.length; i += 1) {\n        if (each_blocks[i]) {\n          each_blocks[i].m(target, anchor);\n        }\n      }\n      insert(target, each_1_anchor, anchor);\n    },\n    p(ctx2, dirty) {\n      if (dirty & /*tippyClass, actions*/\n      8) {\n        each_value_1 = /*actions*/\n        ctx2[3];\n        let i;\n        for (i = 0; i < each_value_1.length; i += 1) {\n          const child_ctx = get_each_context_1(ctx2, each_value_1, i);\n          if (each_blocks[i]) {\n            each_blocks[i].p(child_ctx, dirty);\n          } else {\n            each_blocks[i] = create_each_block_1(child_ctx);\n            each_blocks[i].c();\n            each_blocks[i].m(each_1_anchor.parentNode, each_1_anchor);\n          }\n        }\n        for (; i < each_blocks.length; i += 1) {\n          each_blocks[i].d(1);\n        }\n        each_blocks.length = each_value_1.length;\n      }\n    },\n    d(detaching) {\n      destroy_each(each_blocks, detaching);\n      if (detaching)\n        detach(each_1_anchor);\n    }\n  };\n}\nfunction create_if_block_2(ctx) {\n  let div;\n  let raw_value = (\n    /*item*/\n    ctx[25].icon + \"\"\n  );\n  return {\n    c() {\n      div = element(\"div\");\n      attr(div, \"class\", [\"bytemd-toolbar-icon\", tippyClass].join(\" \"));\n      attr(\n        div,\n        \"bytemd-tippy-path\",\n        /*index*/\n        ctx[27]\n      );\n    },\n    m(target, anchor) {\n      insert(target, div, anchor);\n      div.innerHTML = raw_value;\n    },\n    p(ctx2, dirty) {\n      if (dirty & /*actions*/\n      8 && raw_value !== (raw_value = /*item*/\n      ctx2[25].icon + \"\"))\n        div.innerHTML = raw_value;\n    },\n    d(detaching) {\n      if (detaching)\n        detach(div);\n    }\n  };\n}\nfunction create_each_block_1(ctx) {\n  let if_block_anchor;\n  let if_block = (\n    /*item*/\n    ctx[25].handler && create_if_block_2(ctx)\n  );\n  return {\n    c() {\n      if (if_block)\n        if_block.c();\n      if_block_anchor = empty();\n    },\n    m(target, anchor) {\n      if (if_block)\n        if_block.m(target, anchor);\n      insert(target, if_block_anchor, anchor);\n    },\n    p(ctx2, dirty) {\n      if (\n        /*item*/\n        ctx2[25].handler\n      ) {\n        if (if_block) {\n          if_block.p(ctx2, dirty);\n        } else {\n          if_block = create_if_block_2(ctx2);\n          if_block.c();\n          if_block.m(if_block_anchor.parentNode, if_block_anchor);\n        }\n      } else if (if_block) {\n        if_block.d(1);\n        if_block = null;\n      }\n    },\n    d(detaching) {\n      if (if_block)\n        if_block.d(detaching);\n      if (detaching)\n        detach(if_block_anchor);\n    }\n  };\n}\nfunction create_if_block$1(ctx) {\n  let div;\n  let raw_value = (\n    /*item*/\n    ctx[25].icon + \"\"\n  );\n  return {\n    c() {\n      div = element(\"div\");\n      attr(div, \"class\", [\"bytemd-toolbar-icon\", tippyClass, tippyClassRight].join(\" \"));\n      attr(\n        div,\n        \"bytemd-tippy-path\",\n        /*index*/\n        ctx[27]\n      );\n      toggle_class(\n        div,\n        \"bytemd-toolbar-icon-active\",\n        /*item*/\n        ctx[25].active\n      );\n    },\n    m(target, anchor) {\n      insert(target, div, anchor);\n      div.innerHTML = raw_value;\n    },\n    p(ctx2, dirty) {\n      if (dirty & /*rightActions*/\n      32 && raw_value !== (raw_value = /*item*/\n      ctx2[25].icon + \"\"))\n        div.innerHTML = raw_value;\n      if (dirty & /*rightActions*/\n      32) {\n        toggle_class(\n          div,\n          \"bytemd-toolbar-icon-active\",\n          /*item*/\n          ctx2[25].active\n        );\n      }\n    },\n    d(detaching) {\n      if (detaching)\n        detach(div);\n    }\n  };\n}\nfunction create_each_block(ctx) {\n  let if_block_anchor;\n  let if_block = !/*item*/\n  ctx[25].hidden && create_if_block$1(ctx);\n  return {\n    c() {\n      if (if_block)\n        if_block.c();\n      if_block_anchor = empty();\n    },\n    m(target, anchor) {\n      if (if_block)\n        if_block.m(target, anchor);\n      insert(target, if_block_anchor, anchor);\n    },\n    p(ctx2, dirty) {\n      if (!/*item*/\n      ctx2[25].hidden) {\n        if (if_block) {\n          if_block.p(ctx2, dirty);\n        } else {\n          if_block = create_if_block$1(ctx2);\n          if_block.c();\n          if_block.m(if_block_anchor.parentNode, if_block_anchor);\n        }\n      } else if (if_block) {\n        if_block.d(1);\n        if_block = null;\n      }\n    },\n    d(detaching) {\n      if (if_block)\n        if_block.d(detaching);\n      if (detaching)\n        detach(if_block_anchor);\n    }\n  };\n}\nfunction create_fragment$2(ctx) {\n  let div2;\n  let div0;\n  let div1;\n  let mounted;\n  let dispose;\n  function select_block_type(ctx2, dirty) {\n    if (\n      /*split*/\n      ctx2[0]\n    )\n      return create_if_block_1;\n    return create_else_block;\n  }\n  let current_block_type = select_block_type(ctx);\n  let if_block = current_block_type(ctx);\n  let each_value = (\n    /*rightActions*/\n    ctx[5]\n  );\n  let each_blocks = [];\n  for (let i = 0; i < each_value.length; i += 1) {\n    each_blocks[i] = create_each_block(get_each_context(ctx, each_value, i));\n  }\n  return {\n    c() {\n      div2 = element(\"div\");\n      div0 = element(\"div\");\n      if_block.c();\n      div1 = element(\"div\");\n      for (let i = 0; i < each_blocks.length; i += 1) {\n        each_blocks[i].c();\n      }\n      attr(div0, \"class\", \"bytemd-toolbar-left\");\n      attr(div1, \"class\", \"bytemd-toolbar-right\");\n      attr(div2, \"class\", \"bytemd-toolbar\");\n    },\n    m(target, anchor) {\n      insert(target, div2, anchor);\n      append(div2, div0);\n      if_block.m(div0, null);\n      append(div2, div1);\n      for (let i = 0; i < each_blocks.length; i += 1) {\n        if (each_blocks[i]) {\n          each_blocks[i].m(div1, null);\n        }\n      }\n      ctx[20](div2);\n      if (!mounted) {\n        dispose = [\n          listen(\n            div2,\n            \"click\",\n            /*handleClick*/\n            ctx[7]\n          ),\n          listen(div2, \"keydown\", self(\n            /*keydown_handler_2*/\n            ctx[21]\n          ))\n        ];\n        mounted = true;\n      }\n    },\n    p(ctx2, [dirty]) {\n      if (current_block_type === (current_block_type = select_block_type(ctx2)) && if_block) {\n        if_block.p(ctx2, dirty);\n      } else {\n        if_block.d(1);\n        if_block = current_block_type(ctx2);\n        if (if_block) {\n          if_block.c();\n          if_block.m(div0, null);\n        }\n      }\n      if (dirty & /*tippyClass, tippyClassRight, rightActions*/\n      32) {\n        each_value = /*rightActions*/\n        ctx2[5];\n        let i;\n        for (i = 0; i < each_value.length; i += 1) {\n          const child_ctx = get_each_context(ctx2, each_value, i);\n          if (each_blocks[i]) {\n            each_blocks[i].p(child_ctx, dirty);\n          } else {\n            each_blocks[i] = create_each_block(child_ctx);\n            each_blocks[i].c();\n            each_blocks[i].m(div1, null);\n          }\n        }\n        for (; i < each_blocks.length; i += 1) {\n          each_blocks[i].d(1);\n        }\n        each_blocks.length = each_value.length;\n      }\n    },\n    i: noop,\n    o: noop,\n    d(detaching) {\n      if (detaching)\n        detach(div2);\n      if_block.d();\n      destroy_each(each_blocks, detaching);\n      ctx[20](null);\n      mounted = false;\n      run_all(dispose);\n    }\n  };\n}\nconst tippyClass = \"bytemd-tippy\";\nconst tippyClassRight = \"bytemd-tippy-right\";\nconst tippyPathKey = \"bytemd-tippy-path\";\nfunction instance$2($$self, $$props, $$invalidate) {\n  let tocActive;\n  let helpActive;\n  let writeActive;\n  let previewActive;\n  let rightActions;\n  const dispatch = createEventDispatcher();\n  let toolbar;\n  let { context } = $$props;\n  let { split } = $$props;\n  let { activeTab } = $$props;\n  let { fullscreen: fullscreen2 } = $$props;\n  let { sidebar } = $$props;\n  let { locale } = $$props;\n  let { actions } = $$props;\n  let { rightAfferentActions } = $$props;\n  function getPayloadFromElement(e) {\n    var _a, _b;\n    const paths = (_b = (_a = e.getAttribute(tippyPathKey)) == null ? void 0 : _a.split(\"-\")) == null ? void 0 : _b.map((x) => parseInt(x, 10));\n    if (!paths)\n      return;\n    let item = {\n      title: \"\",\n      handler: {\n        type: \"dropdown\",\n        actions: e.classList.contains(tippyClassRight) ? rightActions : actions\n      }\n    };\n    paths == null ? void 0 : paths.forEach((index2) => {\n      var _a2;\n      if (((_a2 = item.handler) == null ? void 0 : _a2.type) === \"dropdown\") {\n        item = item.handler.actions[index2];\n      }\n    });\n    return { paths, item };\n  }\n  let delegateInstance;\n  function init2() {\n    delegateInstance = (0,tippy_js__WEBPACK_IMPORTED_MODULE_12__.delegate)(toolbar, {\n      target: `.${tippyClass}`,\n      onCreate({ setProps, reference }) {\n        const payload = getPayloadFromElement(reference);\n        if (!payload)\n          return;\n        const { item, paths } = payload;\n        const { handler } = item;\n        if (!handler)\n          return;\n        if (handler.type === \"action\") {\n          setProps({\n            content: item.title,\n            onHidden(ins) {\n              ins.destroy();\n            }\n          });\n        } else if (handler.type === \"dropdown\") {\n          const dropdown = document.createElement(\"div\");\n          dropdown.classList.add(\"bytemd-dropdown\");\n          if (item.title) {\n            const dropdownTitle = document.createElement(\"div\");\n            dropdownTitle.classList.add(\"bytemd-dropdown-title\");\n            dropdownTitle.appendChild(document.createTextNode(item.title));\n            dropdown.appendChild(dropdownTitle);\n          }\n          handler.actions.forEach((subAction, i) => {\n            var _a;\n            const dropdownItem = document.createElement(\"div\");\n            dropdownItem.classList.add(\"bytemd-dropdown-item\");\n            dropdownItem.setAttribute(tippyPathKey, [...paths, i].join(\"-\"));\n            if (((_a = subAction.handler) == null ? void 0 : _a.type) === \"dropdown\") {\n              dropdownItem.classList.add(tippyClass);\n            }\n            if (reference.classList.contains(tippyClassRight)) {\n              dropdownItem.classList.add(tippyClassRight);\n            }\n            dropdownItem.innerHTML = `${subAction.icon ? `<div class=\"bytemd-dropdown-item-icon\">${subAction.icon}</div>` : \"\"}<div class=\"bytemd-dropdown-item-title\">${subAction.title}</div>`;\n            dropdown.appendChild(dropdownItem);\n          });\n          setProps({\n            allowHTML: true,\n            showOnCreate: true,\n            theme: \"light-border\",\n            placement: \"bottom-start\",\n            interactive: true,\n            interactiveDebounce: 50,\n            arrow: false,\n            offset: [0, 4],\n            content: dropdown.outerHTML,\n            onHidden(ins) {\n              ins.destroy();\n            },\n            onCreate(ins) {\n              [...ins.popper.querySelectorAll(\".bytemd-dropdown-item\")].forEach((el, i) => {\n                var _a;\n                const actionHandler = (_a = handler.actions[i]) == null ? void 0 : _a.handler;\n                if ((actionHandler == null ? void 0 : actionHandler.type) === \"action\") {\n                  const { mouseenter, mouseleave } = actionHandler;\n                  if (mouseenter) {\n                    el.addEventListener(\"mouseenter\", () => {\n                      mouseenter(context);\n                    });\n                  }\n                  if (mouseleave) {\n                    el.addEventListener(\"mouseleave\", () => {\n                      mouseleave(context);\n                    });\n                  }\n                }\n              });\n            }\n          });\n        }\n      }\n    });\n  }\n  onMount(() => {\n    init2();\n  });\n  function handleClick(e) {\n    var _a, _b;\n    const target = e.target.closest(`[${tippyPathKey}]`);\n    if (!target)\n      return;\n    const handler = (_b = (_a = getPayloadFromElement(target)) == null ? void 0 : _a.item) == null ? void 0 : _b.handler;\n    if ((handler == null ? void 0 : handler.type) === \"action\") {\n      handler.click(context);\n    }\n    delegateInstance == null ? void 0 : delegateInstance.destroy();\n    init2();\n  }\n  const click_handler = () => dispatch(\"tab\", \"write\");\n  const keydown_handler = (e) => [\"Enter\", \"Space\"].includes(e.code) && dispatch(\"tab\", \"write\");\n  const click_handler_1 = () => dispatch(\"tab\", \"preview\");\n  const keydown_handler_1 = (e) => [\"Enter\", \"Space\"].includes(e.code) && dispatch(\"tab\", \"preview\");\n  function div2_binding($$value) {\n    binding_callbacks[$$value ? \"unshift\" : \"push\"](() => {\n      toolbar = $$value;\n      $$invalidate(4, toolbar);\n    });\n  }\n  const keydown_handler_2 = (e) => [\"Enter\", \"Space\"].includes(e.code) && handleClick(e);\n  $$self.$$set = ($$props2) => {\n    if (\"context\" in $$props2)\n      $$invalidate(8, context = $$props2.context);\n    if (\"split\" in $$props2)\n      $$invalidate(0, split = $$props2.split);\n    if (\"activeTab\" in $$props2)\n      $$invalidate(1, activeTab = $$props2.activeTab);\n    if (\"fullscreen\" in $$props2)\n      $$invalidate(9, fullscreen2 = $$props2.fullscreen);\n    if (\"sidebar\" in $$props2)\n      $$invalidate(10, sidebar = $$props2.sidebar);\n    if (\"locale\" in $$props2)\n      $$invalidate(2, locale = $$props2.locale);\n    if (\"actions\" in $$props2)\n      $$invalidate(3, actions = $$props2.actions);\n    if (\"rightAfferentActions\" in $$props2)\n      $$invalidate(11, rightAfferentActions = $$props2.rightAfferentActions);\n  };\n  $$self.$$.update = () => {\n    if ($$self.$$.dirty & /*sidebar*/\n    1024) {\n      $$invalidate(15, tocActive = sidebar === \"toc\");\n    }\n    if ($$self.$$.dirty & /*sidebar*/\n    1024) {\n      $$invalidate(14, helpActive = sidebar === \"help\");\n    }\n    if ($$self.$$.dirty & /*activeTab*/\n    2) {\n      $$invalidate(13, writeActive = activeTab === \"write\");\n    }\n    if ($$self.$$.dirty & /*activeTab*/\n    2) {\n      $$invalidate(12, previewActive = activeTab === \"preview\");\n    }\n    if ($$self.$$.dirty & /*tocActive, locale, helpActive, writeActive, split, previewActive, fullscreen, rightAfferentActions*/\n    64005) {\n      $$invalidate(5, rightActions = [\n        {\n          title: tocActive ? locale.closeToc : locale.toc,\n          icon: icons.AlignTextLeftOne,\n          handler: {\n            type: \"action\",\n            click() {\n              dispatch(\"click\", \"toc\");\n            }\n          },\n          active: tocActive\n        },\n        {\n          title: helpActive ? locale.closeHelp : locale.help,\n          icon: icons.Helpcenter,\n          handler: {\n            type: \"action\",\n            click() {\n              dispatch(\"click\", \"help\");\n            }\n          },\n          active: helpActive\n        },\n        {\n          title: writeActive ? locale.exitWriteOnly : locale.writeOnly,\n          icon: icons.LeftExpand,\n          handler: {\n            type: \"action\",\n            click() {\n              dispatch(\"tab\", \"write\");\n            }\n          },\n          active: writeActive,\n          hidden: !split\n        },\n        {\n          title: previewActive ? locale.exitPreviewOnly : locale.previewOnly,\n          icon: icons.RightExpand,\n          handler: {\n            type: \"action\",\n            click() {\n              dispatch(\"tab\", \"preview\");\n            }\n          },\n          active: previewActive,\n          hidden: !split\n        },\n        {\n          title: fullscreen2 ? locale.exitFullscreen : locale.fullscreen,\n          icon: fullscreen2 ? icons.OffScreen : icons.FullScreen,\n          handler: {\n            type: \"action\",\n            click() {\n              dispatch(\"click\", \"fullscreen\");\n            }\n          }\n        },\n        {\n          title: locale.source,\n          icon: icons.GithubOne,\n          handler: {\n            type: \"action\",\n            click() {\n              window.open(\"https://github.com/bytedance/bytemd\");\n            }\n          }\n        },\n        ...rightAfferentActions\n      ]);\n    }\n  };\n  return [\n    split,\n    activeTab,\n    locale,\n    actions,\n    toolbar,\n    rightActions,\n    dispatch,\n    handleClick,\n    context,\n    fullscreen2,\n    sidebar,\n    rightAfferentActions,\n    previewActive,\n    writeActive,\n    helpActive,\n    tocActive,\n    click_handler,\n    keydown_handler,\n    click_handler_1,\n    keydown_handler_1,\n    div2_binding,\n    keydown_handler_2\n  ];\n}\nclass Toolbar extends SvelteComponent {\n  constructor(options) {\n    super();\n    init(this, options, instance$2, create_fragment$2, not_equal, {\n      context: 8,\n      split: 0,\n      activeTab: 1,\n      fullscreen: 9,\n      sidebar: 10,\n      locale: 2,\n      actions: 3,\n      rightAfferentActions: 11\n    });\n  }\n}\nconst schemaStr = JSON.stringify(hast_util_sanitize__WEBPACK_IMPORTED_MODULE_13__.defaultSchema);\nfunction getProcessor({\n  sanitize,\n  plugins,\n  remarkRehype: remarkRehypeOptions = {}\n}) {\n  let processor = (0,unified__WEBPACK_IMPORTED_MODULE_14__.unified)().use(remark_parse__WEBPACK_IMPORTED_MODULE_15__[\"default\"]);\n  plugins == null ? void 0 : plugins.forEach(({ remark }) => {\n    if (remark)\n      processor = remark(processor);\n  });\n  processor = processor.use(remark_rehype__WEBPACK_IMPORTED_MODULE_16__[\"default\"], { allowDangerousHtml: true, ...remarkRehypeOptions }).use(rehype_raw__WEBPACK_IMPORTED_MODULE_17__[\"default\"]);\n  let schema = JSON.parse(schemaStr);\n  schema.attributes[\"*\"].push(\"className\");\n  if (typeof sanitize === \"function\") {\n    schema = sanitize(schema);\n  }\n  processor = processor.use(rehype_sanitize__WEBPACK_IMPORTED_MODULE_18__[\"default\"], schema);\n  plugins == null ? void 0 : plugins.forEach(({ rehype }) => {\n    if (rehype)\n      processor = rehype(processor);\n  });\n  return processor.use(rehype_stringify__WEBPACK_IMPORTED_MODULE_19__[\"default\"]);\n}\nfunction create_fragment$1(ctx) {\n  let div;\n  return {\n    c() {\n      div = element(\"div\");\n      attr(div, \"class\", \"markdown-body\");\n    },\n    m(target, anchor) {\n      insert(target, div, anchor);\n      div.innerHTML = /*html*/\n      ctx[1];\n      ctx[8](div);\n    },\n    p(ctx2, [dirty]) {\n      if (dirty & /*html*/\n      2)\n        div.innerHTML = /*html*/\n        ctx2[1];\n    },\n    i: noop,\n    o: noop,\n    d(detaching) {\n      if (detaching)\n        detach(div);\n      ctx[8](null);\n    }\n  };\n}\nfunction instance$1($$self, $$props, $$invalidate) {\n  let html;\n  const dispatch = createEventDispatcher();\n  let { value = \"\" } = $$props;\n  let { plugins = [] } = $$props;\n  let { sanitize = void 0 } = $$props;\n  let { remarkRehype: remarkRehype2 = void 0 } = $$props;\n  let markdownBody;\n  let cbs = [];\n  function on() {\n    cbs = plugins.map((p) => {\n      var _a;\n      return (_a = p.viewerEffect) == null ? void 0 : _a.call(p, { markdownBody, file });\n    });\n  }\n  function off() {\n    cbs.forEach((cb) => cb == null ? void 0 : cb());\n  }\n  onMount(() => {\n    markdownBody.addEventListener(\"click\", (e) => {\n      var _a;\n      const $ = e.target;\n      if ($.tagName !== \"A\")\n        return;\n      const href = $.getAttribute(\"href\");\n      if (!(href == null ? void 0 : href.startsWith(\"#\")))\n        return;\n      (_a = markdownBody.querySelector(\"#user-content-\" + href.slice(1))) == null ? void 0 : _a.scrollIntoView();\n    });\n  });\n  onDestroy(off);\n  let file;\n  let i = 0;\n  const dispatchPlugin = () => (tree, file2) => {\n    tick().then(() => {\n      dispatch(\"hast\", { hast: tree, file: file2 });\n    });\n  };\n  afterUpdate(() => {\n    off();\n    on();\n  });\n  function div_binding($$value) {\n    binding_callbacks[$$value ? \"unshift\" : \"push\"](() => {\n      markdownBody = $$value;\n      $$invalidate(0, markdownBody);\n    });\n  }\n  $$self.$$set = ($$props2) => {\n    if (\"value\" in $$props2)\n      $$invalidate(2, value = $$props2.value);\n    if (\"plugins\" in $$props2)\n      $$invalidate(3, plugins = $$props2.plugins);\n    if (\"sanitize\" in $$props2)\n      $$invalidate(4, sanitize = $$props2.sanitize);\n    if (\"remarkRehype\" in $$props2)\n      $$invalidate(5, remarkRehype2 = $$props2.remarkRehype);\n  };\n  $$self.$$.update = () => {\n    if ($$self.$$.dirty & /*sanitize, plugins, remarkRehype, value, i*/\n    188) {\n      try {\n        $$invalidate(6, file = getProcessor({\n          sanitize,\n          plugins: [\n            ...plugins,\n            {\n              // remark: (p) =>\n              //   p.use(() => (tree) =>{\n              //     console.log(tree)\n              //   }),\n              rehype: (processor) => processor.use(dispatchPlugin)\n            }\n          ],\n          remarkRehype: remarkRehype2\n        }).processSync(value));\n        $$invalidate(7, i++, i);\n      } catch (err) {\n        console.error(err);\n      }\n    }\n    if ($$self.$$.dirty & /*file, i*/\n    192) {\n      $$invalidate(1, html = `${file}<!--${i}-->`);\n    }\n  };\n  return [\n    markdownBody,\n    html,\n    value,\n    plugins,\n    sanitize,\n    remarkRehype2,\n    file,\n    i,\n    div_binding\n  ];\n}\nclass Viewer extends SvelteComponent {\n  constructor(options) {\n    super();\n    init(this, options, instance$1, create_fragment$1, not_equal, {\n      value: 2,\n      plugins: 3,\n      sanitize: 4,\n      remarkRehype: 5\n    });\n  }\n}\nfunction create_if_block(ctx) {\n  let viewer;\n  let current;\n  viewer = new Viewer({\n    props: {\n      value: (\n        /*debouncedValue*/\n        ctx[16]\n      ),\n      plugins: (\n        /*plugins*/\n        ctx[1]\n      ),\n      sanitize: (\n        /*sanitize*/\n        ctx[2]\n      ),\n      remarkRehype: (\n        /*remarkRehype*/\n        ctx[3]\n      )\n    }\n  });\n  viewer.$on(\n    \"hast\",\n    /*hast_handler*/\n    ctx[35]\n  );\n  return {\n    c() {\n      create_component(viewer.$$.fragment);\n    },\n    m(target, anchor) {\n      mount_component(viewer, target, anchor);\n      current = true;\n    },\n    p(ctx2, dirty) {\n      const viewer_changes = {};\n      if (dirty[0] & /*debouncedValue*/\n      65536)\n        viewer_changes.value = /*debouncedValue*/\n        ctx2[16];\n      if (dirty[0] & /*plugins*/\n      2)\n        viewer_changes.plugins = /*plugins*/\n        ctx2[1];\n      if (dirty[0] & /*sanitize*/\n      4)\n        viewer_changes.sanitize = /*sanitize*/\n        ctx2[2];\n      if (dirty[0] & /*remarkRehype*/\n      8)\n        viewer_changes.remarkRehype = /*remarkRehype*/\n        ctx2[3];\n      viewer.$set(viewer_changes);\n    },\n    i(local) {\n      if (current)\n        return;\n      transition_in(viewer.$$.fragment, local);\n      current = true;\n    },\n    o(local) {\n      transition_out(viewer.$$.fragment, local);\n      current = false;\n    },\n    d(detaching) {\n      destroy_component(viewer, detaching);\n    }\n  };\n}\nfunction create_fragment(ctx) {\n  let div5;\n  let toolbar;\n  let div4;\n  let div0;\n  let div0_style_value;\n  let div1;\n  let div1_style_value;\n  let div3;\n  let div2;\n  let raw_value = icons.Close + \"\";\n  let help2;\n  let toc2;\n  let status;\n  let current;\n  let mounted;\n  let dispose;\n  toolbar = new Toolbar({\n    props: {\n      context: (\n        /*context*/\n        ctx[10]\n      ),\n      split: (\n        /*split*/\n        ctx[11]\n      ),\n      activeTab: (\n        /*activeTab*/\n        ctx[8]\n      ),\n      sidebar: (\n        /*sidebar*/\n        ctx[9]\n      ),\n      fullscreen: (\n        /*fullscreen*/\n        ctx[15]\n      ),\n      rightAfferentActions: (\n        /*actions*/\n        ctx[21].rightActions\n      ),\n      locale: (\n        /*mergedLocale*/\n        ctx[12]\n      ),\n      actions: (\n        /*actions*/\n        ctx[21].leftActions\n      )\n    }\n  });\n  toolbar.$on(\n    \"key\",\n    /*key_handler*/\n    ctx[31]\n  );\n  toolbar.$on(\n    \"tab\",\n    /*tab_handler*/\n    ctx[32]\n  );\n  toolbar.$on(\n    \"click\",\n    /*click_handler*/\n    ctx[33]\n  );\n  let if_block = !/*overridePreview*/\n  ctx[4] && /*split*/\n  (ctx[11] || /*activeTab*/\n  ctx[8] === \"preview\") && create_if_block(ctx);\n  help2 = new Help({\n    props: {\n      locale: (\n        /*mergedLocale*/\n        ctx[12]\n      ),\n      actions: (\n        /*actions*/\n        ctx[21].leftActions\n      ),\n      visible: (\n        /*sidebar*/\n        ctx[9] === \"help\"\n      )\n    }\n  });\n  toc2 = new Toc({\n    props: {\n      hast: (\n        /*hast*/\n        ctx[18]\n      ),\n      locale: (\n        /*mergedLocale*/\n        ctx[12]\n      ),\n      currentBlockIndex: (\n        /*currentBlockIndex*/\n        ctx[20]\n      ),\n      visible: (\n        /*sidebar*/\n        ctx[9] === \"toc\"\n      )\n    }\n  });\n  toc2.$on(\n    \"click\",\n    /*click_handler_2*/\n    ctx[39]\n  );\n  status = new Status({\n    props: {\n      locale: (\n        /*mergedLocale*/\n        ctx[12]\n      ),\n      showSync: !/*overridePreview*/\n      ctx[4] && /*split*/\n      ctx[11],\n      value: (\n        /*debouncedValue*/\n        ctx[16]\n      ),\n      syncEnabled: (\n        /*syncEnabled*/\n        ctx[17]\n      ),\n      islimited: (\n        /*value*/\n        ctx[0].length > /*maxLength*/\n        ctx[5]\n      )\n    }\n  });\n  status.$on(\n    \"sync\",\n    /*sync_handler*/\n    ctx[40]\n  );\n  status.$on(\n    \"top\",\n    /*top_handler*/\n    ctx[41]\n  );\n  return {\n    c() {\n      div5 = element(\"div\");\n      create_component(toolbar.$$.fragment);\n      div4 = element(\"div\");\n      div0 = element(\"div\");\n      div1 = element(\"div\");\n      if (if_block)\n        if_block.c();\n      div3 = element(\"div\");\n      div2 = element(\"div\");\n      create_component(help2.$$.fragment);\n      create_component(toc2.$$.fragment);\n      create_component(status.$$.fragment);\n      attr(div0, \"class\", \"bytemd-editor\");\n      attr(div0, \"style\", div0_style_value = /*styles*/\n      ctx[22].edit);\n      attr(div1, \"class\", \"bytemd-preview\");\n      attr(div1, \"style\", div1_style_value = /*styles*/\n      ctx[22].preview);\n      attr(div2, \"class\", \"bytemd-sidebar-close\");\n      attr(div3, \"class\", \"bytemd-sidebar\");\n      toggle_class(\n        div3,\n        \"bytemd-hidden\",\n        /*sidebar*/\n        ctx[9] === false\n      );\n      attr(div4, \"class\", \"bytemd-body\");\n      attr(div5, \"class\", \"bytemd\");\n      toggle_class(\n        div5,\n        \"bytemd-split\",\n        /*split*/\n        ctx[11] && /*activeTab*/\n        ctx[8] === false\n      );\n      toggle_class(\n        div5,\n        \"bytemd-fullscreen\",\n        /*fullscreen*/\n        ctx[15]\n      );\n    },\n    m(target, anchor) {\n      insert(target, div5, anchor);\n      mount_component(toolbar, div5, null);\n      append(div5, div4);\n      append(div4, div0);\n      ctx[34](div0);\n      append(div4, div1);\n      if (if_block)\n        if_block.m(div1, null);\n      ctx[36](div1);\n      append(div4, div3);\n      append(div3, div2);\n      div2.innerHTML = raw_value;\n      mount_component(help2, div3, null);\n      mount_component(toc2, div3, null);\n      mount_component(status, div5, null);\n      ctx[42](div5);\n      current = true;\n      if (!mounted) {\n        dispose = [\n          listen(\n            div2,\n            \"click\",\n            /*click_handler_1*/\n            ctx[37]\n          ),\n          listen(div2, \"keydown\", self(\n            /*keydown_handler*/\n            ctx[38]\n          ))\n        ];\n        mounted = true;\n      }\n    },\n    p(ctx2, dirty) {\n      const toolbar_changes = {};\n      if (dirty[0] & /*context*/\n      1024)\n        toolbar_changes.context = /*context*/\n        ctx2[10];\n      if (dirty[0] & /*split*/\n      2048)\n        toolbar_changes.split = /*split*/\n        ctx2[11];\n      if (dirty[0] & /*activeTab*/\n      256)\n        toolbar_changes.activeTab = /*activeTab*/\n        ctx2[8];\n      if (dirty[0] & /*sidebar*/\n      512)\n        toolbar_changes.sidebar = /*sidebar*/\n        ctx2[9];\n      if (dirty[0] & /*fullscreen*/\n      32768)\n        toolbar_changes.fullscreen = /*fullscreen*/\n        ctx2[15];\n      if (dirty[0] & /*actions*/\n      2097152)\n        toolbar_changes.rightAfferentActions = /*actions*/\n        ctx2[21].rightActions;\n      if (dirty[0] & /*mergedLocale*/\n      4096)\n        toolbar_changes.locale = /*mergedLocale*/\n        ctx2[12];\n      if (dirty[0] & /*actions*/\n      2097152)\n        toolbar_changes.actions = /*actions*/\n        ctx2[21].leftActions;\n      toolbar.$set(toolbar_changes);\n      if (!current || dirty[0] & /*styles*/\n      4194304 && div0_style_value !== (div0_style_value = /*styles*/\n      ctx2[22].edit)) {\n        attr(div0, \"style\", div0_style_value);\n      }\n      if (!/*overridePreview*/\n      ctx2[4] && /*split*/\n      (ctx2[11] || /*activeTab*/\n      ctx2[8] === \"preview\")) {\n        if (if_block) {\n          if_block.p(ctx2, dirty);\n          if (dirty[0] & /*overridePreview, split, activeTab*/\n          2320) {\n            transition_in(if_block, 1);\n          }\n        } else {\n          if_block = create_if_block(ctx2);\n          if_block.c();\n          transition_in(if_block, 1);\n          if_block.m(div1, null);\n        }\n      } else if (if_block) {\n        group_outros();\n        transition_out(if_block, 1, 1, () => {\n          if_block = null;\n        });\n        check_outros();\n      }\n      if (!current || dirty[0] & /*styles*/\n      4194304 && div1_style_value !== (div1_style_value = /*styles*/\n      ctx2[22].preview)) {\n        attr(div1, \"style\", div1_style_value);\n      }\n      const help_changes = {};\n      if (dirty[0] & /*mergedLocale*/\n      4096)\n        help_changes.locale = /*mergedLocale*/\n        ctx2[12];\n      if (dirty[0] & /*actions*/\n      2097152)\n        help_changes.actions = /*actions*/\n        ctx2[21].leftActions;\n      if (dirty[0] & /*sidebar*/\n      512)\n        help_changes.visible = /*sidebar*/\n        ctx2[9] === \"help\";\n      help2.$set(help_changes);\n      const toc_changes = {};\n      if (dirty[0] & /*hast*/\n      262144)\n        toc_changes.hast = /*hast*/\n        ctx2[18];\n      if (dirty[0] & /*mergedLocale*/\n      4096)\n        toc_changes.locale = /*mergedLocale*/\n        ctx2[12];\n      if (dirty[0] & /*currentBlockIndex*/\n      1048576)\n        toc_changes.currentBlockIndex = /*currentBlockIndex*/\n        ctx2[20];\n      if (dirty[0] & /*sidebar*/\n      512)\n        toc_changes.visible = /*sidebar*/\n        ctx2[9] === \"toc\";\n      toc2.$set(toc_changes);\n      if (!current || dirty[0] & /*sidebar*/\n      512) {\n        toggle_class(\n          div3,\n          \"bytemd-hidden\",\n          /*sidebar*/\n          ctx2[9] === false\n        );\n      }\n      const status_changes = {};\n      if (dirty[0] & /*mergedLocale*/\n      4096)\n        status_changes.locale = /*mergedLocale*/\n        ctx2[12];\n      if (dirty[0] & /*overridePreview, split*/\n      2064)\n        status_changes.showSync = !/*overridePreview*/\n        ctx2[4] && /*split*/\n        ctx2[11];\n      if (dirty[0] & /*debouncedValue*/\n      65536)\n        status_changes.value = /*debouncedValue*/\n        ctx2[16];\n      if (dirty[0] & /*syncEnabled*/\n      131072)\n        status_changes.syncEnabled = /*syncEnabled*/\n        ctx2[17];\n      if (dirty[0] & /*value, maxLength*/\n      33)\n        status_changes.islimited = /*value*/\n        ctx2[0].length > /*maxLength*/\n        ctx2[5];\n      status.$set(status_changes);\n      if (!current || dirty[0] & /*split, activeTab*/\n      2304) {\n        toggle_class(\n          div5,\n          \"bytemd-split\",\n          /*split*/\n          ctx2[11] && /*activeTab*/\n          ctx2[8] === false\n        );\n      }\n      if (!current || dirty[0] & /*fullscreen*/\n      32768) {\n        toggle_class(\n          div5,\n          \"bytemd-fullscreen\",\n          /*fullscreen*/\n          ctx2[15]\n        );\n      }\n    },\n    i(local) {\n      if (current)\n        return;\n      transition_in(toolbar.$$.fragment, local);\n      transition_in(if_block);\n      transition_in(help2.$$.fragment, local);\n      transition_in(toc2.$$.fragment, local);\n      transition_in(status.$$.fragment, local);\n      current = true;\n    },\n    o(local) {\n      transition_out(toolbar.$$.fragment, local);\n      transition_out(if_block);\n      transition_out(help2.$$.fragment, local);\n      transition_out(toc2.$$.fragment, local);\n      transition_out(status.$$.fragment, local);\n      current = false;\n    },\n    d(detaching) {\n      if (detaching)\n        detach(div5);\n      destroy_component(toolbar);\n      ctx[34](null);\n      if (if_block)\n        if_block.d();\n      ctx[36](null);\n      destroy_component(help2);\n      destroy_component(toc2);\n      destroy_component(status);\n      ctx[42](null);\n      mounted = false;\n      run_all(dispose);\n    }\n  };\n}\nfunction instance($$self, $$props, $$invalidate) {\n  let mergedLocale;\n  let actions;\n  let split;\n  let styles;\n  let context;\n  let { value = \"\" } = $$props;\n  let { plugins = [] } = $$props;\n  let { sanitize = void 0 } = $$props;\n  let { remarkRehype: remarkRehype2 = void 0 } = $$props;\n  let { mode = \"auto\" } = $$props;\n  let { previewDebounce = 300 } = $$props;\n  let { placeholder = void 0 } = $$props;\n  let { editorConfig = void 0 } = $$props;\n  let { locale = void 0 } = $$props;\n  let { uploadImages = void 0 } = $$props;\n  let { overridePreview = void 0 } = $$props;\n  let { maxLength = Infinity } = $$props;\n  const dispatch = createEventDispatcher();\n  let root;\n  let editorEl;\n  let previewEl;\n  let containerWidth = Infinity;\n  let codemirror;\n  let editor;\n  let activeTab;\n  let fullscreen2 = false;\n  let sidebar = false;\n  let cbs = [];\n  let keyMap = {};\n  function on() {\n    cbs = plugins.map((p) => {\n      var _a;\n      return (_a = p.editorEffect) == null ? void 0 : _a.call(p, context);\n    });\n    keyMap = {};\n    actions.leftActions.forEach(({ handler }) => {\n      if ((handler == null ? void 0 : handler.type) === \"action\" && handler.shortcut) {\n        keyMap[handler.shortcut] = () => {\n          handler.click(context);\n        };\n      }\n    });\n    editor.addKeyMap(keyMap);\n  }\n  function off() {\n    cbs.forEach((cb) => cb && cb());\n    editor == null ? void 0 : editor.removeKeyMap(keyMap);\n  }\n  let debouncedValue = value;\n  const setDebouncedValue = (0,lodash_es__WEBPACK_IMPORTED_MODULE_20__[\"default\"])(\n    (value2) => {\n      $$invalidate(16, debouncedValue = value2);\n      overridePreview == null ? void 0 : overridePreview(previewEl, {\n        value: debouncedValue,\n        plugins,\n        sanitize,\n        remarkRehype: remarkRehype2\n      });\n    },\n    previewDebounce\n  );\n  let syncEnabled = true;\n  let editCalled = false;\n  let previewCalled = false;\n  let editPs;\n  let previewPs;\n  let hast = { type: \"root\", children: [] };\n  let vfile;\n  let currentBlockIndex = 0;\n  onMount(async () => {\n    $$invalidate(30, codemirror = createCodeMirror());\n    $$invalidate(7, editor = codemirror(editorEl, {\n      value,\n      mode: \"yaml-frontmatter\",\n      lineWrapping: true,\n      tabSize: 8,\n      indentUnit: 4,\n      extraKeys: {\n        Enter: \"newlineAndIndentContinueMarkdownList\"\n      },\n      ...editorConfig,\n      placeholder\n    }));\n    editor.addKeyMap({\n      Tab: \"indentMore\",\n      \"Shift-Tab\": \"indentLess\"\n    });\n    editor.on(\"change\", () => {\n      dispatch(\"change\", { value: editor.getValue() });\n    });\n    const updateBlockPositions = (0,lodash_es__WEBPACK_IMPORTED_MODULE_21__[\"default\"])(\n      () => {\n        editPs = [];\n        previewPs = [];\n        const scrollInfo = editor.getScrollInfo();\n        const body = previewEl.childNodes[0];\n        if (!(body instanceof HTMLElement))\n          return;\n        const leftNodes = hast.children.filter((v) => v.type === \"element\");\n        const rightNodes = [...body.childNodes].filter((v) => v instanceof HTMLElement);\n        for (let i = 0; i < leftNodes.length; i++) {\n          const leftNode = leftNodes[i];\n          const rightNode = rightNodes[i];\n          if (!leftNode.position) {\n            continue;\n          }\n          const left = editor.heightAtLine(leftNode.position.start.line - 1, \"local\") / (scrollInfo.height - scrollInfo.clientHeight);\n          const right = (rightNode.offsetTop - body.offsetTop) / (previewEl.scrollHeight - previewEl.clientHeight);\n          if (left >= 1 || right >= 1) {\n            break;\n          }\n          editPs.push(left);\n          previewPs.push(right);\n        }\n        editPs.push(1);\n        previewPs.push(1);\n      },\n      1e3\n    );\n    const editorScrollHandler = () => {\n      if (overridePreview)\n        return;\n      if (!syncEnabled)\n        return;\n      if (previewCalled) {\n        previewCalled = false;\n        return;\n      }\n      updateBlockPositions();\n      const info = editor.getScrollInfo();\n      const leftRatio = info.top / (info.height - info.clientHeight);\n      const startIndex = findStartIndex(leftRatio, editPs);\n      const rightRatio = (leftRatio - editPs[startIndex]) * (previewPs[startIndex + 1] - previewPs[startIndex]) / (editPs[startIndex + 1] - editPs[startIndex]) + previewPs[startIndex];\n      previewEl.scrollTo(0, rightRatio * (previewEl.scrollHeight - previewEl.clientHeight));\n      editCalled = true;\n    };\n    const previewScrollHandler = () => {\n      if (overridePreview)\n        return;\n      updateBlockPositions();\n      $$invalidate(20, currentBlockIndex = findStartIndex(previewEl.scrollTop / (previewEl.scrollHeight - previewEl.offsetHeight), previewPs));\n      if (!syncEnabled)\n        return;\n      if (editCalled) {\n        editCalled = false;\n        return;\n      }\n      const rightRatio = previewEl.scrollTop / (previewEl.scrollHeight - previewEl.clientHeight);\n      const startIndex = findStartIndex(rightRatio, previewPs);\n      const leftRatio = (rightRatio - previewPs[startIndex]) * (editPs[startIndex + 1] - editPs[startIndex]) / (previewPs[startIndex + 1] - previewPs[startIndex]) + editPs[startIndex];\n      if (isNaN(leftRatio)) {\n        return;\n      }\n      const info = editor.getScrollInfo();\n      editor.scrollTo(0, leftRatio * (info.height - info.clientHeight));\n      previewCalled = true;\n    };\n    editor.on(\"scroll\", editorScrollHandler);\n    previewEl.addEventListener(\"scroll\", previewScrollHandler, { passive: true });\n    const handleImages = async (e, itemList) => {\n      if (!uploadImages)\n        return;\n      const files = Array.from(itemList != null ? itemList : []).map((item) => {\n        if (item.type.startsWith(\"image/\")) {\n          return item.getAsFile();\n        }\n      }).filter((f) => f != null);\n      if (files.length) {\n        e.preventDefault();\n        await handleImageUpload(context, uploadImages, files);\n      }\n    };\n    editor.on(\"drop\", async (_, e) => {\n      var _a;\n      handleImages(e, (_a = e.dataTransfer) == null ? void 0 : _a.items);\n    });\n    editor.on(\"paste\", async (_, e) => {\n      var _a;\n      handleImages(e, (_a = e.clipboardData) == null ? void 0 : _a.items);\n    });\n    new ResizeObserver((entries) => {\n      $$invalidate(29, containerWidth = entries[0].contentRect.width);\n    }).observe(root, {\n      box: \"border-box\"\n      // console.log(containerWidth);\n    });\n  });\n  onDestroy(off);\n  const key_handler = (e) => {\n    editor.setOption(\"keyMap\", e.detail);\n    editor.focus();\n  };\n  const tab_handler = (e) => {\n    const v = e.detail;\n    if (split) {\n      $$invalidate(8, activeTab = activeTab === v ? false : v);\n    } else {\n      $$invalidate(8, activeTab = v);\n    }\n    if (activeTab === \"write\") {\n      tick().then(() => {\n        editor && editor.focus();\n      });\n    }\n    if (v === \"write\") {\n      tick().then(() => {\n        editor && editor.setSize(null, null);\n      });\n    }\n  };\n  const click_handler = (e) => {\n    switch (e.detail) {\n      case \"fullscreen\":\n        $$invalidate(15, fullscreen2 = !fullscreen2);\n        break;\n      case \"help\":\n        $$invalidate(9, sidebar = sidebar === \"help\" ? false : \"help\");\n        break;\n      case \"toc\":\n        $$invalidate(9, sidebar = sidebar === \"toc\" ? false : \"toc\");\n        break;\n    }\n  };\n  function div0_binding($$value) {\n    binding_callbacks[$$value ? \"unshift\" : \"push\"](() => {\n      editorEl = $$value;\n      $$invalidate(13, editorEl);\n    });\n  }\n  const hast_handler = (e) => {\n    $$invalidate(18, hast = e.detail.hast);\n    $$invalidate(19, vfile = e.detail.file);\n  };\n  function div1_binding($$value) {\n    binding_callbacks[$$value ? \"unshift\" : \"push\"](() => {\n      previewEl = $$value;\n      $$invalidate(14, previewEl);\n    });\n  }\n  const click_handler_1 = () => {\n    $$invalidate(9, sidebar = false);\n  };\n  const keydown_handler = (e) => {\n    if ([\"Enter\", \"Space\"].includes(e.code)) {\n      $$invalidate(9, sidebar = false);\n    }\n  };\n  const click_handler_2 = (e) => {\n    const headings = previewEl.querySelectorAll(\"h1,h2,h3,h4,h5,h6\");\n    headings[e.detail].scrollIntoView();\n  };\n  const sync_handler = (e) => {\n    $$invalidate(17, syncEnabled = e.detail);\n  };\n  const top_handler = () => {\n    editor.scrollTo(null, 0);\n    previewEl.scrollTo({ top: 0 });\n  };\n  function div5_binding($$value) {\n    binding_callbacks[$$value ? \"unshift\" : \"push\"](() => {\n      root = $$value;\n      $$invalidate(6, root);\n    });\n  }\n  $$self.$$set = ($$props2) => {\n    if (\"value\" in $$props2)\n      $$invalidate(0, value = $$props2.value);\n    if (\"plugins\" in $$props2)\n      $$invalidate(1, plugins = $$props2.plugins);\n    if (\"sanitize\" in $$props2)\n      $$invalidate(2, sanitize = $$props2.sanitize);\n    if (\"remarkRehype\" in $$props2)\n      $$invalidate(3, remarkRehype2 = $$props2.remarkRehype);\n    if (\"mode\" in $$props2)\n      $$invalidate(23, mode = $$props2.mode);\n    if (\"previewDebounce\" in $$props2)\n      $$invalidate(24, previewDebounce = $$props2.previewDebounce);\n    if (\"placeholder\" in $$props2)\n      $$invalidate(25, placeholder = $$props2.placeholder);\n    if (\"editorConfig\" in $$props2)\n      $$invalidate(26, editorConfig = $$props2.editorConfig);\n    if (\"locale\" in $$props2)\n      $$invalidate(27, locale = $$props2.locale);\n    if (\"uploadImages\" in $$props2)\n      $$invalidate(28, uploadImages = $$props2.uploadImages);\n    if (\"overridePreview\" in $$props2)\n      $$invalidate(4, overridePreview = $$props2.overridePreview);\n    if (\"maxLength\" in $$props2)\n      $$invalidate(5, maxLength = $$props2.maxLength);\n  };\n  $$self.$$.update = () => {\n    if ($$self.$$.dirty[0] & /*locale*/\n    134217728) {\n      $$invalidate(12, mergedLocale = { ...en, ...locale });\n    }\n    if ($$self.$$.dirty[0] & /*mergedLocale, plugins, uploadImages*/\n    268439554) {\n      $$invalidate(21, actions = getBuiltinActions(mergedLocale, plugins, uploadImages));\n    }\n    if ($$self.$$.dirty[0] & /*mode, containerWidth*/\n    545259520) {\n      $$invalidate(11, split = mode === \"split\" || mode === \"auto\" && containerWidth >= 800);\n    }\n    if ($$self.$$.dirty[0] & /*split*/\n    2048) {\n      ((_) => {\n        if (split)\n          $$invalidate(8, activeTab = false);\n      })();\n    }\n    if ($$self.$$.dirty[0] & /*split, activeTab, sidebar*/\n    2816) {\n      $$invalidate(22, styles = (() => {\n        let edit;\n        let preview2;\n        if (split && activeTab === false) {\n          if (sidebar) {\n            edit = `width:calc(50% - ${sidebar ? 140 : 0}px)`;\n            preview2 = `width:calc(50% - ${sidebar ? 140 : 0}px)`;\n          } else {\n            edit = \"width:50%\";\n            preview2 = \"width:50%\";\n          }\n        } else if (activeTab === \"preview\") {\n          edit = \"display:none\";\n          preview2 = `width:calc(100% - ${sidebar ? 280 : 0}px)`;\n        } else {\n          edit = `width:calc(100% - ${sidebar ? 280 : 0}px)`;\n          preview2 = \"display:none\";\n        }\n        return { edit, preview: preview2 };\n      })());\n    }\n    if ($$self.$$.dirty[0] & /*codemirror, editor, root*/\n    1073742016) {\n      $$invalidate(10, context = (() => {\n        const context2 = {\n          // @ts-ignore\n          codemirror,\n          editor,\n          root,\n          // @ts-ignore\n          ...createEditorUtils(codemirror, editor)\n        };\n        return context2;\n      })());\n    }\n    if ($$self.$$.dirty[0] & /*value*/\n    1) {\n      setDebouncedValue(value);\n    }\n    if ($$self.$$.dirty[0] & /*editor, value*/\n    129) {\n      if (editor && value !== editor.getValue()) {\n        editor.setValue(value);\n      }\n    }\n    if ($$self.$$.dirty[0] & /*editor, plugins*/\n    130) {\n      if (editor && plugins) {\n        off();\n        tick().then(() => {\n          on();\n        });\n      }\n    }\n  };\n  return [\n    value,\n    plugins,\n    sanitize,\n    remarkRehype2,\n    overridePreview,\n    maxLength,\n    root,\n    editor,\n    activeTab,\n    sidebar,\n    context,\n    split,\n    mergedLocale,\n    editorEl,\n    previewEl,\n    fullscreen2,\n    debouncedValue,\n    syncEnabled,\n    hast,\n    vfile,\n    currentBlockIndex,\n    actions,\n    styles,\n    mode,\n    previewDebounce,\n    placeholder,\n    editorConfig,\n    locale,\n    uploadImages,\n    containerWidth,\n    codemirror,\n    key_handler,\n    tab_handler,\n    click_handler,\n    div0_binding,\n    hast_handler,\n    div1_binding,\n    click_handler_1,\n    keydown_handler,\n    click_handler_2,\n    sync_handler,\n    top_handler,\n    div5_binding\n  ];\n}\nclass Editor extends SvelteComponent {\n  constructor(options) {\n    super();\n    init(\n      this,\n      options,\n      instance,\n      create_fragment,\n      not_equal,\n      {\n        value: 0,\n        plugins: 1,\n        sanitize: 2,\n        remarkRehype: 3,\n        mode: 23,\n        previewDebounce: 24,\n        placeholder: 25,\n        editorConfig: 26,\n        locale: 27,\n        uploadImages: 28,\n        overridePreview: 4,\n        maxLength: 5\n      },\n      null,\n      [-1, -1]\n    );\n  }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYnl0ZW1kL2Rpc3QvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBcUM7QUFDb0M7QUFDRDtBQUNWO0FBQ1Y7QUFDZTtBQUNmO0FBQ3NDO0FBQ25DO0FBQ2hCO0FBQ0o7QUFDTTtBQUNMO0FBQ2U7QUFDaEI7QUFDVTtBQUNFO0FBQ1I7QUFDRTtBQUNQO0FBQ2E7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHVCQUF1QjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxzQ0FBc0MsSUFBSTtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIscUJBQXFCLElBQUk7QUFDbkQ7QUFDQTtBQUNBLGlEQUFpRCxZQUFZO0FBQzdEO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiw2QkFBNkI7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHlCQUF5QjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrREFBK0Q7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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Q0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHlCQUF5QjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix1QkFBdUI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiwwQkFBMEI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQix3QkFBd0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDBCQUEwQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQix3QkFBd0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IseUJBQXlCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSwwQkFBMEI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsdUJBQXVCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx3QkFBd0I7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsVUFBVTtBQUNsQixRQUFRLFNBQVM7QUFDakIsUUFBUSxVQUFVO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBLGNBQWMsbUNBQW1DO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5RUFBeUUsbUNBQW1DO0FBQzVHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsV0FBVztBQUNuQixRQUFRLFFBQVE7QUFDaEIsUUFBUSxjQUFjO0FBQ3RCLFFBQVEsU0FBUztBQUNqQixRQUFRLFlBQVk7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0Isd0NBQVM7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHlCQUF5QjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQix3QkFBd0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0Esc0JBQXNCLHdCQUF3QjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQix5QkFBeUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHdCQUF3QjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix1QkFBdUI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQix3QkFBd0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZXR0eWNvZGUtZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvYnl0ZW1kL2Rpc3QvaW5kZXgubWpzPzljZDIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGZhY3RvcnkgZnJvbSBcImNvZGVtaXJyb3Itc3NyXCI7XG5pbXBvcnQgdXNlUGxhY2Vob2xkZXIgZnJvbSBcImNvZGVtaXJyb3Itc3NyL2FkZG9uL2Rpc3BsYXkvcGxhY2Vob2xkZXIuanNcIjtcbmltcG9ydCB1c2VDb250aW51ZWxpc3QgZnJvbSBcImNvZGVtaXJyb3Itc3NyL2FkZG9uL2VkaXQvY29udGludWVsaXN0LmpzXCI7XG5pbXBvcnQgdXNlT3ZlcmxheSBmcm9tIFwiY29kZW1pcnJvci1zc3IvYWRkb24vbW9kZS9vdmVybGF5LmpzXCI7XG5pbXBvcnQgdXNlR2ZtIGZyb20gXCJjb2RlbWlycm9yLXNzci9tb2RlL2dmbS9nZm0uanNcIjtcbmltcG9ydCB1c2VNYXJrZG93biBmcm9tIFwiY29kZW1pcnJvci1zc3IvbW9kZS9tYXJrZG93bi9tYXJrZG93bi5qc1wiO1xuaW1wb3J0IHVzZVhtbCBmcm9tIFwiY29kZW1pcnJvci1zc3IvbW9kZS94bWwveG1sLmpzXCI7XG5pbXBvcnQgdXNlWWFtbEZyb250bWF0dGVyIGZyb20gXCJjb2RlbWlycm9yLXNzci9tb2RlL3lhbWwtZnJvbnRtYXR0ZXIveWFtbC1mcm9udG1hdHRlci5qc1wiO1xuaW1wb3J0IHVzZVlhbWwgZnJvbSBcImNvZGVtaXJyb3Itc3NyL21vZGUveWFtbC95YW1sLmpzXCI7XG5pbXBvcnQgc2VsZWN0RmlsZXMgZnJvbSBcInNlbGVjdC1maWxlc1wiO1xuaW1wb3J0IHdvcmRDb3VudCBmcm9tIFwid29yZC1jb3VudFwiO1xuaW1wb3J0IHsgdmlzaXQgfSBmcm9tIFwidW5pc3QtdXRpbC12aXNpdFwiO1xuaW1wb3J0IHsgZGVsZWdhdGUgfSBmcm9tIFwidGlwcHkuanNcIjtcbmltcG9ydCB7IGRlZmF1bHRTY2hlbWEgfSBmcm9tIFwiaGFzdC11dGlsLXNhbml0aXplXCI7XG5pbXBvcnQgcmVoeXBlUmF3IGZyb20gXCJyZWh5cGUtcmF3XCI7XG5pbXBvcnQgcmVoeXBlU2FuaXRpemUgZnJvbSBcInJlaHlwZS1zYW5pdGl6ZVwiO1xuaW1wb3J0IHJlaHlwZVN0cmluZ2lmeSBmcm9tIFwicmVoeXBlLXN0cmluZ2lmeVwiO1xuaW1wb3J0IHJlbWFya1BhcnNlIGZyb20gXCJyZW1hcmstcGFyc2VcIjtcbmltcG9ydCByZW1hcmtSZWh5cGUgZnJvbSBcInJlbWFyay1yZWh5cGVcIjtcbmltcG9ydCB7IHVuaWZpZWQgfSBmcm9tIFwidW5pZmllZFwiO1xuaW1wb3J0IHsgZGVib3VuY2UsIHRocm90dGxlIH0gZnJvbSBcImxvZGFzaC1lc1wiO1xuY29uc3QgaW5kZXggPSBcIlwiO1xuZnVuY3Rpb24gbm9vcCgpIHtcbn1cbmZ1bmN0aW9uIHJ1bihmbikge1xuICByZXR1cm4gZm4oKTtcbn1cbmZ1bmN0aW9uIGJsYW5rX29iamVjdCgpIHtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpO1xufVxuZnVuY3Rpb24gcnVuX2FsbChmbnMpIHtcbiAgZm5zLmZvckVhY2gocnVuKTtcbn1cbmZ1bmN0aW9uIGlzX2Z1bmN0aW9uKHRoaW5nKSB7XG4gIHJldHVybiB0eXBlb2YgdGhpbmcgPT09IFwiZnVuY3Rpb25cIjtcbn1cbmZ1bmN0aW9uIHNhZmVfbm90X2VxdWFsKGEsIGIpIHtcbiAgcmV0dXJuIGEgIT0gYSA/IGIgPT0gYiA6IGEgIT09IGIgfHwgKGEgJiYgdHlwZW9mIGEgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGEgPT09IFwiZnVuY3Rpb25cIik7XG59XG5mdW5jdGlvbiBub3RfZXF1YWwoYSwgYikge1xuICByZXR1cm4gYSAhPSBhID8gYiA9PSBiIDogYSAhPT0gYjtcbn1cbmZ1bmN0aW9uIGlzX2VtcHR5KG9iaikge1xuICByZXR1cm4gT2JqZWN0LmtleXMob2JqKS5sZW5ndGggPT09IDA7XG59XG5mdW5jdGlvbiBhcHBlbmQodGFyZ2V0LCBub2RlKSB7XG4gIHRhcmdldC5hcHBlbmRDaGlsZChub2RlKTtcbn1cbmZ1bmN0aW9uIGluc2VydCh0YXJnZXQsIG5vZGUsIGFuY2hvcikge1xuICB0YXJnZXQuaW5zZXJ0QmVmb3JlKG5vZGUsIGFuY2hvciB8fCBudWxsKTtcbn1cbmZ1bmN0aW9uIGRldGFjaChub2RlKSB7XG4gIGlmIChub2RlLnBhcmVudE5vZGUpIHtcbiAgICBub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7XG4gIH1cbn1cbmZ1bmN0aW9uIGRlc3Ryb3lfZWFjaChpdGVyYXRpb25zLCBkZXRhY2hpbmcpIHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVyYXRpb25zLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgaWYgKGl0ZXJhdGlvbnNbaV0pXG4gICAgICBpdGVyYXRpb25zW2ldLmQoZGV0YWNoaW5nKTtcbiAgfVxufVxuZnVuY3Rpb24gZWxlbWVudChuYW1lKSB7XG4gIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5hbWUpO1xufVxuZnVuY3Rpb24gdGV4dChkYXRhKSB7XG4gIHJldHVybiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShkYXRhKTtcbn1cbmZ1bmN0aW9uIGVtcHR5KCkge1xuICByZXR1cm4gdGV4dChcIlwiKTtcbn1cbmZ1bmN0aW9uIGxpc3Rlbihub2RlLCBldmVudCwgaGFuZGxlciwgb3B0aW9ucykge1xuICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpO1xuICByZXR1cm4gKCkgPT4gbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTtcbn1cbmZ1bmN0aW9uIHNlbGYoZm4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LnRhcmdldCA9PT0gdGhpcylcbiAgICAgIGZuLmNhbGwodGhpcywgZXZlbnQpO1xuICB9O1xufVxuZnVuY3Rpb24gYXR0cihub2RlLCBhdHRyaWJ1dGUsIHZhbHVlKSB7XG4gIGlmICh2YWx1ZSA9PSBudWxsKVxuICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZSk7XG4gIGVsc2UgaWYgKG5vZGUuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZSkgIT09IHZhbHVlKVxuICAgIG5vZGUuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZSwgdmFsdWUpO1xufVxuZnVuY3Rpb24gY2hpbGRyZW4oZWxlbWVudDIpIHtcbiAgcmV0dXJuIEFycmF5LmZyb20oZWxlbWVudDIuY2hpbGROb2Rlcyk7XG59XG5mdW5jdGlvbiBzZXRfZGF0YSh0ZXh0MiwgZGF0YSkge1xuICBkYXRhID0gXCJcIiArIGRhdGE7XG4gIGlmICh0ZXh0Mi53aG9sZVRleHQgIT09IGRhdGEpXG4gICAgdGV4dDIuZGF0YSA9IGRhdGE7XG59XG5mdW5jdGlvbiB0b2dnbGVfY2xhc3MoZWxlbWVudDIsIG5hbWUsIHRvZ2dsZSkge1xuICBlbGVtZW50Mi5jbGFzc0xpc3RbdG9nZ2xlID8gXCJhZGRcIiA6IFwicmVtb3ZlXCJdKG5hbWUpO1xufVxuZnVuY3Rpb24gY3VzdG9tX2V2ZW50KHR5cGUsIGRldGFpbCwgeyBidWJibGVzID0gZmFsc2UsIGNhbmNlbGFibGUgPSBmYWxzZSB9ID0ge30pIHtcbiAgY29uc3QgZSA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiQ3VzdG9tRXZlbnRcIik7XG4gIGUuaW5pdEN1c3RvbUV2ZW50KHR5cGUsIGJ1YmJsZXMsIGNhbmNlbGFibGUsIGRldGFpbCk7XG4gIHJldHVybiBlO1xufVxubGV0IGN1cnJlbnRfY29tcG9uZW50O1xuZnVuY3Rpb24gc2V0X2N1cnJlbnRfY29tcG9uZW50KGNvbXBvbmVudCkge1xuICBjdXJyZW50X2NvbXBvbmVudCA9IGNvbXBvbmVudDtcbn1cbmZ1bmN0aW9uIGdldF9jdXJyZW50X2NvbXBvbmVudCgpIHtcbiAgaWYgKCFjdXJyZW50X2NvbXBvbmVudClcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJGdW5jdGlvbiBjYWxsZWQgb3V0c2lkZSBjb21wb25lbnQgaW5pdGlhbGl6YXRpb25cIik7XG4gIHJldHVybiBjdXJyZW50X2NvbXBvbmVudDtcbn1cbmZ1bmN0aW9uIG9uTW91bnQoZm4pIHtcbiAgZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkuJCQub25fbW91bnQucHVzaChmbik7XG59XG5mdW5jdGlvbiBhZnRlclVwZGF0ZShmbikge1xuICBnZXRfY3VycmVudF9jb21wb25lbnQoKS4kJC5hZnRlcl91cGRhdGUucHVzaChmbik7XG59XG5mdW5jdGlvbiBvbkRlc3Ryb3koZm4pIHtcbiAgZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkuJCQub25fZGVzdHJveS5wdXNoKGZuKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUV2ZW50RGlzcGF0Y2hlcigpIHtcbiAgY29uc3QgY29tcG9uZW50ID0gZ2V0X2N1cnJlbnRfY29tcG9uZW50KCk7XG4gIHJldHVybiAodHlwZSwgZGV0YWlsLCB7IGNhbmNlbGFibGUgPSBmYWxzZSB9ID0ge30pID0+IHtcbiAgICBjb25zdCBjYWxsYmFja3MgPSBjb21wb25lbnQuJCQuY2FsbGJhY2tzW3R5cGVdO1xuICAgIGlmIChjYWxsYmFja3MpIHtcbiAgICAgIGNvbnN0IGV2ZW50ID0gY3VzdG9tX2V2ZW50KHR5cGUsIGRldGFpbCwgeyBjYW5jZWxhYmxlIH0pO1xuICAgICAgY2FsbGJhY2tzLnNsaWNlKCkuZm9yRWFjaCgoZm4pID0+IHtcbiAgICAgICAgZm4uY2FsbChjb21wb25lbnQsIGV2ZW50KTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuICFldmVudC5kZWZhdWx0UHJldmVudGVkO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcbn1cbmNvbnN0IGRpcnR5X2NvbXBvbmVudHMgPSBbXTtcbmNvbnN0IGJpbmRpbmdfY2FsbGJhY2tzID0gW107XG5sZXQgcmVuZGVyX2NhbGxiYWNrcyA9IFtdO1xuY29uc3QgZmx1c2hfY2FsbGJhY2tzID0gW107XG5jb25zdCByZXNvbHZlZF9wcm9taXNlID0gLyogQF9fUFVSRV9fICovIFByb21pc2UucmVzb2x2ZSgpO1xubGV0IHVwZGF0ZV9zY2hlZHVsZWQgPSBmYWxzZTtcbmZ1bmN0aW9uIHNjaGVkdWxlX3VwZGF0ZSgpIHtcbiAgaWYgKCF1cGRhdGVfc2NoZWR1bGVkKSB7XG4gICAgdXBkYXRlX3NjaGVkdWxlZCA9IHRydWU7XG4gICAgcmVzb2x2ZWRfcHJvbWlzZS50aGVuKGZsdXNoKTtcbiAgfVxufVxuZnVuY3Rpb24gdGljaygpIHtcbiAgc2NoZWR1bGVfdXBkYXRlKCk7XG4gIHJldHVybiByZXNvbHZlZF9wcm9taXNlO1xufVxuZnVuY3Rpb24gYWRkX3JlbmRlcl9jYWxsYmFjayhmbikge1xuICByZW5kZXJfY2FsbGJhY2tzLnB1c2goZm4pO1xufVxuY29uc3Qgc2Vlbl9jYWxsYmFja3MgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xubGV0IGZsdXNoaWR4ID0gMDtcbmZ1bmN0aW9uIGZsdXNoKCkge1xuICBpZiAoZmx1c2hpZHggIT09IDApIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3Qgc2F2ZWRfY29tcG9uZW50ID0gY3VycmVudF9jb21wb25lbnQ7XG4gIGRvIHtcbiAgICB0cnkge1xuICAgICAgd2hpbGUgKGZsdXNoaWR4IDwgZGlydHlfY29tcG9uZW50cy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgY29tcG9uZW50ID0gZGlydHlfY29tcG9uZW50c1tmbHVzaGlkeF07XG4gICAgICAgIGZsdXNoaWR4Kys7XG4gICAgICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChjb21wb25lbnQpO1xuICAgICAgICB1cGRhdGUoY29tcG9uZW50LiQkKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBkaXJ0eV9jb21wb25lbnRzLmxlbmd0aCA9IDA7XG4gICAgICBmbHVzaGlkeCA9IDA7XG4gICAgICB0aHJvdyBlO1xuICAgIH1cbiAgICBzZXRfY3VycmVudF9jb21wb25lbnQobnVsbCk7XG4gICAgZGlydHlfY29tcG9uZW50cy5sZW5ndGggPSAwO1xuICAgIGZsdXNoaWR4ID0gMDtcbiAgICB3aGlsZSAoYmluZGluZ19jYWxsYmFja3MubGVuZ3RoKVxuICAgICAgYmluZGluZ19jYWxsYmFja3MucG9wKCkoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlbmRlcl9jYWxsYmFja3MubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIGNvbnN0IGNhbGxiYWNrID0gcmVuZGVyX2NhbGxiYWNrc1tpXTtcbiAgICAgIGlmICghc2Vlbl9jYWxsYmFja3MuaGFzKGNhbGxiYWNrKSkge1xuICAgICAgICBzZWVuX2NhbGxiYWNrcy5hZGQoY2FsbGJhY2spO1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgfVxuICAgIH1cbiAgICByZW5kZXJfY2FsbGJhY2tzLmxlbmd0aCA9IDA7XG4gIH0gd2hpbGUgKGRpcnR5X2NvbXBvbmVudHMubGVuZ3RoKTtcbiAgd2hpbGUgKGZsdXNoX2NhbGxiYWNrcy5sZW5ndGgpIHtcbiAgICBmbHVzaF9jYWxsYmFja3MucG9wKCkoKTtcbiAgfVxuICB1cGRhdGVfc2NoZWR1bGVkID0gZmFsc2U7XG4gIHNlZW5fY2FsbGJhY2tzLmNsZWFyKCk7XG4gIHNldF9jdXJyZW50X2NvbXBvbmVudChzYXZlZF9jb21wb25lbnQpO1xufVxuZnVuY3Rpb24gdXBkYXRlKCQkKSB7XG4gIGlmICgkJC5mcmFnbWVudCAhPT0gbnVsbCkge1xuICAgICQkLnVwZGF0ZSgpO1xuICAgIHJ1bl9hbGwoJCQuYmVmb3JlX3VwZGF0ZSk7XG4gICAgY29uc3QgZGlydHkgPSAkJC5kaXJ0eTtcbiAgICAkJC5kaXJ0eSA9IFstMV07XG4gICAgJCQuZnJhZ21lbnQgJiYgJCQuZnJhZ21lbnQucCgkJC5jdHgsIGRpcnR5KTtcbiAgICAkJC5hZnRlcl91cGRhdGUuZm9yRWFjaChhZGRfcmVuZGVyX2NhbGxiYWNrKTtcbiAgfVxufVxuZnVuY3Rpb24gZmx1c2hfcmVuZGVyX2NhbGxiYWNrcyhmbnMpIHtcbiAgY29uc3QgZmlsdGVyZWQgPSBbXTtcbiAgY29uc3QgdGFyZ2V0cyA9IFtdO1xuICByZW5kZXJfY2FsbGJhY2tzLmZvckVhY2goKGMpID0+IGZucy5pbmRleE9mKGMpID09PSAtMSA/IGZpbHRlcmVkLnB1c2goYykgOiB0YXJnZXRzLnB1c2goYykpO1xuICB0YXJnZXRzLmZvckVhY2goKGMpID0+IGMoKSk7XG4gIHJlbmRlcl9jYWxsYmFja3MgPSBmaWx0ZXJlZDtcbn1cbmNvbnN0IG91dHJvaW5nID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbmxldCBvdXRyb3M7XG5mdW5jdGlvbiBncm91cF9vdXRyb3MoKSB7XG4gIG91dHJvcyA9IHtcbiAgICByOiAwLFxuICAgIGM6IFtdLFxuICAgIHA6IG91dHJvc1xuICAgIC8vIHBhcmVudCBncm91cFxuICB9O1xufVxuZnVuY3Rpb24gY2hlY2tfb3V0cm9zKCkge1xuICBpZiAoIW91dHJvcy5yKSB7XG4gICAgcnVuX2FsbChvdXRyb3MuYyk7XG4gIH1cbiAgb3V0cm9zID0gb3V0cm9zLnA7XG59XG5mdW5jdGlvbiB0cmFuc2l0aW9uX2luKGJsb2NrLCBsb2NhbCkge1xuICBpZiAoYmxvY2sgJiYgYmxvY2suaSkge1xuICAgIG91dHJvaW5nLmRlbGV0ZShibG9jayk7XG4gICAgYmxvY2suaShsb2NhbCk7XG4gIH1cbn1cbmZ1bmN0aW9uIHRyYW5zaXRpb25fb3V0KGJsb2NrLCBsb2NhbCwgZGV0YWNoMiwgY2FsbGJhY2spIHtcbiAgaWYgKGJsb2NrICYmIGJsb2NrLm8pIHtcbiAgICBpZiAob3V0cm9pbmcuaGFzKGJsb2NrKSlcbiAgICAgIHJldHVybjtcbiAgICBvdXRyb2luZy5hZGQoYmxvY2spO1xuICAgIG91dHJvcy5jLnB1c2goKCkgPT4ge1xuICAgICAgb3V0cm9pbmcuZGVsZXRlKGJsb2NrKTtcbiAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICBpZiAoZGV0YWNoMilcbiAgICAgICAgICBibG9jay5kKDEpO1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGJsb2NrLm8obG9jYWwpO1xuICB9IGVsc2UgaWYgKGNhbGxiYWNrKSB7XG4gICAgY2FsbGJhY2soKTtcbiAgfVxufVxuZnVuY3Rpb24gY3JlYXRlX2NvbXBvbmVudChibG9jaykge1xuICBibG9jayAmJiBibG9jay5jKCk7XG59XG5mdW5jdGlvbiBtb3VudF9jb21wb25lbnQoY29tcG9uZW50LCB0YXJnZXQsIGFuY2hvciwgY3VzdG9tRWxlbWVudCkge1xuICBjb25zdCB7IGZyYWdtZW50LCBhZnRlcl91cGRhdGUgfSA9IGNvbXBvbmVudC4kJDtcbiAgZnJhZ21lbnQgJiYgZnJhZ21lbnQubSh0YXJnZXQsIGFuY2hvcik7XG4gIGlmICghY3VzdG9tRWxlbWVudCkge1xuICAgIGFkZF9yZW5kZXJfY2FsbGJhY2soKCkgPT4ge1xuICAgICAgY29uc3QgbmV3X29uX2Rlc3Ryb3kgPSBjb21wb25lbnQuJCQub25fbW91bnQubWFwKHJ1bikuZmlsdGVyKGlzX2Z1bmN0aW9uKTtcbiAgICAgIGlmIChjb21wb25lbnQuJCQub25fZGVzdHJveSkge1xuICAgICAgICBjb21wb25lbnQuJCQub25fZGVzdHJveS5wdXNoKC4uLm5ld19vbl9kZXN0cm95KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJ1bl9hbGwobmV3X29uX2Rlc3Ryb3kpO1xuICAgICAgfVxuICAgICAgY29tcG9uZW50LiQkLm9uX21vdW50ID0gW107XG4gICAgfSk7XG4gIH1cbiAgYWZ0ZXJfdXBkYXRlLmZvckVhY2goYWRkX3JlbmRlcl9jYWxsYmFjayk7XG59XG5mdW5jdGlvbiBkZXN0cm95X2NvbXBvbmVudChjb21wb25lbnQsIGRldGFjaGluZykge1xuICBjb25zdCAkJCA9IGNvbXBvbmVudC4kJDtcbiAgaWYgKCQkLmZyYWdtZW50ICE9PSBudWxsKSB7XG4gICAgZmx1c2hfcmVuZGVyX2NhbGxiYWNrcygkJC5hZnRlcl91cGRhdGUpO1xuICAgIHJ1bl9hbGwoJCQub25fZGVzdHJveSk7XG4gICAgJCQuZnJhZ21lbnQgJiYgJCQuZnJhZ21lbnQuZChkZXRhY2hpbmcpO1xuICAgICQkLm9uX2Rlc3Ryb3kgPSAkJC5mcmFnbWVudCA9IG51bGw7XG4gICAgJCQuY3R4ID0gW107XG4gIH1cbn1cbmZ1bmN0aW9uIG1ha2VfZGlydHkoY29tcG9uZW50LCBpKSB7XG4gIGlmIChjb21wb25lbnQuJCQuZGlydHlbMF0gPT09IC0xKSB7XG4gICAgZGlydHlfY29tcG9uZW50cy5wdXNoKGNvbXBvbmVudCk7XG4gICAgc2NoZWR1bGVfdXBkYXRlKCk7XG4gICAgY29tcG9uZW50LiQkLmRpcnR5LmZpbGwoMCk7XG4gIH1cbiAgY29tcG9uZW50LiQkLmRpcnR5W2kgLyAzMSB8IDBdIHw9IDEgPDwgaSAlIDMxO1xufVxuZnVuY3Rpb24gaW5pdChjb21wb25lbnQsIG9wdGlvbnMsIGluc3RhbmNlMiwgY3JlYXRlX2ZyYWdtZW50Miwgbm90X2VxdWFsMiwgcHJvcHMsIGFwcGVuZF9zdHlsZXMsIGRpcnR5ID0gWy0xXSkge1xuICBjb25zdCBwYXJlbnRfY29tcG9uZW50ID0gY3VycmVudF9jb21wb25lbnQ7XG4gIHNldF9jdXJyZW50X2NvbXBvbmVudChjb21wb25lbnQpO1xuICBjb25zdCAkJCA9IGNvbXBvbmVudC4kJCA9IHtcbiAgICBmcmFnbWVudDogbnVsbCxcbiAgICBjdHg6IFtdLFxuICAgIC8vIHN0YXRlXG4gICAgcHJvcHMsXG4gICAgdXBkYXRlOiBub29wLFxuICAgIG5vdF9lcXVhbDogbm90X2VxdWFsMixcbiAgICBib3VuZDogYmxhbmtfb2JqZWN0KCksXG4gICAgLy8gbGlmZWN5Y2xlXG4gICAgb25fbW91bnQ6IFtdLFxuICAgIG9uX2Rlc3Ryb3k6IFtdLFxuICAgIG9uX2Rpc2Nvbm5lY3Q6IFtdLFxuICAgIGJlZm9yZV91cGRhdGU6IFtdLFxuICAgIGFmdGVyX3VwZGF0ZTogW10sXG4gICAgY29udGV4dDogbmV3IE1hcChvcHRpb25zLmNvbnRleHQgfHwgKHBhcmVudF9jb21wb25lbnQgPyBwYXJlbnRfY29tcG9uZW50LiQkLmNvbnRleHQgOiBbXSkpLFxuICAgIC8vIGV2ZXJ5dGhpbmcgZWxzZVxuICAgIGNhbGxiYWNrczogYmxhbmtfb2JqZWN0KCksXG4gICAgZGlydHksXG4gICAgc2tpcF9ib3VuZDogZmFsc2UsXG4gICAgcm9vdDogb3B0aW9ucy50YXJnZXQgfHwgcGFyZW50X2NvbXBvbmVudC4kJC5yb290XG4gIH07XG4gIGFwcGVuZF9zdHlsZXMgJiYgYXBwZW5kX3N0eWxlcygkJC5yb290KTtcbiAgbGV0IHJlYWR5ID0gZmFsc2U7XG4gICQkLmN0eCA9IGluc3RhbmNlMiA/IGluc3RhbmNlMihjb21wb25lbnQsIG9wdGlvbnMucHJvcHMgfHwge30sIChpLCByZXQsIC4uLnJlc3QpID0+IHtcbiAgICBjb25zdCB2YWx1ZSA9IHJlc3QubGVuZ3RoID8gcmVzdFswXSA6IHJldDtcbiAgICBpZiAoJCQuY3R4ICYmIG5vdF9lcXVhbDIoJCQuY3R4W2ldLCAkJC5jdHhbaV0gPSB2YWx1ZSkpIHtcbiAgICAgIGlmICghJCQuc2tpcF9ib3VuZCAmJiAkJC5ib3VuZFtpXSlcbiAgICAgICAgJCQuYm91bmRbaV0odmFsdWUpO1xuICAgICAgaWYgKHJlYWR5KVxuICAgICAgICBtYWtlX2RpcnR5KGNvbXBvbmVudCwgaSk7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG4gIH0pIDogW107XG4gICQkLnVwZGF0ZSgpO1xuICByZWFkeSA9IHRydWU7XG4gIHJ1bl9hbGwoJCQuYmVmb3JlX3VwZGF0ZSk7XG4gICQkLmZyYWdtZW50ID0gY3JlYXRlX2ZyYWdtZW50MiA/IGNyZWF0ZV9mcmFnbWVudDIoJCQuY3R4KSA6IGZhbHNlO1xuICBpZiAob3B0aW9ucy50YXJnZXQpIHtcbiAgICBpZiAob3B0aW9ucy5oeWRyYXRlKSB7XG4gICAgICBjb25zdCBub2RlcyA9IGNoaWxkcmVuKG9wdGlvbnMudGFyZ2V0KTtcbiAgICAgICQkLmZyYWdtZW50ICYmICQkLmZyYWdtZW50Lmwobm9kZXMpO1xuICAgICAgbm9kZXMuZm9yRWFjaChkZXRhY2gpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkJC5mcmFnbWVudCAmJiAkJC5mcmFnbWVudC5jKCk7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLmludHJvKVxuICAgICAgdHJhbnNpdGlvbl9pbihjb21wb25lbnQuJCQuZnJhZ21lbnQpO1xuICAgIG1vdW50X2NvbXBvbmVudChjb21wb25lbnQsIG9wdGlvbnMudGFyZ2V0LCBvcHRpb25zLmFuY2hvciwgb3B0aW9ucy5jdXN0b21FbGVtZW50KTtcbiAgICBmbHVzaCgpO1xuICB9XG4gIHNldF9jdXJyZW50X2NvbXBvbmVudChwYXJlbnRfY29tcG9uZW50KTtcbn1cbmNsYXNzIFN2ZWx0ZUNvbXBvbmVudCB7XG4gICRkZXN0cm95KCkge1xuICAgIGRlc3Ryb3lfY29tcG9uZW50KHRoaXMsIDEpO1xuICAgIHRoaXMuJGRlc3Ryb3kgPSBub29wO1xuICB9XG4gICRvbih0eXBlLCBjYWxsYmFjaykge1xuICAgIGlmICghaXNfZnVuY3Rpb24oY2FsbGJhY2spKSB7XG4gICAgICByZXR1cm4gbm9vcDtcbiAgICB9XG4gICAgY29uc3QgY2FsbGJhY2tzID0gdGhpcy4kJC5jYWxsYmFja3NbdHlwZV0gfHwgKHRoaXMuJCQuY2FsbGJhY2tzW3R5cGVdID0gW10pO1xuICAgIGNhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY29uc3QgaW5kZXgyID0gY2FsbGJhY2tzLmluZGV4T2YoY2FsbGJhY2spO1xuICAgICAgaWYgKGluZGV4MiAhPT0gLTEpXG4gICAgICAgIGNhbGxiYWNrcy5zcGxpY2UoaW5kZXgyLCAxKTtcbiAgICB9O1xuICB9XG4gICRzZXQoJCRwcm9wcykge1xuICAgIGlmICh0aGlzLiQkc2V0ICYmICFpc19lbXB0eSgkJHByb3BzKSkge1xuICAgICAgdGhpcy4kJC5za2lwX2JvdW5kID0gdHJ1ZTtcbiAgICAgIHRoaXMuJCRzZXQoJCRwcm9wcyk7XG4gICAgICB0aGlzLiQkLnNraXBfYm91bmQgPSBmYWxzZTtcbiAgICB9XG4gIH1cbn1cbmNvbnN0IGJvbGQgPSBcIkJvbGRcIjtcbmNvbnN0IGJvbGRUZXh0ID0gXCJib2xkIHRleHRcIjtcbmNvbnN0IGNoZWF0c2hlZXQgPSBcIk1hcmtkb3duIENoZWF0c2hlZXRcIjtcbmNvbnN0IGNsb3NlSGVscCA9IFwiQ2xvc2UgaGVscFwiO1xuY29uc3QgY2xvc2VUb2MgPSBcIkNsb3NlIHRhYmxlIG9mIGNvbnRlbnRzXCI7XG5jb25zdCBjb2RlID0gXCJDb2RlXCI7XG5jb25zdCBjb2RlQmxvY2sgPSBcIkNvZGUgYmxvY2tcIjtcbmNvbnN0IGNvZGVMYW5nID0gXCJsYW5nXCI7XG5jb25zdCBjb2RlVGV4dCA9IFwiY29kZVwiO1xuY29uc3QgZXhpdEZ1bGxzY3JlZW4gPSBcIkV4aXQgZnVsbHNjcmVlblwiO1xuY29uc3QgZXhpdFByZXZpZXdPbmx5ID0gXCJFeGl0IHByZXZpZXcgb25seVwiO1xuY29uc3QgZXhpdFdyaXRlT25seSA9IFwiRXhpdCB3cml0ZSBvbmx5XCI7XG5jb25zdCBmdWxsc2NyZWVuID0gXCJGdWxsc2NyZWVuXCI7XG5jb25zdCBoMSA9IFwiSGVhZGluZyAxXCI7XG5jb25zdCBoMiA9IFwiSGVhZGluZyAyXCI7XG5jb25zdCBoMyA9IFwiSGVhZGluZyAzXCI7XG5jb25zdCBoNCA9IFwiSGVhZGluZyA0XCI7XG5jb25zdCBoNSA9IFwiSGVhZGluZyA1XCI7XG5jb25zdCBoNiA9IFwiSGVhZGluZyA2XCI7XG5jb25zdCBoZWFkaW5nVGV4dCA9IFwiaGVhZGluZ1wiO1xuY29uc3QgaGVscCA9IFwiSGVscFwiO1xuY29uc3QgaHIgPSBcIkhvcml6b250YWwgcnVsZVwiO1xuY29uc3QgaW1hZ2UgPSBcIkltYWdlXCI7XG5jb25zdCBpbWFnZUFsdCA9IFwiYWx0XCI7XG5jb25zdCBpbWFnZVRpdGxlID0gXCJ0aXRsZVwiO1xuY29uc3QgaXRhbGljID0gXCJJdGFsaWNcIjtcbmNvbnN0IGl0YWxpY1RleHQgPSBcIml0YWxpYyB0ZXh0XCI7XG5jb25zdCBsaW1pdGVkID0gXCJUaGUgbWF4aW11bSBjaGFyYWN0ZXIgbGltaXQgaGFzIGJlZW4gcmVhY2hlZFwiO1xuY29uc3QgbGluZXMgPSBcIkxpbmVzXCI7XG5jb25zdCBsaW5rID0gXCJMaW5rXCI7XG5jb25zdCBsaW5rVGV4dCA9IFwibGluayB0ZXh0XCI7XG5jb25zdCBvbCA9IFwiT3JkZXJlZCBsaXN0XCI7XG5jb25zdCBvbEl0ZW0gPSBcIml0ZW1cIjtcbmNvbnN0IHByZXZpZXcgPSBcIlByZXZpZXdcIjtcbmNvbnN0IHByZXZpZXdPbmx5ID0gXCJQcmV2aWV3IG9ubHlcIjtcbmNvbnN0IHF1b3RlID0gXCJRdW90ZVwiO1xuY29uc3QgcXVvdGVkVGV4dCA9IFwicXVvdGVkIHRleHRcIjtcbmNvbnN0IHNob3J0Y3V0cyA9IFwiU2hvcnRjdXRzXCI7XG5jb25zdCBzb3VyY2UgPSBcIlNvdXJjZSBjb2RlXCI7XG5jb25zdCBzeW5jID0gXCJTY3JvbGwgc3luY1wiO1xuY29uc3QgdG9jID0gXCJUYWJsZSBvZiBjb250ZW50c1wiO1xuY29uc3QgdG9wID0gXCJTY3JvbGwgdG8gdG9wXCI7XG5jb25zdCB1bCA9IFwiVW5vcmRlcmVkIGxpc3RcIjtcbmNvbnN0IHVsSXRlbSA9IFwiaXRlbVwiO1xuY29uc3Qgd29yZHMgPSBcIldvcmRzXCI7XG5jb25zdCB3cml0ZSA9IFwiV3JpdGVcIjtcbmNvbnN0IHdyaXRlT25seSA9IFwiV3JpdGUgb25seVwiO1xuY29uc3QgZW4gPSB7XG4gIGJvbGQsXG4gIGJvbGRUZXh0LFxuICBjaGVhdHNoZWV0LFxuICBjbG9zZUhlbHAsXG4gIGNsb3NlVG9jLFxuICBjb2RlLFxuICBjb2RlQmxvY2ssXG4gIGNvZGVMYW5nLFxuICBjb2RlVGV4dCxcbiAgZXhpdEZ1bGxzY3JlZW4sXG4gIGV4aXRQcmV2aWV3T25seSxcbiAgZXhpdFdyaXRlT25seSxcbiAgZnVsbHNjcmVlbixcbiAgaDEsXG4gIGgyLFxuICBoMyxcbiAgaDQsXG4gIGg1LFxuICBoNixcbiAgaGVhZGluZ1RleHQsXG4gIGhlbHAsXG4gIGhyLFxuICBpbWFnZSxcbiAgaW1hZ2VBbHQsXG4gIGltYWdlVGl0bGUsXG4gIGl0YWxpYyxcbiAgaXRhbGljVGV4dCxcbiAgbGltaXRlZCxcbiAgbGluZXMsXG4gIGxpbmssXG4gIGxpbmtUZXh0LFxuICBvbCxcbiAgb2xJdGVtLFxuICBwcmV2aWV3LFxuICBwcmV2aWV3T25seSxcbiAgcXVvdGUsXG4gIHF1b3RlZFRleHQsXG4gIHNob3J0Y3V0cyxcbiAgc291cmNlLFxuICBzeW5jLFxuICB0b2MsXG4gIHRvcCxcbiAgdWwsXG4gIHVsSXRlbSxcbiAgd29yZHMsXG4gIHdyaXRlLFxuICB3cml0ZU9ubHlcbn07XG5jb25zdCBpY29ucyA9IHtcbiAgQ2xvc2U6ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjFlbVwiIGhlaWdodD1cIjFlbVwiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCA0OCA0OFwiPjxwYXRoIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZS13aWR0aD1cIjRcIiBkPVwibTggOCAzMiAzMk04IDQwIDQwIDhcIi8+PC9zdmc+JyxcbiAgSDogJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMWVtXCIgaGVpZ2h0PVwiMWVtXCIgZmlsbD1cIm5vbmVcIiB2aWV3Qm94PVwiMCAwIDQ4IDQ4XCI+PHBhdGggc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlLXdpZHRoPVwiNFwiIGQ9XCJNMTIgNXYzOE0zNiA1djM4TTEyIDI0aDI0XCIvPjwvc3ZnPicsXG4gIEgxOiAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIxZW1cIiBoZWlnaHQ9XCIxZW1cIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgNDggNDhcIj48cGF0aCBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBzdHJva2Utd2lkdGg9XCI0XCIgZD1cIk02IDh2MzJNMjUgOHYzMk02IDI0aDE5TTM0LjIyNiAyNCAzOSAxOS4wMTdWNDBcIi8+PC9zdmc+JyxcbiAgSDI6ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjFlbVwiIGhlaWdodD1cIjFlbVwiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCA0OCA0OFwiPjxwYXRoIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZS13aWR0aD1cIjRcIiBkPVwiTTYgOHYzMk0yNCA4djMyTTcgMjRoMTZNMzIgMjVjMC0zLjE2NyAyLjY2Ny01IDUtNXM1IDEuODMzIDUgNWMwIDUuNy0xMCA5LjkzMy0xMCAxNWgxMFwiLz48L3N2Zz4nLFxuICBIMzogJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMWVtXCIgaGVpZ2h0PVwiMWVtXCIgZmlsbD1cIm5vbmVcIiB2aWV3Qm94PVwiMCAwIDQ4IDQ4XCI+PHBhdGggc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlLXdpZHRoPVwiNFwiIGQ9XCJNNiA4djMyTTI0IDh2MzJNNyAyNGgxNk0zMiAyMGgxMGwtNyA5YzQgMCA3IDIgNyA2cy0zIDUtNSA1Yy0yLjM4MSAwLTQtMS01LTIuMVwiLz48L3N2Zz4nLFxuICBMZXZlbEZvdXJUaXRsZTogJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMWVtXCIgaGVpZ2h0PVwiMWVtXCIgZmlsbD1cIm5vbmVcIiB2aWV3Qm94PVwiMCAwIDQ4IDQ4XCI+PHBhdGggc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlLXdpZHRoPVwiNFwiIGQ9XCJNNiA4djMyTTI0IDh2MzJNNyAyNGgxNk0zOS45NzcgNDBWMjBMMzEgMzIuOTk3djIuMDIzaDEyXCIvPjwvc3ZnPicsXG4gIExldmVsRml2ZVRpdGxlOiAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIxZW1cIiBoZWlnaHQ9XCIxZW1cIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgNDggNDhcIj48cGF0aCBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBzdHJva2Utd2lkdGg9XCI0XCIgZD1cIk02IDh2MzJNMjQgOHYzMk03IDI0aDE2TTQwIDIxLjAxaC04djcuMDI0QzMyIDI4IDM0IDI3IDM3IDI3czQgMi41MzQgNCA2LjUtMSA2LjUtNSA2LjVjLTMgMC00LTItNC0zLjk5MlwiLz48L3N2Zz4nLFxuICBMZXZlbFNpeFRpdGxlOiAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIxZW1cIiBoZWlnaHQ9XCIxZW1cIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgNDggNDhcIj48cGF0aCBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBzdHJva2Utd2lkdGg9XCI0XCIgZD1cIk02IDh2MzJNMjQgOHYzMk03IDI0aDE2XCIvPjxwYXRoIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjRcIiBkPVwiTTM2LjUgNDBhNS41IDUuNSAwIDEgMCAwLTExIDUuNSA1LjUgMCAwIDAgMCAxMVpcIi8+PHBhdGggc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlLXdpZHRoPVwiNFwiIGQ9XCJNNDEuNTk2IDI0Ljc0QzQwLjc3OCAyMi41NDUgMzguODA0IDIxIDM2LjUgMjFjLTMuMDM4IDAtNS41IDIuNjg2LTUuNSA2djdcIi8+PC9zdmc+JyxcbiAgVGV4dEJvbGQ6ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjFlbVwiIGhlaWdodD1cIjFlbVwiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCA0OCA0OFwiPjxwYXRoIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZS13aWR0aD1cIjRcIiBkPVwiTTI0IDI0YzUuNTA2IDAgOS45NjktNC40NzcgOS45NjktMTBTMjkuNTA2IDQgMjQgNEgxMXYyMGgxM1pNMjguMDMxIDQ0QzMzLjUzNyA0NCAzOCAzOS41MjMgMzggMzRzLTQuNDYzLTEwLTkuOTY5LTEwSDExdjIwaDE3LjAzMVpcIiBjbGlwLXJ1bGU9XCJldmVub2RkXCIvPjwvc3ZnPicsXG4gIFRleHRJdGFsaWM6ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjFlbVwiIGhlaWdodD1cIjFlbVwiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCA0OCA0OFwiPjxwYXRoIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZS13aWR0aD1cIjRcIiBkPVwiTTIwIDZoMTZNMTIgNDJoMTZNMjkgNS45NTIgMTkgNDJcIi8+PC9zdmc+JyxcbiAgUXVvdGU6ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjFlbVwiIGhlaWdodD1cIjFlbVwiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCA0OCA0OFwiPjxwYXRoIGZpbGw9XCJjdXJyZW50Q29sb3JcIiBmaWxsLXJ1bGU9XCJldmVub2RkXCIgZD1cIk0xOC44NTMgOS4xMTZDMTEuMzIzIDEzLjk1MiA3LjE0IDE5LjU4IDYuMzAzIDI2LjAwMyA1IDM2IDEzLjk0IDQwLjg5MyAxOC40NyAzNi40OTcgMjMgMzIuMSAyMC4yODUgMjYuNTIgMTcuMDA1IDI0Ljk5NGMtMy4yOC0xLjUyNS01LjI4Ni0uOTk0LTQuOTM2LTMuMDMzLjM1LTIuMDM4IDUuMDE2LTcuNjkgOS4xMTYtMTAuMzIyYS43NDkuNzQ5IDAgMCAwIC4xMTQtMS4wMkwyMC4yODUgOS4zYy0uNDQtLjU3Mi0uODYyLS41NS0xLjQzMi0uMTg1Wk0zOC42NzkgOS4xMTZjLTcuNTMgNC44MzYtMTEuNzE0IDEwLjQ2NS0xMi41NSAxNi44ODctMS4zMDMgOS45OTcgNy42MzcgMTQuODkgMTIuMTY3IDEwLjQ5NCA0LjUzLTQuMzk3IDEuODE1LTkuOTc3LTEuNDY2LTExLjUwMy0zLjI4LTEuNTI1LTUuMjg2LS45OTQtNC45MzYtMy4wMzMuMzUtMi4wMzggNS4wMTctNy42OSA5LjExNy0xMC4zMjJhLjc0OS43NDkgMCAwIDAgLjExMy0xLjAyTDQwLjExIDkuM2MtLjQ0LS41NzItLjg2Mi0uNTUtMS40MzEtLjE4NVpcIiBjbGlwLXJ1bGU9XCJldmVub2RkXCIvPjwvc3ZnPicsXG4gIExpbmtPbmU6ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjFlbVwiIGhlaWdodD1cIjFlbVwiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCA0OCA0OFwiPjxwYXRoIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZS13aWR0aD1cIjRcIiBkPVwibTI2LjI0IDE2LjM3My05LjE0LTkuMTRjLTIuNjYxLTIuNjYxLTcuMDM1LTIuNjAzLTkuNzY4LjEzMS0yLjczNCAyLjczNC0yLjc5MyA3LjEwNy0uMTMxIDkuNzY4bDcuOTM1IDcuOTM2TTMyLjkwMyAyMy4wMDNsNy45MzUgNy45MzVjMi42NjEgMi42NjIgMi42MDMgNy4wMzUtLjEzIDkuNzY5LTIuNzM1IDIuNzM0LTcuMTA4IDIuNzkyLTkuNzcuMTNsLTkuMTQtOS4xNFwiLz48cGF0aCBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBzdHJva2Utd2lkdGg9XCI0XCIgZD1cIk0yNi4xMSAyNi4xNDJjMi43MzMtMi43MzQgMi43OTItNy4xMDguMTMtOS43NjlNMjEuNzk5IDIxLjc5OGMtMi43MzQgMi43MzQtMi43OTIgNy4xMDgtLjEzMSA5Ljc2OVwiLz48L3N2Zz4nLFxuICBQaWM6ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjFlbVwiIGhlaWdodD1cIjFlbVwiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCA0OCA0OFwiPjxwYXRoIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZS13aWR0aD1cIjRcIiBkPVwiTTUgMTBhMiAyIDAgMCAxIDItMmgzNGEyIDIgMCAwIDEgMiAydjI4YTIgMiAwIDAgMS0yIDJIN2EyIDIgMCAwIDEtMi0yVjEwWlwiIGNsaXAtcnVsZT1cImV2ZW5vZGRcIi8+PHBhdGggc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlLXdpZHRoPVwiNFwiIGQ9XCJNMTQuNSAxOGExLjUgMS41IDAgMSAwIDAtMyAxLjUgMS41IDAgMCAwIDAgM1pcIiBjbGlwLXJ1bGU9XCJldmVub2RkXCIvPjxwYXRoIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlLXdpZHRoPVwiNFwiIGQ9XCJtMTUgMjQgNSA0IDYtNyAxNyAxM3Y0YTIgMiAwIDAgMS0yIDJIN2EyIDIgMCAwIDEtMi0ydi00bDEwLTEwWlwiLz48L3N2Zz4nLFxuICBDb2RlOiAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIxZW1cIiBoZWlnaHQ9XCIxZW1cIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgNDggNDhcIj48cGF0aCBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBzdHJva2Utd2lkdGg9XCI0XCIgZD1cIk0xNiAxMyA0IDI1LjQzMiAxNiAzN00zMiAxM2wxMiAxMi40MzJMMzIgMzdcIi8+PHBhdGggc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS13aWR0aD1cIjRcIiBkPVwibTI4IDQtNyA0MFwiLz48L3N2Zz4nLFxuICBDb2RlQnJhY2tldHM6ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjFlbVwiIGhlaWdodD1cIjFlbVwiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCA0OCA0OFwiPjxwYXRoIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZS13aWR0aD1cIjRcIiBkPVwiTTE2IDRjLTIgMC01IDEtNSA1djljMCAzLTUgNS01IDVzNSAyIDUgNXYxMWMwIDQgMyA1IDUgNU0zMiA0YzIgMCA1IDEgNSA1djljMCAzIDUgNSA1IDVzLTUgMi01IDV2MTFjMCA0LTMgNS01IDVcIi8+PC9zdmc+JyxcbiAgTGlzdFR3bzogJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMWVtXCIgaGVpZ2h0PVwiMWVtXCIgZmlsbD1cIm5vbmVcIiB2aWV3Qm94PVwiMCAwIDQ4IDQ4XCI+PHBhdGggc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBzdHJva2Utd2lkdGg9XCI0XCIgZD1cIk05IDQyYTQgNCAwIDEgMCAwLTggNCA0IDAgMCAwIDAgOFpNOSAxNGE0IDQgMCAxIDAgMC04IDQgNCAwIDAgMCAwIDhaTTkgMjhhNCA0IDAgMSAwIDAtOCA0IDQgMCAwIDAgMCA4WlwiLz48cGF0aCBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBzdHJva2Utd2lkdGg9XCI0XCIgZD1cIk0yMSAyNGgyMk0yMSAzOGgyMk0yMSAxMGgyMlwiLz48L3N2Zz4nLFxuICBPcmRlcmVkTGlzdDogJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMWVtXCIgaGVpZ2h0PVwiMWVtXCIgZmlsbD1cIm5vbmVcIiB2aWV3Qm94PVwiMCAwIDQ4IDQ4XCI+PHBhdGggc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlLXdpZHRoPVwiNFwiIGQ9XCJNOSA0djlNMTIgMTNINk0xMiAyN0g2TTYgMjBzMy0zIDUgMC01IDctNSA3TTYgMzQuNXMyLTMgNS0xIDAgNC41IDAgNC41IDMgMi41IDAgNC41LTUtMS01LTFNMTEgMzhIOU05IDQgNiA2TTIxIDI0aDIyTTIxIDM4aDIyTTIxIDEwaDIyXCIvPjwvc3ZnPicsXG4gIERpdmlkaW5nTGluZTogJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMWVtXCIgaGVpZ2h0PVwiMWVtXCIgZmlsbD1cIm5vbmVcIiB2aWV3Qm94PVwiMCAwIDQ4IDQ4XCI+PHBhdGggc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlLXdpZHRoPVwiNFwiIGQ9XCJNNSAyNGgzOE0yMSAzOGg2TTM3IDM4aDZNMjEgMTBoNk01IDM4aDZNNSAxMGg2TTM3IDEwaDZcIi8+PC9zdmc+JyxcbiAgQWxpZ25UZXh0TGVmdE9uZTogJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMWVtXCIgaGVpZ2h0PVwiMWVtXCIgZmlsbD1cIm5vbmVcIiB2aWV3Qm94PVwiMCAwIDQ4IDQ4XCI+PHBhdGggc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBzdHJva2Utd2lkdGg9XCI0XCIgZD1cIk0zOSA2SDlhMyAzIDAgMCAwLTMgM3YzMGEzIDMgMCAwIDAgMyAzaDMwYTMgMyAwIDAgMCAzLTNWOWEzIDMgMCAwIDAtMy0zWlwiLz48cGF0aCBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBzdHJva2Utd2lkdGg9XCI0XCIgZD1cIk0yNiAyNEgxNE0zNCAxNUgxNE0zMiAzM0gxNFwiLz48L3N2Zz4nLFxuICBIZWxwY2VudGVyOiAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIxZW1cIiBoZWlnaHQ9XCIxZW1cIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgNDggNDhcIj48cGF0aCBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZS13aWR0aD1cIjRcIiBkPVwiTTM5IDZIOWEzIDMgMCAwIDAtMyAzdjMwYTMgMyAwIDAgMCAzIDNoMzBhMyAzIDAgMCAwIDMtM1Y5YTMgMyAwIDAgMC0zLTNaXCIvPjxwYXRoIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZS13aWR0aD1cIjRcIiBkPVwiTTI0IDI4LjYyNXYtNGE2IDYgMCAxIDAtNi02XCIvPjxwYXRoIGZpbGw9XCJjdXJyZW50Q29sb3JcIiBmaWxsLXJ1bGU9XCJldmVub2RkXCIgZD1cIk0yNCAzNy42MjVhMi41IDIuNSAwIDEgMCAwLTUgMi41IDIuNSAwIDAgMCAwIDVaXCIgY2xpcC1ydWxlPVwiZXZlbm9kZFwiLz48L3N2Zz4nLFxuICBMZWZ0RXhwYW5kOiAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIxZW1cIiBoZWlnaHQ9XCIxZW1cIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgNDggNDhcIj48cmVjdCB3aWR0aD1cIjI4XCIgaGVpZ2h0PVwiMzZcIiB4PVwiNlwiIHk9XCI2XCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlLXdpZHRoPVwiNFwiIHJ4PVwiMlwiLz48cGF0aCBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBzdHJva2Utd2lkdGg9XCI0XCIgZD1cIk00MiA2djM2XCIvPjwvc3ZnPicsXG4gIFJpZ2h0RXhwYW5kOiAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIxZW1cIiBoZWlnaHQ9XCIxZW1cIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgNDggNDhcIj48cmVjdCB3aWR0aD1cIjI4XCIgaGVpZ2h0PVwiMzZcIiB4PVwiMTRcIiB5PVwiNlwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZS13aWR0aD1cIjRcIiByeD1cIjJcIi8+PHBhdGggc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlLXdpZHRoPVwiNFwiIGQ9XCJNNiA2djM2XCIvPjwvc3ZnPicsXG4gIE9mZlNjcmVlbjogJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMWVtXCIgaGVpZ2h0PVwiMWVtXCIgZmlsbD1cIm5vbmVcIiB2aWV3Qm94PVwiMCAwIDQ4IDQ4XCI+PHBhdGggc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlLXdpZHRoPVwiNFwiIGQ9XCJNMzMgNnY5aDlNMTUgNnY5SDZNMTUgNDJ2LTlINk0zMyA0MnYtOWg4LjlcIi8+PC9zdmc+JyxcbiAgRnVsbFNjcmVlbjogJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMWVtXCIgaGVpZ2h0PVwiMWVtXCIgZmlsbD1cIm5vbmVcIiB2aWV3Qm94PVwiMCAwIDQ4IDQ4XCI+PHBhdGggc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlLXdpZHRoPVwiNFwiIGQ9XCJNMzMgNmg5djlNNDIgMzN2OWgtOU0xNSA0Mkg2di05TTYgMTVWNmg5XCIvPjwvc3ZnPicsXG4gIEdpdGh1Yk9uZTogJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMWVtXCIgaGVpZ2h0PVwiMWVtXCIgZmlsbD1cIm5vbmVcIiB2aWV3Qm94PVwiMCAwIDQ4IDQ4XCI+PHBhdGggc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS13aWR0aD1cIjRcIiBkPVwiTTI5LjM0NCAzMC40NzdjMi40MDQtLjUgNC41ODUtMS4zNjYgNi4yOC0yLjYzOEMzOC41MiAyNS42NjggNDAgMjIuMzE0IDQwIDE5YzAtMi4zMjQtLjg4MS00LjQ5NC0yLjQwNy02LjMzMi0uODUtMS4wMjQgMS42MzYtOC42NjctLjU3My03LjYzOC0yLjIxIDEuMDMtNS40NSAzLjMwOC03LjE0NyAyLjgwNUEyMC43MTIgMjAuNzEyIDAgMCAwIDI0IDdjLTEuOCAwLTMuNTMyLjIyMy01LjE0Ny42MzRDMTYuNTA1IDguMjMyIDE0LjI1OSA2IDEyIDUuMDNjLTIuMjYtLjk3LTEuMDI2IDYuOTM0LTEuNjk3IDcuNzY1QzguODQgMTQuNjA1IDggMTYuNzMgOCAxOWMwIDMuMzE0IDEuNzkgNi42NjggNC42ODYgOC44NCAxLjkzIDEuNDQ2IDQuMzQ4IDIuMzY4IDcuMDU0IDIuODIyTTE5Ljc0IDMwLjY2MmMtMS4xNTkgMS4yNzUtMS43MzggMi40ODYtMS43MzggMy42MzJ2OC43MTdNMjkuMzQ1IDMwLjQ3N2MxLjA5NyAxLjQ0IDEuNjQ2IDIuNzM0IDEuNjQ2IDMuODh2OC42NTRNNiAzMS4yMTVjLjg5OS4xMSAxLjU2Ni41MjQgMiAxLjI0LjY1MiAxLjA3NSAzLjA3NCA1LjA2MyA1LjgyNSA1LjA2M2g0LjE3N1wiLz48L3N2Zz4nXG59O1xuZnVuY3Rpb24gY3JlYXRlQ29kZU1pcnJvcigpIHtcbiAgY29uc3QgY29kZW1pcnJvciA9IGZhY3RvcnkoKTtcbiAgdXNlUGxhY2Vob2xkZXIoY29kZW1pcnJvcik7XG4gIHVzZU92ZXJsYXkoY29kZW1pcnJvcik7XG4gIHVzZVhtbChjb2RlbWlycm9yKTtcbiAgdXNlTWFya2Rvd24oY29kZW1pcnJvcik7XG4gIHVzZUdmbShjb2RlbWlycm9yKTtcbiAgdXNlWWFtbChjb2RlbWlycm9yKTtcbiAgdXNlWWFtbEZyb250bWF0dGVyKGNvZGVtaXJyb3IpO1xuICB1c2VDb250aW51ZWxpc3QoY29kZW1pcnJvcik7XG4gIHJldHVybiBjb2RlbWlycm9yO1xufVxuZnVuY3Rpb24gY3JlYXRlRWRpdG9yVXRpbHMoY29kZW1pcnJvciwgZWRpdG9yKSB7XG4gIHJldHVybiB7XG4gICAgLyoqXG4gICAgICogV3JhcCB0ZXh0IHdpdGggZGVjb3JhdG9ycywgZm9yIGV4YW1wbGU6XG4gICAgICpcbiAgICAgKiBgdGV4dCAtPiAqdGV4dCpgXG4gICAgICovXG4gICAgd3JhcFRleHQoYmVmb3JlLCBhZnRlciA9IGJlZm9yZSkge1xuICAgICAgY29uc3QgcmFuZ2UgPSBlZGl0b3Iuc29tZXRoaW5nU2VsZWN0ZWQoKSA/IGVkaXRvci5saXN0U2VsZWN0aW9ucygpWzBdIDogZWRpdG9yLmZpbmRXb3JkQXQoZWRpdG9yLmdldEN1cnNvcigpKTtcbiAgICAgIGNvbnN0IGZyb20gPSByYW5nZS5mcm9tKCk7XG4gICAgICBjb25zdCB0byA9IHJhbmdlLnRvKCk7XG4gICAgICBjb25zdCB0ZXh0MiA9IGVkaXRvci5nZXRSYW5nZShmcm9tLCB0byk7XG4gICAgICBjb25zdCBmcm9tQmVmb3JlID0gY29kZW1pcnJvci5Qb3MoZnJvbS5saW5lLCBmcm9tLmNoIC0gYmVmb3JlLmxlbmd0aCk7XG4gICAgICBjb25zdCB0b0FmdGVyID0gY29kZW1pcnJvci5Qb3ModG8ubGluZSwgdG8uY2ggKyBhZnRlci5sZW5ndGgpO1xuICAgICAgaWYgKGVkaXRvci5nZXRSYW5nZShmcm9tQmVmb3JlLCBmcm9tKSA9PT0gYmVmb3JlICYmIGVkaXRvci5nZXRSYW5nZSh0bywgdG9BZnRlcikgPT09IGFmdGVyKSB7XG4gICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UodGV4dDIsIGZyb21CZWZvcmUsIHRvQWZ0ZXIpO1xuICAgICAgICBlZGl0b3Iuc2V0U2VsZWN0aW9uKFxuICAgICAgICAgIGZyb21CZWZvcmUsXG4gICAgICAgICAgY29kZW1pcnJvci5Qb3MoZnJvbUJlZm9yZS5saW5lLCBmcm9tQmVmb3JlLmNoICsgdGV4dDIubGVuZ3RoKVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShiZWZvcmUgKyB0ZXh0MiArIGFmdGVyLCBmcm9tLCB0byk7XG4gICAgICAgIGNvbnN0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoKTtcbiAgICAgICAgZWRpdG9yLnNldFNlbGVjdGlvbihcbiAgICAgICAgICBjb2RlbWlycm9yLlBvcyhjdXJzb3IubGluZSwgY3Vyc29yLmNoIC0gYWZ0ZXIubGVuZ3RoIC0gdGV4dDIubGVuZ3RoKSxcbiAgICAgICAgICBjb2RlbWlycm9yLlBvcyhjdXJzb3IubGluZSwgY3Vyc29yLmNoIC0gYWZ0ZXIubGVuZ3RoKVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICogcmVwbGFjZSBtdWx0aXBsZSBsaW5lc1xuICAgICAqXG4gICAgICogYGxpbmUgLT4gIyBsaW5lYFxuICAgICAqL1xuICAgIHJlcGxhY2VMaW5lcyhyZXBsYWNlKSB7XG4gICAgICBjb25zdCBbc2VsZWN0aW9uXSA9IGVkaXRvci5saXN0U2VsZWN0aW9ucygpO1xuICAgICAgY29uc3QgcmFuZ2UgPSBbXG4gICAgICAgIGNvZGVtaXJyb3IuUG9zKHNlbGVjdGlvbi5mcm9tKCkubGluZSwgMCksXG4gICAgICAgIGNvZGVtaXJyb3IuUG9zKHNlbGVjdGlvbi50bygpLmxpbmUpXG4gICAgICBdO1xuICAgICAgY29uc3QgbGluZXMyID0gZWRpdG9yLmdldFJhbmdlKC4uLnJhbmdlKS5zcGxpdChcIlxcblwiKTtcbiAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UobGluZXMyLm1hcChyZXBsYWNlKS5qb2luKFwiXFxuXCIpLCAuLi5yYW5nZSk7XG4gICAgICBlZGl0b3Iuc2V0U2VsZWN0aW9uKC4uLnJhbmdlKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEFwcGVuZCBhIGJsb2NrIGJhc2VkIG9uIHRoZSBjdXJzb3IgcG9zaXRpb25cbiAgICAgKi9cbiAgICBhcHBlbmRCbG9jayhjb250ZW50KSB7XG4gICAgICBjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XG4gICAgICBsZXQgZW1wdHlMaW5lID0gLTE7XG4gICAgICBmb3IgKGxldCBpID0gY3Vyc29yLmxpbmU7IGkgPCBlZGl0b3IubGluZUNvdW50KCk7IGkrKykge1xuICAgICAgICBpZiAoIWVkaXRvci5nZXRMaW5lKGkpLnRyaW0oKSkge1xuICAgICAgICAgIGVtcHR5TGluZSA9IGk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChlbXB0eUxpbmUgPT09IC0xKSB7XG4gICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UoXCJcXG5cIiwgY29kZW1pcnJvci5Qb3MoZWRpdG9yLmxpbmVDb3VudCgpKSk7XG4gICAgICAgIGVtcHR5TGluZSA9IGVkaXRvci5saW5lQ291bnQoKTtcbiAgICAgIH1cbiAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UoXCJcXG5cIiArIGNvbnRlbnQsIGNvZGVtaXJyb3IuUG9zKGVtcHR5TGluZSkpO1xuICAgICAgcmV0dXJuIGNvZGVtaXJyb3IuUG9zKGVtcHR5TGluZSArIDEsIDApO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcnMgYSB2aXJ0dWFsIGZpbGUgaW5wdXQgYW5kIGxldCB1c2VyIHNlbGVjdCBmaWxlc1xuICAgICAqXG4gICAgICogaHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2Uvc2VsZWN0LWZpbGVzXG4gICAgICovXG4gICAgc2VsZWN0RmlsZXNcbiAgfTtcbn1cbmZ1bmN0aW9uIGZpbmRTdGFydEluZGV4KG51bSwgbnVtcykge1xuICBsZXQgc3RhcnRJbmRleCA9IG51bXMubGVuZ3RoIC0gMjtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKG51bSA8IG51bXNbaV0pIHtcbiAgICAgIHN0YXJ0SW5kZXggPSBpIC0gMTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICBzdGFydEluZGV4ID0gTWF0aC5tYXgoc3RhcnRJbmRleCwgMCk7XG4gIHJldHVybiBzdGFydEluZGV4O1xufVxuY29uc3QgZ2V0U2hvcnRjdXRXaXRoUHJlZml4ID0gKGtleSwgc2hpZnQgPSBmYWxzZSkgPT4ge1xuICBjb25zdCBzaGlmdFByZWZpeCA9IHNoaWZ0ID8gXCJTaGlmdC1cIiA6IFwiXCI7XG4gIGNvbnN0IENtZFByZWZpeCA9IHR5cGVvZiBuYXZpZ2F0b3IgIT09IFwidW5kZWZpbmVkXCIgJiYgL01hYy8udGVzdChuYXZpZ2F0b3IucGxhdGZvcm0pID8gXCJDbWQtXCIgOiBcIkN0cmwtXCI7XG4gIHJldHVybiBzaGlmdFByZWZpeCArIENtZFByZWZpeCArIGtleTtcbn07XG5hc3luYyBmdW5jdGlvbiBoYW5kbGVJbWFnZVVwbG9hZCh7IGVkaXRvciwgYXBwZW5kQmxvY2ssIGNvZGVtaXJyb3IgfSwgdXBsb2FkSW1hZ2VzLCBmaWxlcykge1xuICBjb25zdCBpbWdzID0gYXdhaXQgdXBsb2FkSW1hZ2VzKGZpbGVzKTtcbiAgY29uc3QgcG9zID0gYXBwZW5kQmxvY2soXG4gICAgaW1ncy5tYXAoKHsgdXJsLCBhbHQsIHRpdGxlIH0sIGkpID0+IHtcbiAgICAgIGFsdCA9IGFsdCAhPSBudWxsID8gYWx0IDogZmlsZXNbaV0ubmFtZTtcbiAgICAgIHJldHVybiBgIVske2FsdH1dKCR7dXJsfSR7dGl0bGUgPyBgIFwiJHt0aXRsZX1cImAgOiBcIlwifSlgO1xuICAgIH0pLmpvaW4oXCJcXG5cXG5cIilcbiAgKTtcbiAgZWRpdG9yLnNldFNlbGVjdGlvbihwb3MsIGNvZGVtaXJyb3IuUG9zKHBvcy5saW5lICsgaW1ncy5sZW5ndGggKiAyIC0gMikpO1xuICBlZGl0b3IuZm9jdXMoKTtcbn1cbmZ1bmN0aW9uIGdldEJ1aWx0aW5BY3Rpb25zKGxvY2FsZSwgcGx1Z2lucywgdXBsb2FkSW1hZ2VzKSB7XG4gIGNvbnN0IGxlZnRBY3Rpb25zID0gW1xuICAgIHtcbiAgICAgIGljb246IGljb25zLkgsXG4gICAgICBoYW5kbGVyOiB7XG4gICAgICAgIHR5cGU6IFwiZHJvcGRvd25cIixcbiAgICAgICAgYWN0aW9uczogWzEsIDIsIDMsIDQsIDUsIDZdLm1hcCgobGV2ZWwpID0+ICh7XG4gICAgICAgICAgdGl0bGU6IGxvY2FsZVtgaCR7bGV2ZWx9YF0sXG4gICAgICAgICAgaWNvbjogW1xuICAgICAgICAgICAgaWNvbnMuSDEsXG4gICAgICAgICAgICBpY29ucy5IMixcbiAgICAgICAgICAgIGljb25zLkgzLFxuICAgICAgICAgICAgaWNvbnMuTGV2ZWxGb3VyVGl0bGUsXG4gICAgICAgICAgICBpY29ucy5MZXZlbEZpdmVUaXRsZSxcbiAgICAgICAgICAgIGljb25zLkxldmVsU2l4VGl0bGVcbiAgICAgICAgICBdW2xldmVsIC0gMV0sXG4gICAgICAgICAgY2hlYXRzaGVldDogbGV2ZWwgPD0gMyA/IGAke1wiI1wiLnJlcGVhdChsZXZlbCl9ICR7bG9jYWxlLmhlYWRpbmdUZXh0fWAgOiB2b2lkIDAsXG4gICAgICAgICAgaGFuZGxlcjoge1xuICAgICAgICAgICAgdHlwZTogXCJhY3Rpb25cIixcbiAgICAgICAgICAgIGNsaWNrKHsgcmVwbGFjZUxpbmVzLCBlZGl0b3IgfSkge1xuICAgICAgICAgICAgICByZXBsYWNlTGluZXMoKGxpbmUpID0+IHtcbiAgICAgICAgICAgICAgICBsaW5lID0gbGluZS50cmltKCkucmVwbGFjZSgvXiMqLywgXCJcIikudHJpbSgpO1xuICAgICAgICAgICAgICAgIGxpbmUgPSBcIiNcIi5yZXBlYXQobGV2ZWwpICsgXCIgXCIgKyBsaW5lO1xuICAgICAgICAgICAgICAgIHJldHVybiBsaW5lO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgZWRpdG9yLmZvY3VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KSlcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiBsb2NhbGUuYm9sZCxcbiAgICAgIGljb246IGljb25zLlRleHRCb2xkLFxuICAgICAgY2hlYXRzaGVldDogYCoqJHtsb2NhbGUuYm9sZFRleHR9KipgLFxuICAgICAgaGFuZGxlcjoge1xuICAgICAgICB0eXBlOiBcImFjdGlvblwiLFxuICAgICAgICBzaG9ydGN1dDogZ2V0U2hvcnRjdXRXaXRoUHJlZml4KFwiQlwiKSxcbiAgICAgICAgY2xpY2soeyB3cmFwVGV4dCwgZWRpdG9yIH0pIHtcbiAgICAgICAgICB3cmFwVGV4dChcIioqXCIpO1xuICAgICAgICAgIGVkaXRvci5mb2N1cygpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICB0aXRsZTogbG9jYWxlLml0YWxpYyxcbiAgICAgIGljb246IGljb25zLlRleHRJdGFsaWMsXG4gICAgICBjaGVhdHNoZWV0OiBgKiR7bG9jYWxlLml0YWxpY1RleHR9KmAsXG4gICAgICBoYW5kbGVyOiB7XG4gICAgICAgIHR5cGU6IFwiYWN0aW9uXCIsXG4gICAgICAgIHNob3J0Y3V0OiBnZXRTaG9ydGN1dFdpdGhQcmVmaXgoXCJJXCIpLFxuICAgICAgICBjbGljayh7IHdyYXBUZXh0LCBlZGl0b3IgfSkge1xuICAgICAgICAgIHdyYXBUZXh0KFwiKlwiKTtcbiAgICAgICAgICBlZGl0b3IuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6IGxvY2FsZS5xdW90ZSxcbiAgICAgIGljb246IGljb25zLlF1b3RlLFxuICAgICAgY2hlYXRzaGVldDogYD4gJHtsb2NhbGUucXVvdGVkVGV4dH1gLFxuICAgICAgaGFuZGxlcjoge1xuICAgICAgICB0eXBlOiBcImFjdGlvblwiLFxuICAgICAgICBjbGljayh7IHJlcGxhY2VMaW5lcywgZWRpdG9yIH0pIHtcbiAgICAgICAgICByZXBsYWNlTGluZXMoKGxpbmUpID0+IFwiPiBcIiArIGxpbmUpO1xuICAgICAgICAgIGVkaXRvci5mb2N1cygpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICB0aXRsZTogbG9jYWxlLmxpbmssXG4gICAgICBpY29uOiBpY29ucy5MaW5rT25lLFxuICAgICAgY2hlYXRzaGVldDogYFske2xvY2FsZS5saW5rVGV4dH1dKHVybClgLFxuICAgICAgaGFuZGxlcjoge1xuICAgICAgICB0eXBlOiBcImFjdGlvblwiLFxuICAgICAgICBzaG9ydGN1dDogZ2V0U2hvcnRjdXRXaXRoUHJlZml4KFwiS1wiKSxcbiAgICAgICAgY2xpY2soeyBlZGl0b3IsIHdyYXBUZXh0LCBjb2RlbWlycm9yIH0pIHtcbiAgICAgICAgICB3cmFwVGV4dChcIltcIiwgXCJdKHVybClcIik7XG4gICAgICAgICAgY29uc3QgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xuICAgICAgICAgIGVkaXRvci5zZXRTZWxlY3Rpb24oXG4gICAgICAgICAgICBjb2RlbWlycm9yLlBvcyhjdXJzb3IubGluZSwgY3Vyc29yLmNoICsgMiksXG4gICAgICAgICAgICBjb2RlbWlycm9yLlBvcyhjdXJzb3IubGluZSwgY3Vyc29yLmNoICsgNSlcbiAgICAgICAgICApO1xuICAgICAgICAgIGVkaXRvci5mb2N1cygpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICB0aXRsZTogbG9jYWxlLmltYWdlLFxuICAgICAgaWNvbjogaWNvbnMuUGljLFxuICAgICAgY2hlYXRzaGVldDogYCFbJHtsb2NhbGUuaW1hZ2VBbHR9XSh1cmwgXCIke2xvY2FsZS5pbWFnZVRpdGxlfVwiKWAsXG4gICAgICBoYW5kbGVyOiB1cGxvYWRJbWFnZXMgPyB7XG4gICAgICAgIHR5cGU6IFwiYWN0aW9uXCIsXG4gICAgICAgIHNob3J0Y3V0OiBnZXRTaG9ydGN1dFdpdGhQcmVmaXgoXCJJXCIsIHRydWUpLFxuICAgICAgICBhc3luYyBjbGljayhjdHgpIHtcbiAgICAgICAgICBjb25zdCBmaWxlTGlzdCA9IGF3YWl0IHNlbGVjdEZpbGVzKHtcbiAgICAgICAgICAgIGFjY2VwdDogXCJpbWFnZS8qXCIsXG4gICAgICAgICAgICBtdWx0aXBsZTogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGlmIChmaWxlTGlzdCA9PSBudWxsID8gdm9pZCAwIDogZmlsZUxpc3QubGVuZ3RoKSB7XG4gICAgICAgICAgICBhd2FpdCBoYW5kbGVJbWFnZVVwbG9hZChjdHgsIHVwbG9hZEltYWdlcywgQXJyYXkuZnJvbShmaWxlTGlzdCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSA6IHZvaWQgMFxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6IGxvY2FsZS5jb2RlLFxuICAgICAgaWNvbjogaWNvbnMuQ29kZSxcbiAgICAgIGNoZWF0c2hlZXQ6IFwiYFwiICsgbG9jYWxlLmNvZGVUZXh0ICsgXCJgXCIsXG4gICAgICBoYW5kbGVyOiB7XG4gICAgICAgIHR5cGU6IFwiYWN0aW9uXCIsXG4gICAgICAgIHNob3J0Y3V0OiBnZXRTaG9ydGN1dFdpdGhQcmVmaXgoXCJLXCIsIHRydWUpLFxuICAgICAgICBjbGljayh7IHdyYXBUZXh0LCBlZGl0b3IgfSkge1xuICAgICAgICAgIHdyYXBUZXh0KFwiYFwiKTtcbiAgICAgICAgICBlZGl0b3IuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6IGxvY2FsZS5jb2RlQmxvY2ssXG4gICAgICBpY29uOiBpY29ucy5Db2RlQnJhY2tldHMsXG4gICAgICBjaGVhdHNoZWV0OiBcImBgYFwiICsgbG9jYWxlLmNvZGVMYW5nICsgXCLihrVcIixcbiAgICAgIGhhbmRsZXI6IHtcbiAgICAgICAgdHlwZTogXCJhY3Rpb25cIixcbiAgICAgICAgc2hvcnRjdXQ6IGdldFNob3J0Y3V0V2l0aFByZWZpeChcIkNcIiwgdHJ1ZSksXG4gICAgICAgIGNsaWNrKHsgZWRpdG9yLCBhcHBlbmRCbG9jaywgY29kZW1pcnJvciB9KSB7XG4gICAgICAgICAgY29uc3QgcG9zID0gYXBwZW5kQmxvY2soXCJgYGBqc1xcbmBgYFwiKTtcbiAgICAgICAgICBlZGl0b3Iuc2V0U2VsZWN0aW9uKFxuICAgICAgICAgICAgY29kZW1pcnJvci5Qb3MocG9zLmxpbmUsIDMpLFxuICAgICAgICAgICAgY29kZW1pcnJvci5Qb3MocG9zLmxpbmUsIDUpXG4gICAgICAgICAgKTtcbiAgICAgICAgICBlZGl0b3IuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6IGxvY2FsZS51bCxcbiAgICAgIGljb246IGljb25zLkxpc3RUd28sXG4gICAgICBjaGVhdHNoZWV0OiBgLSAke2xvY2FsZS51bEl0ZW19YCxcbiAgICAgIGhhbmRsZXI6IHtcbiAgICAgICAgdHlwZTogXCJhY3Rpb25cIixcbiAgICAgICAgc2hvcnRjdXQ6IGdldFNob3J0Y3V0V2l0aFByZWZpeChcIlVcIiwgdHJ1ZSksXG4gICAgICAgIGNsaWNrKHsgcmVwbGFjZUxpbmVzLCBlZGl0b3IgfSkge1xuICAgICAgICAgIHJlcGxhY2VMaW5lcygobGluZSkgPT4gXCItIFwiICsgbGluZSk7XG4gICAgICAgICAgZWRpdG9yLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiBsb2NhbGUub2wsXG4gICAgICBpY29uOiBpY29ucy5PcmRlcmVkTGlzdCxcbiAgICAgIGNoZWF0c2hlZXQ6IGAxLiAke2xvY2FsZS5vbEl0ZW19YCxcbiAgICAgIGhhbmRsZXI6IHtcbiAgICAgICAgdHlwZTogXCJhY3Rpb25cIixcbiAgICAgICAgc2hvcnRjdXQ6IGdldFNob3J0Y3V0V2l0aFByZWZpeChcIk9cIiwgdHJ1ZSksXG4gICAgICAgIGNsaWNrKHsgcmVwbGFjZUxpbmVzLCBlZGl0b3IgfSkge1xuICAgICAgICAgIHJlcGxhY2VMaW5lcygobGluZSwgaSkgPT4gYCR7aSArIDF9LiAke2xpbmV9YCk7XG4gICAgICAgICAgZWRpdG9yLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiBsb2NhbGUuaHIsXG4gICAgICBpY29uOiBpY29ucy5EaXZpZGluZ0xpbmUsXG4gICAgICBjaGVhdHNoZWV0OiBcIi0tLVwiXG4gICAgfVxuICBdO1xuICBjb25zdCByaWdodEFjdGlvbnMgPSBbXTtcbiAgcGx1Z2lucy5mb3JFYWNoKCh7IGFjdGlvbnMgfSkgPT4ge1xuICAgIGlmIChhY3Rpb25zKSB7XG4gICAgICBhY3Rpb25zLmZvckVhY2goKGFjdGlvbikgPT4ge1xuICAgICAgICBpZiAoIWFjdGlvbi5wb3NpdGlvbiB8fCBhY3Rpb24ucG9zaXRpb24gIT09IFwicmlnaHRcIilcbiAgICAgICAgICBsZWZ0QWN0aW9ucy5wdXNoKGFjdGlvbik7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICByaWdodEFjdGlvbnMudW5zaGlmdChhY3Rpb24pO1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHtcbiAgICBsZWZ0QWN0aW9ucyxcbiAgICByaWdodEFjdGlvbnNcbiAgfTtcbn1cbmZ1bmN0aW9uIGdldF9lYWNoX2NvbnRleHQkMihjdHgsIGxpc3QsIGkpIHtcbiAgY29uc3QgY2hpbGRfY3R4ID0gY3R4LnNsaWNlKCk7XG4gIGNoaWxkX2N0eFs1XSA9IGxpc3RbaV07XG4gIHJldHVybiBjaGlsZF9jdHg7XG59XG5mdW5jdGlvbiBnZXRfZWFjaF9jb250ZXh0XzEkMShjdHgsIGxpc3QsIGkpIHtcbiAgY29uc3QgY2hpbGRfY3R4ID0gY3R4LnNsaWNlKCk7XG4gIGNoaWxkX2N0eFs1XSA9IGxpc3RbaV07XG4gIHJldHVybiBjaGlsZF9jdHg7XG59XG5mdW5jdGlvbiBjcmVhdGVfaWZfYmxvY2tfMSQyKGN0eCkge1xuICBsZXQgbGk7XG4gIGxldCBkaXYwO1xuICBsZXQgcmF3X3ZhbHVlID0gKFxuICAgIC8qYWN0aW9uKi9cbiAgICBjdHhbNV0uaWNvbiArIFwiXCJcbiAgKTtcbiAgbGV0IGRpdjE7XG4gIGxldCB0MF92YWx1ZSA9IChcbiAgICAvKmFjdGlvbiovXG4gICAgY3R4WzVdLnRpdGxlICsgXCJcIlxuICApO1xuICBsZXQgdDA7XG4gIGxldCBkaXYyO1xuICBsZXQgY29kZTI7XG4gIGxldCB0MV92YWx1ZSA9IChcbiAgICAvKmFjdGlvbiovXG4gICAgY3R4WzVdLmNoZWF0c2hlZXQgKyBcIlwiXG4gICk7XG4gIGxldCB0MTtcbiAgcmV0dXJuIHtcbiAgICBjKCkge1xuICAgICAgbGkgPSBlbGVtZW50KFwibGlcIik7XG4gICAgICBkaXYwID0gZWxlbWVudChcImRpdlwiKTtcbiAgICAgIGRpdjEgPSBlbGVtZW50KFwiZGl2XCIpO1xuICAgICAgdDAgPSB0ZXh0KHQwX3ZhbHVlKTtcbiAgICAgIGRpdjIgPSBlbGVtZW50KFwiZGl2XCIpO1xuICAgICAgY29kZTIgPSBlbGVtZW50KFwiY29kZVwiKTtcbiAgICAgIHQxID0gdGV4dCh0MV92YWx1ZSk7XG4gICAgICBhdHRyKGRpdjAsIFwiY2xhc3NcIiwgXCJieXRlbWQtaGVscC1pY29uXCIpO1xuICAgICAgYXR0cihkaXYxLCBcImNsYXNzXCIsIFwiYnl0ZW1kLWhlbHAtdGl0bGVcIik7XG4gICAgICBhdHRyKGRpdjIsIFwiY2xhc3NcIiwgXCJieXRlbWQtaGVscC1jb250ZW50XCIpO1xuICAgIH0sXG4gICAgbSh0YXJnZXQsIGFuY2hvcikge1xuICAgICAgaW5zZXJ0KHRhcmdldCwgbGksIGFuY2hvcik7XG4gICAgICBhcHBlbmQobGksIGRpdjApO1xuICAgICAgZGl2MC5pbm5lckhUTUwgPSByYXdfdmFsdWU7XG4gICAgICBhcHBlbmQobGksIGRpdjEpO1xuICAgICAgYXBwZW5kKGRpdjEsIHQwKTtcbiAgICAgIGFwcGVuZChsaSwgZGl2Mik7XG4gICAgICBhcHBlbmQoZGl2MiwgY29kZTIpO1xuICAgICAgYXBwZW5kKGNvZGUyLCB0MSk7XG4gICAgfSxcbiAgICBwKGN0eDIsIGRpcnR5KSB7XG4gICAgICBpZiAoZGlydHkgJiAvKml0ZW1zKi9cbiAgICAgIDQgJiYgcmF3X3ZhbHVlICE9PSAocmF3X3ZhbHVlID0gLyphY3Rpb24qL1xuICAgICAgY3R4Mls1XS5pY29uICsgXCJcIikpXG4gICAgICAgIGRpdjAuaW5uZXJIVE1MID0gcmF3X3ZhbHVlO1xuICAgICAgaWYgKGRpcnR5ICYgLyppdGVtcyovXG4gICAgICA0ICYmIHQwX3ZhbHVlICE9PSAodDBfdmFsdWUgPSAvKmFjdGlvbiovXG4gICAgICBjdHgyWzVdLnRpdGxlICsgXCJcIikpXG4gICAgICAgIHNldF9kYXRhKHQwLCB0MF92YWx1ZSk7XG4gICAgICBpZiAoZGlydHkgJiAvKml0ZW1zKi9cbiAgICAgIDQgJiYgdDFfdmFsdWUgIT09ICh0MV92YWx1ZSA9IC8qYWN0aW9uKi9cbiAgICAgIGN0eDJbNV0uY2hlYXRzaGVldCArIFwiXCIpKVxuICAgICAgICBzZXRfZGF0YSh0MSwgdDFfdmFsdWUpO1xuICAgIH0sXG4gICAgZChkZXRhY2hpbmcpIHtcbiAgICAgIGlmIChkZXRhY2hpbmcpXG4gICAgICAgIGRldGFjaChsaSk7XG4gICAgfVxuICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlX2VhY2hfYmxvY2tfMSQxKGN0eCkge1xuICBsZXQgaWZfYmxvY2tfYW5jaG9yO1xuICBsZXQgaWZfYmxvY2sgPSAoXG4gICAgLyphY3Rpb24qL1xuICAgIGN0eFs1XS5jaGVhdHNoZWV0ICYmIGNyZWF0ZV9pZl9ibG9ja18xJDIoY3R4KVxuICApO1xuICByZXR1cm4ge1xuICAgIGMoKSB7XG4gICAgICBpZiAoaWZfYmxvY2spXG4gICAgICAgIGlmX2Jsb2NrLmMoKTtcbiAgICAgIGlmX2Jsb2NrX2FuY2hvciA9IGVtcHR5KCk7XG4gICAgfSxcbiAgICBtKHRhcmdldCwgYW5jaG9yKSB7XG4gICAgICBpZiAoaWZfYmxvY2spXG4gICAgICAgIGlmX2Jsb2NrLm0odGFyZ2V0LCBhbmNob3IpO1xuICAgICAgaW5zZXJ0KHRhcmdldCwgaWZfYmxvY2tfYW5jaG9yLCBhbmNob3IpO1xuICAgIH0sXG4gICAgcChjdHgyLCBkaXJ0eSkge1xuICAgICAgaWYgKFxuICAgICAgICAvKmFjdGlvbiovXG4gICAgICAgIGN0eDJbNV0uY2hlYXRzaGVldFxuICAgICAgKSB7XG4gICAgICAgIGlmIChpZl9ibG9jaykge1xuICAgICAgICAgIGlmX2Jsb2NrLnAoY3R4MiwgZGlydHkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmX2Jsb2NrID0gY3JlYXRlX2lmX2Jsb2NrXzEkMihjdHgyKTtcbiAgICAgICAgICBpZl9ibG9jay5jKCk7XG4gICAgICAgICAgaWZfYmxvY2subShpZl9ibG9ja19hbmNob3IucGFyZW50Tm9kZSwgaWZfYmxvY2tfYW5jaG9yKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChpZl9ibG9jaykge1xuICAgICAgICBpZl9ibG9jay5kKDEpO1xuICAgICAgICBpZl9ibG9jayA9IG51bGw7XG4gICAgICB9XG4gICAgfSxcbiAgICBkKGRldGFjaGluZykge1xuICAgICAgaWYgKGlmX2Jsb2NrKVxuICAgICAgICBpZl9ibG9jay5kKGRldGFjaGluZyk7XG4gICAgICBpZiAoZGV0YWNoaW5nKVxuICAgICAgICBkZXRhY2goaWZfYmxvY2tfYW5jaG9yKTtcbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiBjcmVhdGVfaWZfYmxvY2skMyhjdHgpIHtcbiAgbGV0IGxpO1xuICBsZXQgZGl2MDtcbiAgbGV0IHJhd192YWx1ZSA9IChcbiAgICAvKmFjdGlvbiovXG4gICAgY3R4WzVdLmljb24gKyBcIlwiXG4gICk7XG4gIGxldCBkaXYxO1xuICBsZXQgdDBfdmFsdWUgPSAoXG4gICAgLyphY3Rpb24qL1xuICAgIGN0eFs1XS50aXRsZSArIFwiXCJcbiAgKTtcbiAgbGV0IHQwO1xuICBsZXQgZGl2MjtcbiAgbGV0IGtiZDtcbiAgbGV0IHQxX3ZhbHVlID0gKFxuICAgIC8qYWN0aW9uKi9cbiAgICBjdHhbNV0uaGFuZGxlci5zaG9ydGN1dCArIFwiXCJcbiAgKTtcbiAgbGV0IHQxO1xuICByZXR1cm4ge1xuICAgIGMoKSB7XG4gICAgICBsaSA9IGVsZW1lbnQoXCJsaVwiKTtcbiAgICAgIGRpdjAgPSBlbGVtZW50KFwiZGl2XCIpO1xuICAgICAgZGl2MSA9IGVsZW1lbnQoXCJkaXZcIik7XG4gICAgICB0MCA9IHRleHQodDBfdmFsdWUpO1xuICAgICAgZGl2MiA9IGVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBrYmQgPSBlbGVtZW50KFwia2JkXCIpO1xuICAgICAgdDEgPSB0ZXh0KHQxX3ZhbHVlKTtcbiAgICAgIGF0dHIoZGl2MCwgXCJjbGFzc1wiLCBcImJ5dGVtZC1oZWxwLWljb25cIik7XG4gICAgICBhdHRyKGRpdjEsIFwiY2xhc3NcIiwgXCJieXRlbWQtaGVscC10aXRsZVwiKTtcbiAgICAgIGF0dHIoZGl2MiwgXCJjbGFzc1wiLCBcImJ5dGVtZC1oZWxwLWNvbnRlbnRcIik7XG4gICAgfSxcbiAgICBtKHRhcmdldCwgYW5jaG9yKSB7XG4gICAgICBpbnNlcnQodGFyZ2V0LCBsaSwgYW5jaG9yKTtcbiAgICAgIGFwcGVuZChsaSwgZGl2MCk7XG4gICAgICBkaXYwLmlubmVySFRNTCA9IHJhd192YWx1ZTtcbiAgICAgIGFwcGVuZChsaSwgZGl2MSk7XG4gICAgICBhcHBlbmQoZGl2MSwgdDApO1xuICAgICAgYXBwZW5kKGxpLCBkaXYyKTtcbiAgICAgIGFwcGVuZChkaXYyLCBrYmQpO1xuICAgICAgYXBwZW5kKGtiZCwgdDEpO1xuICAgIH0sXG4gICAgcChjdHgyLCBkaXJ0eSkge1xuICAgICAgaWYgKGRpcnR5ICYgLyppdGVtcyovXG4gICAgICA0ICYmIHJhd192YWx1ZSAhPT0gKHJhd192YWx1ZSA9IC8qYWN0aW9uKi9cbiAgICAgIGN0eDJbNV0uaWNvbiArIFwiXCIpKVxuICAgICAgICBkaXYwLmlubmVySFRNTCA9IHJhd192YWx1ZTtcbiAgICAgIGlmIChkaXJ0eSAmIC8qaXRlbXMqL1xuICAgICAgNCAmJiB0MF92YWx1ZSAhPT0gKHQwX3ZhbHVlID0gLyphY3Rpb24qL1xuICAgICAgY3R4Mls1XS50aXRsZSArIFwiXCIpKVxuICAgICAgICBzZXRfZGF0YSh0MCwgdDBfdmFsdWUpO1xuICAgICAgaWYgKGRpcnR5ICYgLyppdGVtcyovXG4gICAgICA0ICYmIHQxX3ZhbHVlICE9PSAodDFfdmFsdWUgPSAvKmFjdGlvbiovXG4gICAgICBjdHgyWzVdLmhhbmRsZXIuc2hvcnRjdXQgKyBcIlwiKSlcbiAgICAgICAgc2V0X2RhdGEodDEsIHQxX3ZhbHVlKTtcbiAgICB9LFxuICAgIGQoZGV0YWNoaW5nKSB7XG4gICAgICBpZiAoZGV0YWNoaW5nKVxuICAgICAgICBkZXRhY2gobGkpO1xuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZV9lYWNoX2Jsb2NrJDIoY3R4KSB7XG4gIGxldCBpZl9ibG9ja19hbmNob3I7XG4gIGxldCBpZl9ibG9jayA9IChcbiAgICAvKmFjdGlvbiovXG4gICAgY3R4WzVdLmhhbmRsZXIgJiYgLyphY3Rpb24qL1xuICAgIGN0eFs1XS5oYW5kbGVyLnR5cGUgPT09IFwiYWN0aW9uXCIgJiYgLyphY3Rpb24qL1xuICAgIGN0eFs1XS5oYW5kbGVyLnNob3J0Y3V0ICYmIGNyZWF0ZV9pZl9ibG9jayQzKGN0eClcbiAgKTtcbiAgcmV0dXJuIHtcbiAgICBjKCkge1xuICAgICAgaWYgKGlmX2Jsb2NrKVxuICAgICAgICBpZl9ibG9jay5jKCk7XG4gICAgICBpZl9ibG9ja19hbmNob3IgPSBlbXB0eSgpO1xuICAgIH0sXG4gICAgbSh0YXJnZXQsIGFuY2hvcikge1xuICAgICAgaWYgKGlmX2Jsb2NrKVxuICAgICAgICBpZl9ibG9jay5tKHRhcmdldCwgYW5jaG9yKTtcbiAgICAgIGluc2VydCh0YXJnZXQsIGlmX2Jsb2NrX2FuY2hvciwgYW5jaG9yKTtcbiAgICB9LFxuICAgIHAoY3R4MiwgZGlydHkpIHtcbiAgICAgIGlmIChcbiAgICAgICAgLyphY3Rpb24qL1xuICAgICAgICBjdHgyWzVdLmhhbmRsZXIgJiYgLyphY3Rpb24qL1xuICAgICAgICBjdHgyWzVdLmhhbmRsZXIudHlwZSA9PT0gXCJhY3Rpb25cIiAmJiAvKmFjdGlvbiovXG4gICAgICAgIGN0eDJbNV0uaGFuZGxlci5zaG9ydGN1dFxuICAgICAgKSB7XG4gICAgICAgIGlmIChpZl9ibG9jaykge1xuICAgICAgICAgIGlmX2Jsb2NrLnAoY3R4MiwgZGlydHkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmX2Jsb2NrID0gY3JlYXRlX2lmX2Jsb2NrJDMoY3R4Mik7XG4gICAgICAgICAgaWZfYmxvY2suYygpO1xuICAgICAgICAgIGlmX2Jsb2NrLm0oaWZfYmxvY2tfYW5jaG9yLnBhcmVudE5vZGUsIGlmX2Jsb2NrX2FuY2hvcik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoaWZfYmxvY2spIHtcbiAgICAgICAgaWZfYmxvY2suZCgxKTtcbiAgICAgICAgaWZfYmxvY2sgPSBudWxsO1xuICAgICAgfVxuICAgIH0sXG4gICAgZChkZXRhY2hpbmcpIHtcbiAgICAgIGlmIChpZl9ibG9jaylcbiAgICAgICAgaWZfYmxvY2suZChkZXRhY2hpbmcpO1xuICAgICAgaWYgKGRldGFjaGluZylcbiAgICAgICAgZGV0YWNoKGlmX2Jsb2NrX2FuY2hvcik7XG4gICAgfVxuICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlX2ZyYWdtZW50JDUoY3R4KSB7XG4gIGxldCBkaXY7XG4gIGxldCBoMjA7XG4gIGxldCB0MF92YWx1ZSA9IChcbiAgICAvKmxvY2FsZSovXG4gICAgY3R4WzBdLmNoZWF0c2hlZXQgKyBcIlwiXG4gICk7XG4gIGxldCB0MDtcbiAgbGV0IHVsMDtcbiAgbGV0IGgyMTtcbiAgbGV0IHQxX3ZhbHVlID0gKFxuICAgIC8qbG9jYWxlKi9cbiAgICBjdHhbMF0uc2hvcnRjdXRzICsgXCJcIlxuICApO1xuICBsZXQgdDE7XG4gIGxldCB1bDE7XG4gIGxldCBlYWNoX3ZhbHVlXzEgPSAoXG4gICAgLyppdGVtcyovXG4gICAgY3R4WzJdXG4gICk7XG4gIGxldCBlYWNoX2Jsb2Nrc18xID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZWFjaF92YWx1ZV8xLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgZWFjaF9ibG9ja3NfMVtpXSA9IGNyZWF0ZV9lYWNoX2Jsb2NrXzEkMShnZXRfZWFjaF9jb250ZXh0XzEkMShjdHgsIGVhY2hfdmFsdWVfMSwgaSkpO1xuICB9XG4gIGxldCBlYWNoX3ZhbHVlID0gKFxuICAgIC8qaXRlbXMqL1xuICAgIGN0eFsyXVxuICApO1xuICBsZXQgZWFjaF9ibG9ja3MgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBlYWNoX3ZhbHVlLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgZWFjaF9ibG9ja3NbaV0gPSBjcmVhdGVfZWFjaF9ibG9jayQyKGdldF9lYWNoX2NvbnRleHQkMihjdHgsIGVhY2hfdmFsdWUsIGkpKTtcbiAgfVxuICByZXR1cm4ge1xuICAgIGMoKSB7XG4gICAgICBkaXYgPSBlbGVtZW50KFwiZGl2XCIpO1xuICAgICAgaDIwID0gZWxlbWVudChcImgyXCIpO1xuICAgICAgdDAgPSB0ZXh0KHQwX3ZhbHVlKTtcbiAgICAgIHVsMCA9IGVsZW1lbnQoXCJ1bFwiKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWFjaF9ibG9ja3NfMS5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBlYWNoX2Jsb2Nrc18xW2ldLmMoKTtcbiAgICAgIH1cbiAgICAgIGgyMSA9IGVsZW1lbnQoXCJoMlwiKTtcbiAgICAgIHQxID0gdGV4dCh0MV92YWx1ZSk7XG4gICAgICB1bDEgPSBlbGVtZW50KFwidWxcIik7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVhY2hfYmxvY2tzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGVhY2hfYmxvY2tzW2ldLmMoKTtcbiAgICAgIH1cbiAgICAgIGF0dHIoZGl2LCBcImNsYXNzXCIsIFwiYnl0ZW1kLWhlbHBcIik7XG4gICAgICB0b2dnbGVfY2xhc3MoZGl2LCBcImJ5dGVtZC1oaWRkZW5cIiwgIS8qdmlzaWJsZSovXG4gICAgICBjdHhbMV0pO1xuICAgIH0sXG4gICAgbSh0YXJnZXQsIGFuY2hvcikge1xuICAgICAgaW5zZXJ0KHRhcmdldCwgZGl2LCBhbmNob3IpO1xuICAgICAgYXBwZW5kKGRpdiwgaDIwKTtcbiAgICAgIGFwcGVuZChoMjAsIHQwKTtcbiAgICAgIGFwcGVuZChkaXYsIHVsMCk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVhY2hfYmxvY2tzXzEubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgaWYgKGVhY2hfYmxvY2tzXzFbaV0pIHtcbiAgICAgICAgICBlYWNoX2Jsb2Nrc18xW2ldLm0odWwwLCBudWxsKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYXBwZW5kKGRpdiwgaDIxKTtcbiAgICAgIGFwcGVuZChoMjEsIHQxKTtcbiAgICAgIGFwcGVuZChkaXYsIHVsMSk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVhY2hfYmxvY2tzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGlmIChlYWNoX2Jsb2Nrc1tpXSkge1xuICAgICAgICAgIGVhY2hfYmxvY2tzW2ldLm0odWwxLCBudWxsKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgcChjdHgyLCBbZGlydHldKSB7XG4gICAgICBpZiAoZGlydHkgJiAvKmxvY2FsZSovXG4gICAgICAxICYmIHQwX3ZhbHVlICE9PSAodDBfdmFsdWUgPSAvKmxvY2FsZSovXG4gICAgICBjdHgyWzBdLmNoZWF0c2hlZXQgKyBcIlwiKSlcbiAgICAgICAgc2V0X2RhdGEodDAsIHQwX3ZhbHVlKTtcbiAgICAgIGlmIChkaXJ0eSAmIC8qaXRlbXMqL1xuICAgICAgNCkge1xuICAgICAgICBlYWNoX3ZhbHVlXzEgPSAvKml0ZW1zKi9cbiAgICAgICAgY3R4MlsyXTtcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBlYWNoX3ZhbHVlXzEubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICBjb25zdCBjaGlsZF9jdHggPSBnZXRfZWFjaF9jb250ZXh0XzEkMShjdHgyLCBlYWNoX3ZhbHVlXzEsIGkpO1xuICAgICAgICAgIGlmIChlYWNoX2Jsb2Nrc18xW2ldKSB7XG4gICAgICAgICAgICBlYWNoX2Jsb2Nrc18xW2ldLnAoY2hpbGRfY3R4LCBkaXJ0eSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVhY2hfYmxvY2tzXzFbaV0gPSBjcmVhdGVfZWFjaF9ibG9ja18xJDEoY2hpbGRfY3R4KTtcbiAgICAgICAgICAgIGVhY2hfYmxvY2tzXzFbaV0uYygpO1xuICAgICAgICAgICAgZWFjaF9ibG9ja3NfMVtpXS5tKHVsMCwgbnVsbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAoOyBpIDwgZWFjaF9ibG9ja3NfMS5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgIGVhY2hfYmxvY2tzXzFbaV0uZCgxKTtcbiAgICAgICAgfVxuICAgICAgICBlYWNoX2Jsb2Nrc18xLmxlbmd0aCA9IGVhY2hfdmFsdWVfMS5sZW5ndGg7XG4gICAgICB9XG4gICAgICBpZiAoZGlydHkgJiAvKmxvY2FsZSovXG4gICAgICAxICYmIHQxX3ZhbHVlICE9PSAodDFfdmFsdWUgPSAvKmxvY2FsZSovXG4gICAgICBjdHgyWzBdLnNob3J0Y3V0cyArIFwiXCIpKVxuICAgICAgICBzZXRfZGF0YSh0MSwgdDFfdmFsdWUpO1xuICAgICAgaWYgKGRpcnR5ICYgLyppdGVtcyovXG4gICAgICA0KSB7XG4gICAgICAgIGVhY2hfdmFsdWUgPSAvKml0ZW1zKi9cbiAgICAgICAgY3R4MlsyXTtcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBlYWNoX3ZhbHVlLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgY29uc3QgY2hpbGRfY3R4ID0gZ2V0X2VhY2hfY29udGV4dCQyKGN0eDIsIGVhY2hfdmFsdWUsIGkpO1xuICAgICAgICAgIGlmIChlYWNoX2Jsb2Nrc1tpXSkge1xuICAgICAgICAgICAgZWFjaF9ibG9ja3NbaV0ucChjaGlsZF9jdHgsIGRpcnR5KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZWFjaF9ibG9ja3NbaV0gPSBjcmVhdGVfZWFjaF9ibG9jayQyKGNoaWxkX2N0eCk7XG4gICAgICAgICAgICBlYWNoX2Jsb2Nrc1tpXS5jKCk7XG4gICAgICAgICAgICBlYWNoX2Jsb2Nrc1tpXS5tKHVsMSwgbnVsbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAoOyBpIDwgZWFjaF9ibG9ja3MubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICBlYWNoX2Jsb2Nrc1tpXS5kKDEpO1xuICAgICAgICB9XG4gICAgICAgIGVhY2hfYmxvY2tzLmxlbmd0aCA9IGVhY2hfdmFsdWUubGVuZ3RoO1xuICAgICAgfVxuICAgICAgaWYgKGRpcnR5ICYgLyp2aXNpYmxlKi9cbiAgICAgIDIpIHtcbiAgICAgICAgdG9nZ2xlX2NsYXNzKGRpdiwgXCJieXRlbWQtaGlkZGVuXCIsICEvKnZpc2libGUqL1xuICAgICAgICBjdHgyWzFdKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGk6IG5vb3AsXG4gICAgbzogbm9vcCxcbiAgICBkKGRldGFjaGluZykge1xuICAgICAgaWYgKGRldGFjaGluZylcbiAgICAgICAgZGV0YWNoKGRpdik7XG4gICAgICBkZXN0cm95X2VhY2goZWFjaF9ibG9ja3NfMSwgZGV0YWNoaW5nKTtcbiAgICAgIGRlc3Ryb3lfZWFjaChlYWNoX2Jsb2NrcywgZGV0YWNoaW5nKTtcbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiBpbnN0YW5jZSQ1KCQkc2VsZiwgJCRwcm9wcywgJCRpbnZhbGlkYXRlKSB7XG4gIGxldCBpdGVtcztcbiAgbGV0IHsgYWN0aW9ucyB9ID0gJCRwcm9wcztcbiAgbGV0IHsgbG9jYWxlIH0gPSAkJHByb3BzO1xuICBsZXQgeyB2aXNpYmxlIH0gPSAkJHByb3BzO1xuICBmdW5jdGlvbiBmbGF0SXRlbXMoYWN0aW9uczIpIHtcbiAgICBsZXQgaXRlbXMyID0gW107XG4gICAgYWN0aW9uczIuZm9yRWFjaCgoYWN0aW9uKSA9PiB7XG4gICAgICBjb25zdCB7IGhhbmRsZXIsIGNoZWF0c2hlZXQ6IGNoZWF0c2hlZXQyIH0gPSBhY3Rpb247XG4gICAgICBpZiAoKGhhbmRsZXIgPT0gbnVsbCA/IHZvaWQgMCA6IGhhbmRsZXIudHlwZSkgPT09IFwiZHJvcGRvd25cIikge1xuICAgICAgICBpdGVtczIucHVzaCguLi5mbGF0SXRlbXMoaGFuZGxlci5hY3Rpb25zKSk7XG4gICAgICB9XG4gICAgICBpZiAoY2hlYXRzaGVldDIpIHtcbiAgICAgICAgaXRlbXMyLnB1c2goYWN0aW9uKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gaXRlbXMyO1xuICB9XG4gICQkc2VsZi4kJHNldCA9ICgkJHByb3BzMikgPT4ge1xuICAgIGlmIChcImFjdGlvbnNcIiBpbiAkJHByb3BzMilcbiAgICAgICQkaW52YWxpZGF0ZSgzLCBhY3Rpb25zID0gJCRwcm9wczIuYWN0aW9ucyk7XG4gICAgaWYgKFwibG9jYWxlXCIgaW4gJCRwcm9wczIpXG4gICAgICAkJGludmFsaWRhdGUoMCwgbG9jYWxlID0gJCRwcm9wczIubG9jYWxlKTtcbiAgICBpZiAoXCJ2aXNpYmxlXCIgaW4gJCRwcm9wczIpXG4gICAgICAkJGludmFsaWRhdGUoMSwgdmlzaWJsZSA9ICQkcHJvcHMyLnZpc2libGUpO1xuICB9O1xuICAkJHNlbGYuJCQudXBkYXRlID0gKCkgPT4ge1xuICAgIGlmICgkJHNlbGYuJCQuZGlydHkgJiAvKmFjdGlvbnMqL1xuICAgIDgpIHtcbiAgICAgICQkaW52YWxpZGF0ZSgyLCBpdGVtcyA9IGZsYXRJdGVtcyhhY3Rpb25zKSk7XG4gICAgfVxuICB9O1xuICByZXR1cm4gW2xvY2FsZSwgdmlzaWJsZSwgaXRlbXMsIGFjdGlvbnNdO1xufVxuY2xhc3MgSGVscCBleHRlbmRzIFN2ZWx0ZUNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICBzdXBlcigpO1xuICAgIGluaXQodGhpcywgb3B0aW9ucywgaW5zdGFuY2UkNSwgY3JlYXRlX2ZyYWdtZW50JDUsIHNhZmVfbm90X2VxdWFsLCB7IGFjdGlvbnM6IDMsIGxvY2FsZTogMCwgdmlzaWJsZTogMSB9KTtcbiAgfVxufVxuZnVuY3Rpb24gY3JlYXRlX2lmX2Jsb2NrXzEkMShjdHgpIHtcbiAgbGV0IHNwYW47XG4gIGxldCB0X3ZhbHVlID0gKFxuICAgIC8qbG9jYWxlKi9cbiAgICBjdHhbMl0ubGltaXRlZCArIFwiXCJcbiAgKTtcbiAgbGV0IHQ7XG4gIHJldHVybiB7XG4gICAgYygpIHtcbiAgICAgIHNwYW4gPSBlbGVtZW50KFwic3BhblwiKTtcbiAgICAgIHQgPSB0ZXh0KHRfdmFsdWUpO1xuICAgICAgYXR0cihzcGFuLCBcImNsYXNzXCIsIFwiYnl0ZW1kLXN0YXR1cy1lcnJvclwiKTtcbiAgICB9LFxuICAgIG0odGFyZ2V0LCBhbmNob3IpIHtcbiAgICAgIGluc2VydCh0YXJnZXQsIHNwYW4sIGFuY2hvcik7XG4gICAgICBhcHBlbmQoc3BhbiwgdCk7XG4gICAgfSxcbiAgICBwKGN0eDIsIGRpcnR5KSB7XG4gICAgICBpZiAoZGlydHkgJiAvKmxvY2FsZSovXG4gICAgICA0ICYmIHRfdmFsdWUgIT09ICh0X3ZhbHVlID0gLypsb2NhbGUqL1xuICAgICAgY3R4MlsyXS5saW1pdGVkICsgXCJcIikpXG4gICAgICAgIHNldF9kYXRhKHQsIHRfdmFsdWUpO1xuICAgIH0sXG4gICAgZChkZXRhY2hpbmcpIHtcbiAgICAgIGlmIChkZXRhY2hpbmcpXG4gICAgICAgIGRldGFjaChzcGFuKTtcbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiBjcmVhdGVfaWZfYmxvY2skMihjdHgpIHtcbiAgbGV0IGxhYmVsO1xuICBsZXQgaW5wdXQ7XG4gIGxldCB0X3ZhbHVlID0gKFxuICAgIC8qbG9jYWxlKi9cbiAgICBjdHhbMl0uc3luYyArIFwiXCJcbiAgKTtcbiAgbGV0IHQ7XG4gIGxldCBtb3VudGVkO1xuICBsZXQgZGlzcG9zZTtcbiAgcmV0dXJuIHtcbiAgICBjKCkge1xuICAgICAgbGFiZWwgPSBlbGVtZW50KFwibGFiZWxcIik7XG4gICAgICBpbnB1dCA9IGVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgIHQgPSB0ZXh0KHRfdmFsdWUpO1xuICAgICAgYXR0cihpbnB1dCwgXCJ0eXBlXCIsIFwiY2hlY2tib3hcIik7XG4gICAgICBpbnB1dC5jaGVja2VkID0gLypzeW5jRW5hYmxlZCovXG4gICAgICBjdHhbMV07XG4gICAgfSxcbiAgICBtKHRhcmdldCwgYW5jaG9yKSB7XG4gICAgICBpbnNlcnQodGFyZ2V0LCBsYWJlbCwgYW5jaG9yKTtcbiAgICAgIGFwcGVuZChsYWJlbCwgaW5wdXQpO1xuICAgICAgYXBwZW5kKGxhYmVsLCB0KTtcbiAgICAgIGlmICghbW91bnRlZCkge1xuICAgICAgICBkaXNwb3NlID0gbGlzdGVuKFxuICAgICAgICAgIGlucHV0LFxuICAgICAgICAgIFwiY2hhbmdlXCIsXG4gICAgICAgICAgLypjaGFuZ2VfaGFuZGxlciovXG4gICAgICAgICAgY3R4WzhdXG4gICAgICAgICk7XG4gICAgICAgIG1vdW50ZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH0sXG4gICAgcChjdHgyLCBkaXJ0eSkge1xuICAgICAgaWYgKGRpcnR5ICYgLypzeW5jRW5hYmxlZCovXG4gICAgICAyKSB7XG4gICAgICAgIGlucHV0LmNoZWNrZWQgPSAvKnN5bmNFbmFibGVkKi9cbiAgICAgICAgY3R4MlsxXTtcbiAgICAgIH1cbiAgICAgIGlmIChkaXJ0eSAmIC8qbG9jYWxlKi9cbiAgICAgIDQgJiYgdF92YWx1ZSAhPT0gKHRfdmFsdWUgPSAvKmxvY2FsZSovXG4gICAgICBjdHgyWzJdLnN5bmMgKyBcIlwiKSlcbiAgICAgICAgc2V0X2RhdGEodCwgdF92YWx1ZSk7XG4gICAgfSxcbiAgICBkKGRldGFjaGluZykge1xuICAgICAgaWYgKGRldGFjaGluZylcbiAgICAgICAgZGV0YWNoKGxhYmVsKTtcbiAgICAgIG1vdW50ZWQgPSBmYWxzZTtcbiAgICAgIGRpc3Bvc2UoKTtcbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiBjcmVhdGVfZnJhZ21lbnQkNChjdHgpIHtcbiAgbGV0IGRpdjI7XG4gIGxldCBkaXYwO1xuICBsZXQgc3BhbjA7XG4gIGxldCB0MF92YWx1ZSA9IChcbiAgICAvKmxvY2FsZSovXG4gICAgY3R4WzJdLndvcmRzICsgXCJcIlxuICApO1xuICBsZXQgdDA7XG4gIGxldCB0MTtcbiAgbGV0IHN0cm9uZzA7XG4gIGxldCB0MjtcbiAgbGV0IHNwYW4xO1xuICBsZXQgdDNfdmFsdWUgPSAoXG4gICAgLypsb2NhbGUqL1xuICAgIGN0eFsyXS5saW5lcyArIFwiXCJcbiAgKTtcbiAgbGV0IHQzO1xuICBsZXQgdDQ7XG4gIGxldCBzdHJvbmcxO1xuICBsZXQgdDU7XG4gIGxldCBkaXYxO1xuICBsZXQgc3BhbjI7XG4gIGxldCB0Nl92YWx1ZSA9IChcbiAgICAvKmxvY2FsZSovXG4gICAgY3R4WzJdLnRvcCArIFwiXCJcbiAgKTtcbiAgbGV0IHQ2O1xuICBsZXQgbW91bnRlZDtcbiAgbGV0IGRpc3Bvc2U7XG4gIGxldCBpZl9ibG9jazAgPSAoXG4gICAgLyppc2xpbWl0ZWQqL1xuICAgIGN0eFszXSAmJiBjcmVhdGVfaWZfYmxvY2tfMSQxKGN0eClcbiAgKTtcbiAgbGV0IGlmX2Jsb2NrMSA9IChcbiAgICAvKnNob3dTeW5jKi9cbiAgICBjdHhbMF0gJiYgY3JlYXRlX2lmX2Jsb2NrJDIoY3R4KVxuICApO1xuICByZXR1cm4ge1xuICAgIGMoKSB7XG4gICAgICBkaXYyID0gZWxlbWVudChcImRpdlwiKTtcbiAgICAgIGRpdjAgPSBlbGVtZW50KFwiZGl2XCIpO1xuICAgICAgc3BhbjAgPSBlbGVtZW50KFwic3BhblwiKTtcbiAgICAgIHQwID0gdGV4dCh0MF92YWx1ZSk7XG4gICAgICB0MSA9IHRleHQoXCI6IFwiKTtcbiAgICAgIHN0cm9uZzAgPSBlbGVtZW50KFwic3Ryb25nXCIpO1xuICAgICAgdDIgPSB0ZXh0KFxuICAgICAgICAvKndvcmRzKi9cbiAgICAgICAgY3R4WzVdXG4gICAgICApO1xuICAgICAgc3BhbjEgPSBlbGVtZW50KFwic3BhblwiKTtcbiAgICAgIHQzID0gdGV4dCh0M192YWx1ZSk7XG4gICAgICB0NCA9IHRleHQoXCI6IFwiKTtcbiAgICAgIHN0cm9uZzEgPSBlbGVtZW50KFwic3Ryb25nXCIpO1xuICAgICAgdDUgPSB0ZXh0KFxuICAgICAgICAvKmxpbmVzKi9cbiAgICAgICAgY3R4WzRdXG4gICAgICApO1xuICAgICAgaWYgKGlmX2Jsb2NrMClcbiAgICAgICAgaWZfYmxvY2swLmMoKTtcbiAgICAgIGRpdjEgPSBlbGVtZW50KFwiZGl2XCIpO1xuICAgICAgaWYgKGlmX2Jsb2NrMSlcbiAgICAgICAgaWZfYmxvY2sxLmMoKTtcbiAgICAgIHNwYW4yID0gZWxlbWVudChcInNwYW5cIik7XG4gICAgICB0NiA9IHRleHQodDZfdmFsdWUpO1xuICAgICAgYXR0cihkaXYwLCBcImNsYXNzXCIsIFwiYnl0ZW1kLXN0YXR1cy1sZWZ0XCIpO1xuICAgICAgYXR0cihkaXYxLCBcImNsYXNzXCIsIFwiYnl0ZW1kLXN0YXR1cy1yaWdodFwiKTtcbiAgICAgIGF0dHIoZGl2MiwgXCJjbGFzc1wiLCBcImJ5dGVtZC1zdGF0dXNcIik7XG4gICAgfSxcbiAgICBtKHRhcmdldCwgYW5jaG9yKSB7XG4gICAgICBpbnNlcnQodGFyZ2V0LCBkaXYyLCBhbmNob3IpO1xuICAgICAgYXBwZW5kKGRpdjIsIGRpdjApO1xuICAgICAgYXBwZW5kKGRpdjAsIHNwYW4wKTtcbiAgICAgIGFwcGVuZChzcGFuMCwgdDApO1xuICAgICAgYXBwZW5kKHNwYW4wLCB0MSk7XG4gICAgICBhcHBlbmQoc3BhbjAsIHN0cm9uZzApO1xuICAgICAgYXBwZW5kKHN0cm9uZzAsIHQyKTtcbiAgICAgIGFwcGVuZChkaXYwLCBzcGFuMSk7XG4gICAgICBhcHBlbmQoc3BhbjEsIHQzKTtcbiAgICAgIGFwcGVuZChzcGFuMSwgdDQpO1xuICAgICAgYXBwZW5kKHNwYW4xLCBzdHJvbmcxKTtcbiAgICAgIGFwcGVuZChzdHJvbmcxLCB0NSk7XG4gICAgICBpZiAoaWZfYmxvY2swKVxuICAgICAgICBpZl9ibG9jazAubShkaXYwLCBudWxsKTtcbiAgICAgIGFwcGVuZChkaXYyLCBkaXYxKTtcbiAgICAgIGlmIChpZl9ibG9jazEpXG4gICAgICAgIGlmX2Jsb2NrMS5tKGRpdjEsIG51bGwpO1xuICAgICAgYXBwZW5kKGRpdjEsIHNwYW4yKTtcbiAgICAgIGFwcGVuZChzcGFuMiwgdDYpO1xuICAgICAgaWYgKCFtb3VudGVkKSB7XG4gICAgICAgIGRpc3Bvc2UgPSBbXG4gICAgICAgICAgbGlzdGVuKFxuICAgICAgICAgICAgc3BhbjIsXG4gICAgICAgICAgICBcImNsaWNrXCIsXG4gICAgICAgICAgICAvKmNsaWNrX2hhbmRsZXIqL1xuICAgICAgICAgICAgY3R4WzldXG4gICAgICAgICAgKSxcbiAgICAgICAgICBsaXN0ZW4oc3BhbjIsIFwia2V5ZG93blwiLCBzZWxmKFxuICAgICAgICAgICAgLyprZXlkb3duX2hhbmRsZXIqL1xuICAgICAgICAgICAgY3R4WzEwXVxuICAgICAgICAgICkpXG4gICAgICAgIF07XG4gICAgICAgIG1vdW50ZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH0sXG4gICAgcChjdHgyLCBbZGlydHldKSB7XG4gICAgICBpZiAoZGlydHkgJiAvKmxvY2FsZSovXG4gICAgICA0ICYmIHQwX3ZhbHVlICE9PSAodDBfdmFsdWUgPSAvKmxvY2FsZSovXG4gICAgICBjdHgyWzJdLndvcmRzICsgXCJcIikpXG4gICAgICAgIHNldF9kYXRhKHQwLCB0MF92YWx1ZSk7XG4gICAgICBpZiAoZGlydHkgJiAvKndvcmRzKi9cbiAgICAgIDMyKVxuICAgICAgICBzZXRfZGF0YShcbiAgICAgICAgICB0MixcbiAgICAgICAgICAvKndvcmRzKi9cbiAgICAgICAgICBjdHgyWzVdXG4gICAgICAgICk7XG4gICAgICBpZiAoZGlydHkgJiAvKmxvY2FsZSovXG4gICAgICA0ICYmIHQzX3ZhbHVlICE9PSAodDNfdmFsdWUgPSAvKmxvY2FsZSovXG4gICAgICBjdHgyWzJdLmxpbmVzICsgXCJcIikpXG4gICAgICAgIHNldF9kYXRhKHQzLCB0M192YWx1ZSk7XG4gICAgICBpZiAoZGlydHkgJiAvKmxpbmVzKi9cbiAgICAgIDE2KVxuICAgICAgICBzZXRfZGF0YShcbiAgICAgICAgICB0NSxcbiAgICAgICAgICAvKmxpbmVzKi9cbiAgICAgICAgICBjdHgyWzRdXG4gICAgICAgICk7XG4gICAgICBpZiAoXG4gICAgICAgIC8qaXNsaW1pdGVkKi9cbiAgICAgICAgY3R4MlszXVxuICAgICAgKSB7XG4gICAgICAgIGlmIChpZl9ibG9jazApIHtcbiAgICAgICAgICBpZl9ibG9jazAucChjdHgyLCBkaXJ0eSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWZfYmxvY2swID0gY3JlYXRlX2lmX2Jsb2NrXzEkMShjdHgyKTtcbiAgICAgICAgICBpZl9ibG9jazAuYygpO1xuICAgICAgICAgIGlmX2Jsb2NrMC5tKGRpdjAsIG51bGwpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGlmX2Jsb2NrMCkge1xuICAgICAgICBpZl9ibG9jazAuZCgxKTtcbiAgICAgICAgaWZfYmxvY2swID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgLypzaG93U3luYyovXG4gICAgICAgIGN0eDJbMF1cbiAgICAgICkge1xuICAgICAgICBpZiAoaWZfYmxvY2sxKSB7XG4gICAgICAgICAgaWZfYmxvY2sxLnAoY3R4MiwgZGlydHkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmX2Jsb2NrMSA9IGNyZWF0ZV9pZl9ibG9jayQyKGN0eDIpO1xuICAgICAgICAgIGlmX2Jsb2NrMS5jKCk7XG4gICAgICAgICAgaWZfYmxvY2sxLm0oZGl2MSwgc3BhbjIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGlmX2Jsb2NrMSkge1xuICAgICAgICBpZl9ibG9jazEuZCgxKTtcbiAgICAgICAgaWZfYmxvY2sxID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmIChkaXJ0eSAmIC8qbG9jYWxlKi9cbiAgICAgIDQgJiYgdDZfdmFsdWUgIT09ICh0Nl92YWx1ZSA9IC8qbG9jYWxlKi9cbiAgICAgIGN0eDJbMl0udG9wICsgXCJcIikpXG4gICAgICAgIHNldF9kYXRhKHQ2LCB0Nl92YWx1ZSk7XG4gICAgfSxcbiAgICBpOiBub29wLFxuICAgIG86IG5vb3AsXG4gICAgZChkZXRhY2hpbmcpIHtcbiAgICAgIGlmIChkZXRhY2hpbmcpXG4gICAgICAgIGRldGFjaChkaXYyKTtcbiAgICAgIGlmIChpZl9ibG9jazApXG4gICAgICAgIGlmX2Jsb2NrMC5kKCk7XG4gICAgICBpZiAoaWZfYmxvY2sxKVxuICAgICAgICBpZl9ibG9jazEuZCgpO1xuICAgICAgbW91bnRlZCA9IGZhbHNlO1xuICAgICAgcnVuX2FsbChkaXNwb3NlKTtcbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiBpbnN0YW5jZSQ0KCQkc2VsZiwgJCRwcm9wcywgJCRpbnZhbGlkYXRlKSB7XG4gIGxldCB3b3JkczI7XG4gIGxldCBsaW5lczI7XG4gIGxldCB7IHNob3dTeW5jIH0gPSAkJHByb3BzO1xuICBsZXQgeyB2YWx1ZSB9ID0gJCRwcm9wcztcbiAgbGV0IHsgc3luY0VuYWJsZWQgfSA9ICQkcHJvcHM7XG4gIGxldCB7IGxvY2FsZSB9ID0gJCRwcm9wcztcbiAgbGV0IHsgaXNsaW1pdGVkIH0gPSAkJHByb3BzO1xuICBjb25zdCBkaXNwYXRjaCA9IGNyZWF0ZUV2ZW50RGlzcGF0Y2hlcigpO1xuICBjb25zdCBjaGFuZ2VfaGFuZGxlciA9ICgpID0+IGRpc3BhdGNoKFwic3luY1wiLCAhc3luY0VuYWJsZWQpO1xuICBjb25zdCBjbGlja19oYW5kbGVyID0gKCkgPT4gZGlzcGF0Y2goXCJ0b3BcIik7XG4gIGNvbnN0IGtleWRvd25faGFuZGxlciA9IChlKSA9PiBbXCJFbnRlclwiLCBcIlNwYWNlXCJdLmluY2x1ZGVzKGUuY29kZSkgJiYgZGlzcGF0Y2goXCJ0b3BcIik7XG4gICQkc2VsZi4kJHNldCA9ICgkJHByb3BzMikgPT4ge1xuICAgIGlmIChcInNob3dTeW5jXCIgaW4gJCRwcm9wczIpXG4gICAgICAkJGludmFsaWRhdGUoMCwgc2hvd1N5bmMgPSAkJHByb3BzMi5zaG93U3luYyk7XG4gICAgaWYgKFwidmFsdWVcIiBpbiAkJHByb3BzMilcbiAgICAgICQkaW52YWxpZGF0ZSg3LCB2YWx1ZSA9ICQkcHJvcHMyLnZhbHVlKTtcbiAgICBpZiAoXCJzeW5jRW5hYmxlZFwiIGluICQkcHJvcHMyKVxuICAgICAgJCRpbnZhbGlkYXRlKDEsIHN5bmNFbmFibGVkID0gJCRwcm9wczIuc3luY0VuYWJsZWQpO1xuICAgIGlmIChcImxvY2FsZVwiIGluICQkcHJvcHMyKVxuICAgICAgJCRpbnZhbGlkYXRlKDIsIGxvY2FsZSA9ICQkcHJvcHMyLmxvY2FsZSk7XG4gICAgaWYgKFwiaXNsaW1pdGVkXCIgaW4gJCRwcm9wczIpXG4gICAgICAkJGludmFsaWRhdGUoMywgaXNsaW1pdGVkID0gJCRwcm9wczIuaXNsaW1pdGVkKTtcbiAgfTtcbiAgJCRzZWxmLiQkLnVwZGF0ZSA9ICgpID0+IHtcbiAgICBpZiAoJCRzZWxmLiQkLmRpcnR5ICYgLyp2YWx1ZSovXG4gICAgMTI4KSB7XG4gICAgICAkJGludmFsaWRhdGUoNSwgd29yZHMyID0gd29yZENvdW50KHZhbHVlKSk7XG4gICAgfVxuICAgIGlmICgkJHNlbGYuJCQuZGlydHkgJiAvKnZhbHVlKi9cbiAgICAxMjgpIHtcbiAgICAgICQkaW52YWxpZGF0ZSg0LCBsaW5lczIgPSB2YWx1ZS5zcGxpdChcIlxcblwiKS5sZW5ndGgpO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIFtcbiAgICBzaG93U3luYyxcbiAgICBzeW5jRW5hYmxlZCxcbiAgICBsb2NhbGUsXG4gICAgaXNsaW1pdGVkLFxuICAgIGxpbmVzMixcbiAgICB3b3JkczIsXG4gICAgZGlzcGF0Y2gsXG4gICAgdmFsdWUsXG4gICAgY2hhbmdlX2hhbmRsZXIsXG4gICAgY2xpY2tfaGFuZGxlcixcbiAgICBrZXlkb3duX2hhbmRsZXJcbiAgXTtcbn1cbmNsYXNzIFN0YXR1cyBleHRlbmRzIFN2ZWx0ZUNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICBzdXBlcigpO1xuICAgIGluaXQodGhpcywgb3B0aW9ucywgaW5zdGFuY2UkNCwgY3JlYXRlX2ZyYWdtZW50JDQsIHNhZmVfbm90X2VxdWFsLCB7XG4gICAgICBzaG93U3luYzogMCxcbiAgICAgIHZhbHVlOiA3LFxuICAgICAgc3luY0VuYWJsZWQ6IDEsXG4gICAgICBsb2NhbGU6IDIsXG4gICAgICBpc2xpbWl0ZWQ6IDNcbiAgICB9KTtcbiAgfVxufVxuZnVuY3Rpb24gZ2V0X2VhY2hfY29udGV4dCQxKGN0eCwgbGlzdCwgaSkge1xuICBjb25zdCBjaGlsZF9jdHggPSBjdHguc2xpY2UoKTtcbiAgY2hpbGRfY3R4WzExXSA9IGxpc3RbaV07XG4gIGNoaWxkX2N0eFsxM10gPSBpO1xuICByZXR1cm4gY2hpbGRfY3R4O1xufVxuZnVuY3Rpb24gY3JlYXRlX2VhY2hfYmxvY2skMShjdHgpIHtcbiAgbGV0IGxpO1xuICBsZXQgdF92YWx1ZSA9IChcbiAgICAvKml0ZW0qL1xuICAgIGN0eFsxMV0udGV4dCArIFwiXCJcbiAgKTtcbiAgbGV0IHQ7XG4gIGxldCBsaV9jbGFzc192YWx1ZTtcbiAgbGV0IGxpX3N0eWxlX3ZhbHVlO1xuICBsZXQgbW91bnRlZDtcbiAgbGV0IGRpc3Bvc2U7XG4gIGZ1bmN0aW9uIGNsaWNrX2hhbmRsZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIC8qY2xpY2tfaGFuZGxlciovXG4gICAgICBjdHhbOF0oXG4gICAgICAgIC8qaW5kZXgqL1xuICAgICAgICBjdHhbMTNdXG4gICAgICApXG4gICAgKTtcbiAgfVxuICBmdW5jdGlvbiBrZXlkb3duX2hhbmRsZXIoLi4uYXJncykge1xuICAgIHJldHVybiAoXG4gICAgICAvKmtleWRvd25faGFuZGxlciovXG4gICAgICBjdHhbOV0oXG4gICAgICAgIC8qaW5kZXgqL1xuICAgICAgICBjdHhbMTNdLFxuICAgICAgICAuLi5hcmdzXG4gICAgICApXG4gICAgKTtcbiAgfVxuICByZXR1cm4ge1xuICAgIGMoKSB7XG4gICAgICBsaSA9IGVsZW1lbnQoXCJsaVwiKTtcbiAgICAgIHQgPSB0ZXh0KHRfdmFsdWUpO1xuICAgICAgYXR0cihsaSwgXCJjbGFzc1wiLCBsaV9jbGFzc192YWx1ZSA9IGBieXRlbWQtdG9jLSR7LyppdGVtKi9cbiAgICAgIGN0eFsxMV0ubGV2ZWx9YCk7XG4gICAgICBhdHRyKGxpLCBcInN0eWxlXCIsIGxpX3N0eWxlX3ZhbHVlID0gYHBhZGRpbmctbGVmdDokey8qaXRlbSovXG4gICAgICAoY3R4WzExXS5sZXZlbCAtIC8qbWluTGV2ZWwqL1xuICAgICAgY3R4WzNdKSAqIDE2ICsgOH1weGApO1xuICAgICAgdG9nZ2xlX2NsYXNzKFxuICAgICAgICBsaSxcbiAgICAgICAgXCJieXRlbWQtdG9jLWFjdGl2ZVwiLFxuICAgICAgICAvKmN1cnJlbnRIZWFkaW5nSW5kZXgqL1xuICAgICAgICBjdHhbNF0gPT09IC8qaW5kZXgqL1xuICAgICAgICBjdHhbMTNdXG4gICAgICApO1xuICAgICAgdG9nZ2xlX2NsYXNzKFxuICAgICAgICBsaSxcbiAgICAgICAgXCJieXRlbWQtdG9jLWZpcnN0XCIsXG4gICAgICAgIC8qaXRlbSovXG4gICAgICAgIGN0eFsxMV0ubGV2ZWwgPT09IC8qbWluTGV2ZWwqL1xuICAgICAgICBjdHhbM11cbiAgICAgICk7XG4gICAgfSxcbiAgICBtKHRhcmdldCwgYW5jaG9yKSB7XG4gICAgICBpbnNlcnQodGFyZ2V0LCBsaSwgYW5jaG9yKTtcbiAgICAgIGFwcGVuZChsaSwgdCk7XG4gICAgICBpZiAoIW1vdW50ZWQpIHtcbiAgICAgICAgZGlzcG9zZSA9IFtcbiAgICAgICAgICBsaXN0ZW4obGksIFwiY2xpY2tcIiwgY2xpY2tfaGFuZGxlciksXG4gICAgICAgICAgbGlzdGVuKGxpLCBcImtleWRvd25cIiwgc2VsZihrZXlkb3duX2hhbmRsZXIpKVxuICAgICAgICBdO1xuICAgICAgICBtb3VudGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHAobmV3X2N0eCwgZGlydHkpIHtcbiAgICAgIGN0eCA9IG5ld19jdHg7XG4gICAgICBpZiAoZGlydHkgJiAvKml0ZW1zKi9cbiAgICAgIDQgJiYgdF92YWx1ZSAhPT0gKHRfdmFsdWUgPSAvKml0ZW0qL1xuICAgICAgY3R4WzExXS50ZXh0ICsgXCJcIikpXG4gICAgICAgIHNldF9kYXRhKHQsIHRfdmFsdWUpO1xuICAgICAgaWYgKGRpcnR5ICYgLyppdGVtcyovXG4gICAgICA0ICYmIGxpX2NsYXNzX3ZhbHVlICE9PSAobGlfY2xhc3NfdmFsdWUgPSBgYnl0ZW1kLXRvYy0key8qaXRlbSovXG4gICAgICBjdHhbMTFdLmxldmVsfWApKSB7XG4gICAgICAgIGF0dHIobGksIFwiY2xhc3NcIiwgbGlfY2xhc3NfdmFsdWUpO1xuICAgICAgfVxuICAgICAgaWYgKGRpcnR5ICYgLyppdGVtcywgbWluTGV2ZWwqL1xuICAgICAgMTIgJiYgbGlfc3R5bGVfdmFsdWUgIT09IChsaV9zdHlsZV92YWx1ZSA9IGBwYWRkaW5nLWxlZnQ6JHsvKml0ZW0qL1xuICAgICAgKGN0eFsxMV0ubGV2ZWwgLSAvKm1pbkxldmVsKi9cbiAgICAgIGN0eFszXSkgKiAxNiArIDh9cHhgKSkge1xuICAgICAgICBhdHRyKGxpLCBcInN0eWxlXCIsIGxpX3N0eWxlX3ZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGlmIChkaXJ0eSAmIC8qaXRlbXMsIGN1cnJlbnRIZWFkaW5nSW5kZXgqL1xuICAgICAgMjApIHtcbiAgICAgICAgdG9nZ2xlX2NsYXNzKFxuICAgICAgICAgIGxpLFxuICAgICAgICAgIFwiYnl0ZW1kLXRvYy1hY3RpdmVcIixcbiAgICAgICAgICAvKmN1cnJlbnRIZWFkaW5nSW5kZXgqL1xuICAgICAgICAgIGN0eFs0XSA9PT0gLyppbmRleCovXG4gICAgICAgICAgY3R4WzEzXVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgaWYgKGRpcnR5ICYgLyppdGVtcywgaXRlbXMsIG1pbkxldmVsKi9cbiAgICAgIDEyKSB7XG4gICAgICAgIHRvZ2dsZV9jbGFzcyhcbiAgICAgICAgICBsaSxcbiAgICAgICAgICBcImJ5dGVtZC10b2MtZmlyc3RcIixcbiAgICAgICAgICAvKml0ZW0qL1xuICAgICAgICAgIGN0eFsxMV0ubGV2ZWwgPT09IC8qbWluTGV2ZWwqL1xuICAgICAgICAgIGN0eFszXVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0sXG4gICAgZChkZXRhY2hpbmcpIHtcbiAgICAgIGlmIChkZXRhY2hpbmcpXG4gICAgICAgIGRldGFjaChsaSk7XG4gICAgICBtb3VudGVkID0gZmFsc2U7XG4gICAgICBydW5fYWxsKGRpc3Bvc2UpO1xuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZV9mcmFnbWVudCQzKGN0eCkge1xuICBsZXQgZGl2O1xuICBsZXQgaDIyO1xuICBsZXQgdF92YWx1ZSA9IChcbiAgICAvKmxvY2FsZSovXG4gICAgY3R4WzBdLnRvYyArIFwiXCJcbiAgKTtcbiAgbGV0IHQ7XG4gIGxldCB1bDI7XG4gIGxldCBlYWNoX3ZhbHVlID0gKFxuICAgIC8qaXRlbXMqL1xuICAgIGN0eFsyXVxuICApO1xuICBsZXQgZWFjaF9ibG9ja3MgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBlYWNoX3ZhbHVlLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgZWFjaF9ibG9ja3NbaV0gPSBjcmVhdGVfZWFjaF9ibG9jayQxKGdldF9lYWNoX2NvbnRleHQkMShjdHgsIGVhY2hfdmFsdWUsIGkpKTtcbiAgfVxuICByZXR1cm4ge1xuICAgIGMoKSB7XG4gICAgICBkaXYgPSBlbGVtZW50KFwiZGl2XCIpO1xuICAgICAgaDIyID0gZWxlbWVudChcImgyXCIpO1xuICAgICAgdCA9IHRleHQodF92YWx1ZSk7XG4gICAgICB1bDIgPSBlbGVtZW50KFwidWxcIik7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVhY2hfYmxvY2tzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGVhY2hfYmxvY2tzW2ldLmMoKTtcbiAgICAgIH1cbiAgICAgIGF0dHIoZGl2LCBcImNsYXNzXCIsIFwiYnl0ZW1kLXRvY1wiKTtcbiAgICAgIHRvZ2dsZV9jbGFzcyhkaXYsIFwiYnl0ZW1kLWhpZGRlblwiLCAhLyp2aXNpYmxlKi9cbiAgICAgIGN0eFsxXSk7XG4gICAgfSxcbiAgICBtKHRhcmdldCwgYW5jaG9yKSB7XG4gICAgICBpbnNlcnQodGFyZ2V0LCBkaXYsIGFuY2hvcik7XG4gICAgICBhcHBlbmQoZGl2LCBoMjIpO1xuICAgICAgYXBwZW5kKGgyMiwgdCk7XG4gICAgICBhcHBlbmQoZGl2LCB1bDIpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlYWNoX2Jsb2Nrcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBpZiAoZWFjaF9ibG9ja3NbaV0pIHtcbiAgICAgICAgICBlYWNoX2Jsb2Nrc1tpXS5tKHVsMiwgbnVsbCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHAoY3R4MiwgW2RpcnR5XSkge1xuICAgICAgaWYgKGRpcnR5ICYgLypsb2NhbGUqL1xuICAgICAgMSAmJiB0X3ZhbHVlICE9PSAodF92YWx1ZSA9IC8qbG9jYWxlKi9cbiAgICAgIGN0eDJbMF0udG9jICsgXCJcIikpXG4gICAgICAgIHNldF9kYXRhKHQsIHRfdmFsdWUpO1xuICAgICAgaWYgKGRpcnR5ICYgLyppdGVtcywgbWluTGV2ZWwsIGN1cnJlbnRIZWFkaW5nSW5kZXgsIGRpc3BhdGNoKi9cbiAgICAgIDYwKSB7XG4gICAgICAgIGVhY2hfdmFsdWUgPSAvKml0ZW1zKi9cbiAgICAgICAgY3R4MlsyXTtcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBlYWNoX3ZhbHVlLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgY29uc3QgY2hpbGRfY3R4ID0gZ2V0X2VhY2hfY29udGV4dCQxKGN0eDIsIGVhY2hfdmFsdWUsIGkpO1xuICAgICAgICAgIGlmIChlYWNoX2Jsb2Nrc1tpXSkge1xuICAgICAgICAgICAgZWFjaF9ibG9ja3NbaV0ucChjaGlsZF9jdHgsIGRpcnR5KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZWFjaF9ibG9ja3NbaV0gPSBjcmVhdGVfZWFjaF9ibG9jayQxKGNoaWxkX2N0eCk7XG4gICAgICAgICAgICBlYWNoX2Jsb2Nrc1tpXS5jKCk7XG4gICAgICAgICAgICBlYWNoX2Jsb2Nrc1tpXS5tKHVsMiwgbnVsbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAoOyBpIDwgZWFjaF9ibG9ja3MubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICBlYWNoX2Jsb2Nrc1tpXS5kKDEpO1xuICAgICAgICB9XG4gICAgICAgIGVhY2hfYmxvY2tzLmxlbmd0aCA9IGVhY2hfdmFsdWUubGVuZ3RoO1xuICAgICAgfVxuICAgICAgaWYgKGRpcnR5ICYgLyp2aXNpYmxlKi9cbiAgICAgIDIpIHtcbiAgICAgICAgdG9nZ2xlX2NsYXNzKGRpdiwgXCJieXRlbWQtaGlkZGVuXCIsICEvKnZpc2libGUqL1xuICAgICAgICBjdHgyWzFdKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGk6IG5vb3AsXG4gICAgbzogbm9vcCxcbiAgICBkKGRldGFjaGluZykge1xuICAgICAgaWYgKGRldGFjaGluZylcbiAgICAgICAgZGV0YWNoKGRpdik7XG4gICAgICBkZXN0cm95X2VhY2goZWFjaF9ibG9ja3MsIGRldGFjaGluZyk7XG4gICAgfVxuICB9O1xufVxuZnVuY3Rpb24gaW5zdGFuY2UkMygkJHNlbGYsICQkcHJvcHMsICQkaW52YWxpZGF0ZSkge1xuICBsZXQgeyBoYXN0IH0gPSAkJHByb3BzO1xuICBsZXQgeyBjdXJyZW50QmxvY2tJbmRleCB9ID0gJCRwcm9wcztcbiAgbGV0IHsgbG9jYWxlIH0gPSAkJHByb3BzO1xuICBsZXQgeyB2aXNpYmxlIH0gPSAkJHByb3BzO1xuICBjb25zdCBkaXNwYXRjaCA9IGNyZWF0ZUV2ZW50RGlzcGF0Y2hlcigpO1xuICBsZXQgaXRlbXM7XG4gIGxldCBtaW5MZXZlbCA9IDY7XG4gIGxldCBjdXJyZW50SGVhZGluZ0luZGV4ID0gMDtcbiAgZnVuY3Rpb24gc3RyaW5naWZ5SGVhZGluZyhlKSB7XG4gICAgbGV0IHJlc3VsdCA9IFwiXCI7XG4gICAgdmlzaXQoZSwgKG5vZGUpID0+IHtcbiAgICAgIGlmIChub2RlLnR5cGUgPT09IFwidGV4dFwiKSB7XG4gICAgICAgIHJlc3VsdCArPSBub2RlLnZhbHVlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgY29uc3QgY2xpY2tfaGFuZGxlciA9IChpbmRleDIpID0+IHtcbiAgICBkaXNwYXRjaChcImNsaWNrXCIsIGluZGV4Mik7XG4gIH07XG4gIGNvbnN0IGtleWRvd25faGFuZGxlciA9IChpbmRleDIsIGUpID0+IHtcbiAgICBpZiAoW1wiRW50ZXJcIiwgXCJTcGFjZVwiXS5pbmNsdWRlcyhlLmNvZGUpKSB7XG4gICAgICBkaXNwYXRjaChcImNsaWNrXCIsIGluZGV4Mik7XG4gICAgfVxuICB9O1xuICAkJHNlbGYuJCRzZXQgPSAoJCRwcm9wczIpID0+IHtcbiAgICBpZiAoXCJoYXN0XCIgaW4gJCRwcm9wczIpXG4gICAgICAkJGludmFsaWRhdGUoNiwgaGFzdCA9ICQkcHJvcHMyLmhhc3QpO1xuICAgIGlmIChcImN1cnJlbnRCbG9ja0luZGV4XCIgaW4gJCRwcm9wczIpXG4gICAgICAkJGludmFsaWRhdGUoNywgY3VycmVudEJsb2NrSW5kZXggPSAkJHByb3BzMi5jdXJyZW50QmxvY2tJbmRleCk7XG4gICAgaWYgKFwibG9jYWxlXCIgaW4gJCRwcm9wczIpXG4gICAgICAkJGludmFsaWRhdGUoMCwgbG9jYWxlID0gJCRwcm9wczIubG9jYWxlKTtcbiAgICBpZiAoXCJ2aXNpYmxlXCIgaW4gJCRwcm9wczIpXG4gICAgICAkJGludmFsaWRhdGUoMSwgdmlzaWJsZSA9ICQkcHJvcHMyLnZpc2libGUpO1xuICB9O1xuICAkJHNlbGYuJCQudXBkYXRlID0gKCkgPT4ge1xuICAgIGlmICgkJHNlbGYuJCQuZGlydHkgJiAvKmhhc3QsIG1pbkxldmVsLCBpdGVtcywgY3VycmVudEJsb2NrSW5kZXgqL1xuICAgIDIwNCkge1xuICAgICAgKCgpID0+IHtcbiAgICAgICAgJCRpbnZhbGlkYXRlKDIsIGl0ZW1zID0gW10pO1xuICAgICAgICAkJGludmFsaWRhdGUoNCwgY3VycmVudEhlYWRpbmdJbmRleCA9IDApO1xuICAgICAgICBoYXN0LmNoaWxkcmVuLmZpbHRlcigodikgPT4gdi50eXBlID09PSBcImVsZW1lbnRcIikuZm9yRWFjaCgobm9kZSwgaW5kZXgyKSA9PiB7XG4gICAgICAgICAgaWYgKG5vZGUudGFnTmFtZVswXSA9PT0gXCJoXCIgJiYgISFub2RlLmNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgaSA9IE51bWJlcihub2RlLnRhZ05hbWVbMV0pO1xuICAgICAgICAgICAgJCRpbnZhbGlkYXRlKDMsIG1pbkxldmVsID0gTWF0aC5taW4obWluTGV2ZWwsIGkpKTtcbiAgICAgICAgICAgIGl0ZW1zLnB1c2goeyBsZXZlbDogaSwgdGV4dDogc3RyaW5naWZ5SGVhZGluZyhub2RlKSB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGN1cnJlbnRCbG9ja0luZGV4ID49IGluZGV4Mikge1xuICAgICAgICAgICAgJCRpbnZhbGlkYXRlKDQsIGN1cnJlbnRIZWFkaW5nSW5kZXggPSBpdGVtcy5sZW5ndGggLSAxKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSkoKTtcbiAgICB9XG4gIH07XG4gIHJldHVybiBbXG4gICAgbG9jYWxlLFxuICAgIHZpc2libGUsXG4gICAgaXRlbXMsXG4gICAgbWluTGV2ZWwsXG4gICAgY3VycmVudEhlYWRpbmdJbmRleCxcbiAgICBkaXNwYXRjaCxcbiAgICBoYXN0LFxuICAgIGN1cnJlbnRCbG9ja0luZGV4LFxuICAgIGNsaWNrX2hhbmRsZXIsXG4gICAga2V5ZG93bl9oYW5kbGVyXG4gIF07XG59XG5jbGFzcyBUb2MgZXh0ZW5kcyBTdmVsdGVDb21wb25lbnQge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgc3VwZXIoKTtcbiAgICBpbml0KHRoaXMsIG9wdGlvbnMsIGluc3RhbmNlJDMsIGNyZWF0ZV9mcmFnbWVudCQzLCBub3RfZXF1YWwsIHtcbiAgICAgIGhhc3Q6IDYsXG4gICAgICBjdXJyZW50QmxvY2tJbmRleDogNyxcbiAgICAgIGxvY2FsZTogMCxcbiAgICAgIHZpc2libGU6IDFcbiAgICB9KTtcbiAgfVxufVxuZnVuY3Rpb24gZ2V0X2VhY2hfY29udGV4dChjdHgsIGxpc3QsIGkpIHtcbiAgY29uc3QgY2hpbGRfY3R4ID0gY3R4LnNsaWNlKCk7XG4gIGNoaWxkX2N0eFsyNV0gPSBsaXN0W2ldO1xuICBjaGlsZF9jdHhbMjddID0gaTtcbiAgcmV0dXJuIGNoaWxkX2N0eDtcbn1cbmZ1bmN0aW9uIGdldF9lYWNoX2NvbnRleHRfMShjdHgsIGxpc3QsIGkpIHtcbiAgY29uc3QgY2hpbGRfY3R4ID0gY3R4LnNsaWNlKCk7XG4gIGNoaWxkX2N0eFsyNV0gPSBsaXN0W2ldO1xuICBjaGlsZF9jdHhbMjddID0gaTtcbiAgcmV0dXJuIGNoaWxkX2N0eDtcbn1cbmZ1bmN0aW9uIGNyZWF0ZV9lbHNlX2Jsb2NrKGN0eCkge1xuICBsZXQgZGl2MDtcbiAgbGV0IHQwX3ZhbHVlID0gKFxuICAgIC8qbG9jYWxlKi9cbiAgICBjdHhbMl0ud3JpdGUgKyBcIlwiXG4gICk7XG4gIGxldCB0MDtcbiAgbGV0IGRpdjE7XG4gIGxldCB0MV92YWx1ZSA9IChcbiAgICAvKmxvY2FsZSovXG4gICAgY3R4WzJdLnByZXZpZXcgKyBcIlwiXG4gICk7XG4gIGxldCB0MTtcbiAgbGV0IG1vdW50ZWQ7XG4gIGxldCBkaXNwb3NlO1xuICByZXR1cm4ge1xuICAgIGMoKSB7XG4gICAgICBkaXYwID0gZWxlbWVudChcImRpdlwiKTtcbiAgICAgIHQwID0gdGV4dCh0MF92YWx1ZSk7XG4gICAgICBkaXYxID0gZWxlbWVudChcImRpdlwiKTtcbiAgICAgIHQxID0gdGV4dCh0MV92YWx1ZSk7XG4gICAgICBhdHRyKGRpdjAsIFwiY2xhc3NcIiwgXCJieXRlbWQtdG9vbGJhci10YWJcIik7XG4gICAgICB0b2dnbGVfY2xhc3MoXG4gICAgICAgIGRpdjAsXG4gICAgICAgIFwiYnl0ZW1kLXRvb2xiYXItdGFiLWFjdGl2ZVwiLFxuICAgICAgICAvKmFjdGl2ZVRhYiovXG4gICAgICAgIGN0eFsxXSAhPT0gXCJwcmV2aWV3XCJcbiAgICAgICk7XG4gICAgICBhdHRyKGRpdjEsIFwiY2xhc3NcIiwgXCJieXRlbWQtdG9vbGJhci10YWJcIik7XG4gICAgICB0b2dnbGVfY2xhc3MoXG4gICAgICAgIGRpdjEsXG4gICAgICAgIFwiYnl0ZW1kLXRvb2xiYXItdGFiLWFjdGl2ZVwiLFxuICAgICAgICAvKmFjdGl2ZVRhYiovXG4gICAgICAgIGN0eFsxXSA9PT0gXCJwcmV2aWV3XCJcbiAgICAgICk7XG4gICAgfSxcbiAgICBtKHRhcmdldCwgYW5jaG9yKSB7XG4gICAgICBpbnNlcnQodGFyZ2V0LCBkaXYwLCBhbmNob3IpO1xuICAgICAgYXBwZW5kKGRpdjAsIHQwKTtcbiAgICAgIGluc2VydCh0YXJnZXQsIGRpdjEsIGFuY2hvcik7XG4gICAgICBhcHBlbmQoZGl2MSwgdDEpO1xuICAgICAgaWYgKCFtb3VudGVkKSB7XG4gICAgICAgIGRpc3Bvc2UgPSBbXG4gICAgICAgICAgbGlzdGVuKFxuICAgICAgICAgICAgZGl2MCxcbiAgICAgICAgICAgIFwiY2xpY2tcIixcbiAgICAgICAgICAgIC8qY2xpY2tfaGFuZGxlciovXG4gICAgICAgICAgICBjdHhbMTZdXG4gICAgICAgICAgKSxcbiAgICAgICAgICBsaXN0ZW4oZGl2MCwgXCJrZXlkb3duXCIsIHNlbGYoXG4gICAgICAgICAgICAvKmtleWRvd25faGFuZGxlciovXG4gICAgICAgICAgICBjdHhbMTddXG4gICAgICAgICAgKSksXG4gICAgICAgICAgbGlzdGVuKFxuICAgICAgICAgICAgZGl2MSxcbiAgICAgICAgICAgIFwiY2xpY2tcIixcbiAgICAgICAgICAgIC8qY2xpY2tfaGFuZGxlcl8xKi9cbiAgICAgICAgICAgIGN0eFsxOF1cbiAgICAgICAgICApLFxuICAgICAgICAgIGxpc3RlbihkaXYxLCBcImtleWRvd25cIiwgc2VsZihcbiAgICAgICAgICAgIC8qa2V5ZG93bl9oYW5kbGVyXzEqL1xuICAgICAgICAgICAgY3R4WzE5XVxuICAgICAgICAgICkpXG4gICAgICAgIF07XG4gICAgICAgIG1vdW50ZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH0sXG4gICAgcChjdHgyLCBkaXJ0eSkge1xuICAgICAgaWYgKGRpcnR5ICYgLypsb2NhbGUqL1xuICAgICAgNCAmJiB0MF92YWx1ZSAhPT0gKHQwX3ZhbHVlID0gLypsb2NhbGUqL1xuICAgICAgY3R4MlsyXS53cml0ZSArIFwiXCIpKVxuICAgICAgICBzZXRfZGF0YSh0MCwgdDBfdmFsdWUpO1xuICAgICAgaWYgKGRpcnR5ICYgLyphY3RpdmVUYWIqL1xuICAgICAgMikge1xuICAgICAgICB0b2dnbGVfY2xhc3MoXG4gICAgICAgICAgZGl2MCxcbiAgICAgICAgICBcImJ5dGVtZC10b29sYmFyLXRhYi1hY3RpdmVcIixcbiAgICAgICAgICAvKmFjdGl2ZVRhYiovXG4gICAgICAgICAgY3R4MlsxXSAhPT0gXCJwcmV2aWV3XCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmIChkaXJ0eSAmIC8qbG9jYWxlKi9cbiAgICAgIDQgJiYgdDFfdmFsdWUgIT09ICh0MV92YWx1ZSA9IC8qbG9jYWxlKi9cbiAgICAgIGN0eDJbMl0ucHJldmlldyArIFwiXCIpKVxuICAgICAgICBzZXRfZGF0YSh0MSwgdDFfdmFsdWUpO1xuICAgICAgaWYgKGRpcnR5ICYgLyphY3RpdmVUYWIqL1xuICAgICAgMikge1xuICAgICAgICB0b2dnbGVfY2xhc3MoXG4gICAgICAgICAgZGl2MSxcbiAgICAgICAgICBcImJ5dGVtZC10b29sYmFyLXRhYi1hY3RpdmVcIixcbiAgICAgICAgICAvKmFjdGl2ZVRhYiovXG4gICAgICAgICAgY3R4MlsxXSA9PT0gXCJwcmV2aWV3XCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGQoZGV0YWNoaW5nKSB7XG4gICAgICBpZiAoZGV0YWNoaW5nKVxuICAgICAgICBkZXRhY2goZGl2MCk7XG4gICAgICBpZiAoZGV0YWNoaW5nKVxuICAgICAgICBkZXRhY2goZGl2MSk7XG4gICAgICBtb3VudGVkID0gZmFsc2U7XG4gICAgICBydW5fYWxsKGRpc3Bvc2UpO1xuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZV9pZl9ibG9ja18xKGN0eCkge1xuICBsZXQgZWFjaF8xX2FuY2hvcjtcbiAgbGV0IGVhY2hfdmFsdWVfMSA9IChcbiAgICAvKmFjdGlvbnMqL1xuICAgIGN0eFszXVxuICApO1xuICBsZXQgZWFjaF9ibG9ja3MgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBlYWNoX3ZhbHVlXzEubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBlYWNoX2Jsb2Nrc1tpXSA9IGNyZWF0ZV9lYWNoX2Jsb2NrXzEoZ2V0X2VhY2hfY29udGV4dF8xKGN0eCwgZWFjaF92YWx1ZV8xLCBpKSk7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBjKCkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlYWNoX2Jsb2Nrcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBlYWNoX2Jsb2Nrc1tpXS5jKCk7XG4gICAgICB9XG4gICAgICBlYWNoXzFfYW5jaG9yID0gZW1wdHkoKTtcbiAgICB9LFxuICAgIG0odGFyZ2V0LCBhbmNob3IpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWFjaF9ibG9ja3MubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgaWYgKGVhY2hfYmxvY2tzW2ldKSB7XG4gICAgICAgICAgZWFjaF9ibG9ja3NbaV0ubSh0YXJnZXQsIGFuY2hvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGluc2VydCh0YXJnZXQsIGVhY2hfMV9hbmNob3IsIGFuY2hvcik7XG4gICAgfSxcbiAgICBwKGN0eDIsIGRpcnR5KSB7XG4gICAgICBpZiAoZGlydHkgJiAvKnRpcHB5Q2xhc3MsIGFjdGlvbnMqL1xuICAgICAgOCkge1xuICAgICAgICBlYWNoX3ZhbHVlXzEgPSAvKmFjdGlvbnMqL1xuICAgICAgICBjdHgyWzNdO1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGVhY2hfdmFsdWVfMS5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgIGNvbnN0IGNoaWxkX2N0eCA9IGdldF9lYWNoX2NvbnRleHRfMShjdHgyLCBlYWNoX3ZhbHVlXzEsIGkpO1xuICAgICAgICAgIGlmIChlYWNoX2Jsb2Nrc1tpXSkge1xuICAgICAgICAgICAgZWFjaF9ibG9ja3NbaV0ucChjaGlsZF9jdHgsIGRpcnR5KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZWFjaF9ibG9ja3NbaV0gPSBjcmVhdGVfZWFjaF9ibG9ja18xKGNoaWxkX2N0eCk7XG4gICAgICAgICAgICBlYWNoX2Jsb2Nrc1tpXS5jKCk7XG4gICAgICAgICAgICBlYWNoX2Jsb2Nrc1tpXS5tKGVhY2hfMV9hbmNob3IucGFyZW50Tm9kZSwgZWFjaF8xX2FuY2hvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAoOyBpIDwgZWFjaF9ibG9ja3MubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICBlYWNoX2Jsb2Nrc1tpXS5kKDEpO1xuICAgICAgICB9XG4gICAgICAgIGVhY2hfYmxvY2tzLmxlbmd0aCA9IGVhY2hfdmFsdWVfMS5sZW5ndGg7XG4gICAgICB9XG4gICAgfSxcbiAgICBkKGRldGFjaGluZykge1xuICAgICAgZGVzdHJveV9lYWNoKGVhY2hfYmxvY2tzLCBkZXRhY2hpbmcpO1xuICAgICAgaWYgKGRldGFjaGluZylcbiAgICAgICAgZGV0YWNoKGVhY2hfMV9hbmNob3IpO1xuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZV9pZl9ibG9ja18yKGN0eCkge1xuICBsZXQgZGl2O1xuICBsZXQgcmF3X3ZhbHVlID0gKFxuICAgIC8qaXRlbSovXG4gICAgY3R4WzI1XS5pY29uICsgXCJcIlxuICApO1xuICByZXR1cm4ge1xuICAgIGMoKSB7XG4gICAgICBkaXYgPSBlbGVtZW50KFwiZGl2XCIpO1xuICAgICAgYXR0cihkaXYsIFwiY2xhc3NcIiwgW1wiYnl0ZW1kLXRvb2xiYXItaWNvblwiLCB0aXBweUNsYXNzXS5qb2luKFwiIFwiKSk7XG4gICAgICBhdHRyKFxuICAgICAgICBkaXYsXG4gICAgICAgIFwiYnl0ZW1kLXRpcHB5LXBhdGhcIixcbiAgICAgICAgLyppbmRleCovXG4gICAgICAgIGN0eFsyN11cbiAgICAgICk7XG4gICAgfSxcbiAgICBtKHRhcmdldCwgYW5jaG9yKSB7XG4gICAgICBpbnNlcnQodGFyZ2V0LCBkaXYsIGFuY2hvcik7XG4gICAgICBkaXYuaW5uZXJIVE1MID0gcmF3X3ZhbHVlO1xuICAgIH0sXG4gICAgcChjdHgyLCBkaXJ0eSkge1xuICAgICAgaWYgKGRpcnR5ICYgLyphY3Rpb25zKi9cbiAgICAgIDggJiYgcmF3X3ZhbHVlICE9PSAocmF3X3ZhbHVlID0gLyppdGVtKi9cbiAgICAgIGN0eDJbMjVdLmljb24gKyBcIlwiKSlcbiAgICAgICAgZGl2LmlubmVySFRNTCA9IHJhd192YWx1ZTtcbiAgICB9LFxuICAgIGQoZGV0YWNoaW5nKSB7XG4gICAgICBpZiAoZGV0YWNoaW5nKVxuICAgICAgICBkZXRhY2goZGl2KTtcbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiBjcmVhdGVfZWFjaF9ibG9ja18xKGN0eCkge1xuICBsZXQgaWZfYmxvY2tfYW5jaG9yO1xuICBsZXQgaWZfYmxvY2sgPSAoXG4gICAgLyppdGVtKi9cbiAgICBjdHhbMjVdLmhhbmRsZXIgJiYgY3JlYXRlX2lmX2Jsb2NrXzIoY3R4KVxuICApO1xuICByZXR1cm4ge1xuICAgIGMoKSB7XG4gICAgICBpZiAoaWZfYmxvY2spXG4gICAgICAgIGlmX2Jsb2NrLmMoKTtcbiAgICAgIGlmX2Jsb2NrX2FuY2hvciA9IGVtcHR5KCk7XG4gICAgfSxcbiAgICBtKHRhcmdldCwgYW5jaG9yKSB7XG4gICAgICBpZiAoaWZfYmxvY2spXG4gICAgICAgIGlmX2Jsb2NrLm0odGFyZ2V0LCBhbmNob3IpO1xuICAgICAgaW5zZXJ0KHRhcmdldCwgaWZfYmxvY2tfYW5jaG9yLCBhbmNob3IpO1xuICAgIH0sXG4gICAgcChjdHgyLCBkaXJ0eSkge1xuICAgICAgaWYgKFxuICAgICAgICAvKml0ZW0qL1xuICAgICAgICBjdHgyWzI1XS5oYW5kbGVyXG4gICAgICApIHtcbiAgICAgICAgaWYgKGlmX2Jsb2NrKSB7XG4gICAgICAgICAgaWZfYmxvY2sucChjdHgyLCBkaXJ0eSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWZfYmxvY2sgPSBjcmVhdGVfaWZfYmxvY2tfMihjdHgyKTtcbiAgICAgICAgICBpZl9ibG9jay5jKCk7XG4gICAgICAgICAgaWZfYmxvY2subShpZl9ibG9ja19hbmNob3IucGFyZW50Tm9kZSwgaWZfYmxvY2tfYW5jaG9yKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChpZl9ibG9jaykge1xuICAgICAgICBpZl9ibG9jay5kKDEpO1xuICAgICAgICBpZl9ibG9jayA9IG51bGw7XG4gICAgICB9XG4gICAgfSxcbiAgICBkKGRldGFjaGluZykge1xuICAgICAgaWYgKGlmX2Jsb2NrKVxuICAgICAgICBpZl9ibG9jay5kKGRldGFjaGluZyk7XG4gICAgICBpZiAoZGV0YWNoaW5nKVxuICAgICAgICBkZXRhY2goaWZfYmxvY2tfYW5jaG9yKTtcbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiBjcmVhdGVfaWZfYmxvY2skMShjdHgpIHtcbiAgbGV0IGRpdjtcbiAgbGV0IHJhd192YWx1ZSA9IChcbiAgICAvKml0ZW0qL1xuICAgIGN0eFsyNV0uaWNvbiArIFwiXCJcbiAgKTtcbiAgcmV0dXJuIHtcbiAgICBjKCkge1xuICAgICAgZGl2ID0gZWxlbWVudChcImRpdlwiKTtcbiAgICAgIGF0dHIoZGl2LCBcImNsYXNzXCIsIFtcImJ5dGVtZC10b29sYmFyLWljb25cIiwgdGlwcHlDbGFzcywgdGlwcHlDbGFzc1JpZ2h0XS5qb2luKFwiIFwiKSk7XG4gICAgICBhdHRyKFxuICAgICAgICBkaXYsXG4gICAgICAgIFwiYnl0ZW1kLXRpcHB5LXBhdGhcIixcbiAgICAgICAgLyppbmRleCovXG4gICAgICAgIGN0eFsyN11cbiAgICAgICk7XG4gICAgICB0b2dnbGVfY2xhc3MoXG4gICAgICAgIGRpdixcbiAgICAgICAgXCJieXRlbWQtdG9vbGJhci1pY29uLWFjdGl2ZVwiLFxuICAgICAgICAvKml0ZW0qL1xuICAgICAgICBjdHhbMjVdLmFjdGl2ZVxuICAgICAgKTtcbiAgICB9LFxuICAgIG0odGFyZ2V0LCBhbmNob3IpIHtcbiAgICAgIGluc2VydCh0YXJnZXQsIGRpdiwgYW5jaG9yKTtcbiAgICAgIGRpdi5pbm5lckhUTUwgPSByYXdfdmFsdWU7XG4gICAgfSxcbiAgICBwKGN0eDIsIGRpcnR5KSB7XG4gICAgICBpZiAoZGlydHkgJiAvKnJpZ2h0QWN0aW9ucyovXG4gICAgICAzMiAmJiByYXdfdmFsdWUgIT09IChyYXdfdmFsdWUgPSAvKml0ZW0qL1xuICAgICAgY3R4MlsyNV0uaWNvbiArIFwiXCIpKVxuICAgICAgICBkaXYuaW5uZXJIVE1MID0gcmF3X3ZhbHVlO1xuICAgICAgaWYgKGRpcnR5ICYgLypyaWdodEFjdGlvbnMqL1xuICAgICAgMzIpIHtcbiAgICAgICAgdG9nZ2xlX2NsYXNzKFxuICAgICAgICAgIGRpdixcbiAgICAgICAgICBcImJ5dGVtZC10b29sYmFyLWljb24tYWN0aXZlXCIsXG4gICAgICAgICAgLyppdGVtKi9cbiAgICAgICAgICBjdHgyWzI1XS5hY3RpdmVcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGQoZGV0YWNoaW5nKSB7XG4gICAgICBpZiAoZGV0YWNoaW5nKVxuICAgICAgICBkZXRhY2goZGl2KTtcbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiBjcmVhdGVfZWFjaF9ibG9jayhjdHgpIHtcbiAgbGV0IGlmX2Jsb2NrX2FuY2hvcjtcbiAgbGV0IGlmX2Jsb2NrID0gIS8qaXRlbSovXG4gIGN0eFsyNV0uaGlkZGVuICYmIGNyZWF0ZV9pZl9ibG9jayQxKGN0eCk7XG4gIHJldHVybiB7XG4gICAgYygpIHtcbiAgICAgIGlmIChpZl9ibG9jaylcbiAgICAgICAgaWZfYmxvY2suYygpO1xuICAgICAgaWZfYmxvY2tfYW5jaG9yID0gZW1wdHkoKTtcbiAgICB9LFxuICAgIG0odGFyZ2V0LCBhbmNob3IpIHtcbiAgICAgIGlmIChpZl9ibG9jaylcbiAgICAgICAgaWZfYmxvY2subSh0YXJnZXQsIGFuY2hvcik7XG4gICAgICBpbnNlcnQodGFyZ2V0LCBpZl9ibG9ja19hbmNob3IsIGFuY2hvcik7XG4gICAgfSxcbiAgICBwKGN0eDIsIGRpcnR5KSB7XG4gICAgICBpZiAoIS8qaXRlbSovXG4gICAgICBjdHgyWzI1XS5oaWRkZW4pIHtcbiAgICAgICAgaWYgKGlmX2Jsb2NrKSB7XG4gICAgICAgICAgaWZfYmxvY2sucChjdHgyLCBkaXJ0eSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWZfYmxvY2sgPSBjcmVhdGVfaWZfYmxvY2skMShjdHgyKTtcbiAgICAgICAgICBpZl9ibG9jay5jKCk7XG4gICAgICAgICAgaWZfYmxvY2subShpZl9ibG9ja19hbmNob3IucGFyZW50Tm9kZSwgaWZfYmxvY2tfYW5jaG9yKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChpZl9ibG9jaykge1xuICAgICAgICBpZl9ibG9jay5kKDEpO1xuICAgICAgICBpZl9ibG9jayA9IG51bGw7XG4gICAgICB9XG4gICAgfSxcbiAgICBkKGRldGFjaGluZykge1xuICAgICAgaWYgKGlmX2Jsb2NrKVxuICAgICAgICBpZl9ibG9jay5kKGRldGFjaGluZyk7XG4gICAgICBpZiAoZGV0YWNoaW5nKVxuICAgICAgICBkZXRhY2goaWZfYmxvY2tfYW5jaG9yKTtcbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiBjcmVhdGVfZnJhZ21lbnQkMihjdHgpIHtcbiAgbGV0IGRpdjI7XG4gIGxldCBkaXYwO1xuICBsZXQgZGl2MTtcbiAgbGV0IG1vdW50ZWQ7XG4gIGxldCBkaXNwb3NlO1xuICBmdW5jdGlvbiBzZWxlY3RfYmxvY2tfdHlwZShjdHgyLCBkaXJ0eSkge1xuICAgIGlmIChcbiAgICAgIC8qc3BsaXQqL1xuICAgICAgY3R4MlswXVxuICAgIClcbiAgICAgIHJldHVybiBjcmVhdGVfaWZfYmxvY2tfMTtcbiAgICByZXR1cm4gY3JlYXRlX2Vsc2VfYmxvY2s7XG4gIH1cbiAgbGV0IGN1cnJlbnRfYmxvY2tfdHlwZSA9IHNlbGVjdF9ibG9ja190eXBlKGN0eCk7XG4gIGxldCBpZl9ibG9jayA9IGN1cnJlbnRfYmxvY2tfdHlwZShjdHgpO1xuICBsZXQgZWFjaF92YWx1ZSA9IChcbiAgICAvKnJpZ2h0QWN0aW9ucyovXG4gICAgY3R4WzVdXG4gICk7XG4gIGxldCBlYWNoX2Jsb2NrcyA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGVhY2hfdmFsdWUubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBlYWNoX2Jsb2Nrc1tpXSA9IGNyZWF0ZV9lYWNoX2Jsb2NrKGdldF9lYWNoX2NvbnRleHQoY3R4LCBlYWNoX3ZhbHVlLCBpKSk7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBjKCkge1xuICAgICAgZGl2MiA9IGVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBkaXYwID0gZWxlbWVudChcImRpdlwiKTtcbiAgICAgIGlmX2Jsb2NrLmMoKTtcbiAgICAgIGRpdjEgPSBlbGVtZW50KFwiZGl2XCIpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlYWNoX2Jsb2Nrcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBlYWNoX2Jsb2Nrc1tpXS5jKCk7XG4gICAgICB9XG4gICAgICBhdHRyKGRpdjAsIFwiY2xhc3NcIiwgXCJieXRlbWQtdG9vbGJhci1sZWZ0XCIpO1xuICAgICAgYXR0cihkaXYxLCBcImNsYXNzXCIsIFwiYnl0ZW1kLXRvb2xiYXItcmlnaHRcIik7XG4gICAgICBhdHRyKGRpdjIsIFwiY2xhc3NcIiwgXCJieXRlbWQtdG9vbGJhclwiKTtcbiAgICB9LFxuICAgIG0odGFyZ2V0LCBhbmNob3IpIHtcbiAgICAgIGluc2VydCh0YXJnZXQsIGRpdjIsIGFuY2hvcik7XG4gICAgICBhcHBlbmQoZGl2MiwgZGl2MCk7XG4gICAgICBpZl9ibG9jay5tKGRpdjAsIG51bGwpO1xuICAgICAgYXBwZW5kKGRpdjIsIGRpdjEpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlYWNoX2Jsb2Nrcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBpZiAoZWFjaF9ibG9ja3NbaV0pIHtcbiAgICAgICAgICBlYWNoX2Jsb2Nrc1tpXS5tKGRpdjEsIG51bGwpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjdHhbMjBdKGRpdjIpO1xuICAgICAgaWYgKCFtb3VudGVkKSB7XG4gICAgICAgIGRpc3Bvc2UgPSBbXG4gICAgICAgICAgbGlzdGVuKFxuICAgICAgICAgICAgZGl2MixcbiAgICAgICAgICAgIFwiY2xpY2tcIixcbiAgICAgICAgICAgIC8qaGFuZGxlQ2xpY2sqL1xuICAgICAgICAgICAgY3R4WzddXG4gICAgICAgICAgKSxcbiAgICAgICAgICBsaXN0ZW4oZGl2MiwgXCJrZXlkb3duXCIsIHNlbGYoXG4gICAgICAgICAgICAvKmtleWRvd25faGFuZGxlcl8yKi9cbiAgICAgICAgICAgIGN0eFsyMV1cbiAgICAgICAgICApKVxuICAgICAgICBdO1xuICAgICAgICBtb3VudGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHAoY3R4MiwgW2RpcnR5XSkge1xuICAgICAgaWYgKGN1cnJlbnRfYmxvY2tfdHlwZSA9PT0gKGN1cnJlbnRfYmxvY2tfdHlwZSA9IHNlbGVjdF9ibG9ja190eXBlKGN0eDIpKSAmJiBpZl9ibG9jaykge1xuICAgICAgICBpZl9ibG9jay5wKGN0eDIsIGRpcnR5KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmX2Jsb2NrLmQoMSk7XG4gICAgICAgIGlmX2Jsb2NrID0gY3VycmVudF9ibG9ja190eXBlKGN0eDIpO1xuICAgICAgICBpZiAoaWZfYmxvY2spIHtcbiAgICAgICAgICBpZl9ibG9jay5jKCk7XG4gICAgICAgICAgaWZfYmxvY2subShkaXYwLCBudWxsKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGRpcnR5ICYgLyp0aXBweUNsYXNzLCB0aXBweUNsYXNzUmlnaHQsIHJpZ2h0QWN0aW9ucyovXG4gICAgICAzMikge1xuICAgICAgICBlYWNoX3ZhbHVlID0gLypyaWdodEFjdGlvbnMqL1xuICAgICAgICBjdHgyWzVdO1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGVhY2hfdmFsdWUubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICBjb25zdCBjaGlsZF9jdHggPSBnZXRfZWFjaF9jb250ZXh0KGN0eDIsIGVhY2hfdmFsdWUsIGkpO1xuICAgICAgICAgIGlmIChlYWNoX2Jsb2Nrc1tpXSkge1xuICAgICAgICAgICAgZWFjaF9ibG9ja3NbaV0ucChjaGlsZF9jdHgsIGRpcnR5KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZWFjaF9ibG9ja3NbaV0gPSBjcmVhdGVfZWFjaF9ibG9jayhjaGlsZF9jdHgpO1xuICAgICAgICAgICAgZWFjaF9ibG9ja3NbaV0uYygpO1xuICAgICAgICAgICAgZWFjaF9ibG9ja3NbaV0ubShkaXYxLCBudWxsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yICg7IGkgPCBlYWNoX2Jsb2Nrcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgIGVhY2hfYmxvY2tzW2ldLmQoMSk7XG4gICAgICAgIH1cbiAgICAgICAgZWFjaF9ibG9ja3MubGVuZ3RoID0gZWFjaF92YWx1ZS5sZW5ndGg7XG4gICAgICB9XG4gICAgfSxcbiAgICBpOiBub29wLFxuICAgIG86IG5vb3AsXG4gICAgZChkZXRhY2hpbmcpIHtcbiAgICAgIGlmIChkZXRhY2hpbmcpXG4gICAgICAgIGRldGFjaChkaXYyKTtcbiAgICAgIGlmX2Jsb2NrLmQoKTtcbiAgICAgIGRlc3Ryb3lfZWFjaChlYWNoX2Jsb2NrcywgZGV0YWNoaW5nKTtcbiAgICAgIGN0eFsyMF0obnVsbCk7XG4gICAgICBtb3VudGVkID0gZmFsc2U7XG4gICAgICBydW5fYWxsKGRpc3Bvc2UpO1xuICAgIH1cbiAgfTtcbn1cbmNvbnN0IHRpcHB5Q2xhc3MgPSBcImJ5dGVtZC10aXBweVwiO1xuY29uc3QgdGlwcHlDbGFzc1JpZ2h0ID0gXCJieXRlbWQtdGlwcHktcmlnaHRcIjtcbmNvbnN0IHRpcHB5UGF0aEtleSA9IFwiYnl0ZW1kLXRpcHB5LXBhdGhcIjtcbmZ1bmN0aW9uIGluc3RhbmNlJDIoJCRzZWxmLCAkJHByb3BzLCAkJGludmFsaWRhdGUpIHtcbiAgbGV0IHRvY0FjdGl2ZTtcbiAgbGV0IGhlbHBBY3RpdmU7XG4gIGxldCB3cml0ZUFjdGl2ZTtcbiAgbGV0IHByZXZpZXdBY3RpdmU7XG4gIGxldCByaWdodEFjdGlvbnM7XG4gIGNvbnN0IGRpc3BhdGNoID0gY3JlYXRlRXZlbnREaXNwYXRjaGVyKCk7XG4gIGxldCB0b29sYmFyO1xuICBsZXQgeyBjb250ZXh0IH0gPSAkJHByb3BzO1xuICBsZXQgeyBzcGxpdCB9ID0gJCRwcm9wcztcbiAgbGV0IHsgYWN0aXZlVGFiIH0gPSAkJHByb3BzO1xuICBsZXQgeyBmdWxsc2NyZWVuOiBmdWxsc2NyZWVuMiB9ID0gJCRwcm9wcztcbiAgbGV0IHsgc2lkZWJhciB9ID0gJCRwcm9wcztcbiAgbGV0IHsgbG9jYWxlIH0gPSAkJHByb3BzO1xuICBsZXQgeyBhY3Rpb25zIH0gPSAkJHByb3BzO1xuICBsZXQgeyByaWdodEFmZmVyZW50QWN0aW9ucyB9ID0gJCRwcm9wcztcbiAgZnVuY3Rpb24gZ2V0UGF5bG9hZEZyb21FbGVtZW50KGUpIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIGNvbnN0IHBhdGhzID0gKF9iID0gKF9hID0gZS5nZXRBdHRyaWJ1dGUodGlwcHlQYXRoS2V5KSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnNwbGl0KFwiLVwiKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLm1hcCgoeCkgPT4gcGFyc2VJbnQoeCwgMTApKTtcbiAgICBpZiAoIXBhdGhzKVxuICAgICAgcmV0dXJuO1xuICAgIGxldCBpdGVtID0ge1xuICAgICAgdGl0bGU6IFwiXCIsXG4gICAgICBoYW5kbGVyOiB7XG4gICAgICAgIHR5cGU6IFwiZHJvcGRvd25cIixcbiAgICAgICAgYWN0aW9uczogZS5jbGFzc0xpc3QuY29udGFpbnModGlwcHlDbGFzc1JpZ2h0KSA/IHJpZ2h0QWN0aW9ucyA6IGFjdGlvbnNcbiAgICAgIH1cbiAgICB9O1xuICAgIHBhdGhzID09IG51bGwgPyB2b2lkIDAgOiBwYXRocy5mb3JFYWNoKChpbmRleDIpID0+IHtcbiAgICAgIHZhciBfYTI7XG4gICAgICBpZiAoKChfYTIgPSBpdGVtLmhhbmRsZXIpID09IG51bGwgPyB2b2lkIDAgOiBfYTIudHlwZSkgPT09IFwiZHJvcGRvd25cIikge1xuICAgICAgICBpdGVtID0gaXRlbS5oYW5kbGVyLmFjdGlvbnNbaW5kZXgyXTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4geyBwYXRocywgaXRlbSB9O1xuICB9XG4gIGxldCBkZWxlZ2F0ZUluc3RhbmNlO1xuICBmdW5jdGlvbiBpbml0MigpIHtcbiAgICBkZWxlZ2F0ZUluc3RhbmNlID0gZGVsZWdhdGUodG9vbGJhciwge1xuICAgICAgdGFyZ2V0OiBgLiR7dGlwcHlDbGFzc31gLFxuICAgICAgb25DcmVhdGUoeyBzZXRQcm9wcywgcmVmZXJlbmNlIH0pIHtcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IGdldFBheWxvYWRGcm9tRWxlbWVudChyZWZlcmVuY2UpO1xuICAgICAgICBpZiAoIXBheWxvYWQpXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCB7IGl0ZW0sIHBhdGhzIH0gPSBwYXlsb2FkO1xuICAgICAgICBjb25zdCB7IGhhbmRsZXIgfSA9IGl0ZW07XG4gICAgICAgIGlmICghaGFuZGxlcilcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmIChoYW5kbGVyLnR5cGUgPT09IFwiYWN0aW9uXCIpIHtcbiAgICAgICAgICBzZXRQcm9wcyh7XG4gICAgICAgICAgICBjb250ZW50OiBpdGVtLnRpdGxlLFxuICAgICAgICAgICAgb25IaWRkZW4oaW5zKSB7XG4gICAgICAgICAgICAgIGlucy5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAoaGFuZGxlci50eXBlID09PSBcImRyb3Bkb3duXCIpIHtcbiAgICAgICAgICBjb25zdCBkcm9wZG93biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgZHJvcGRvd24uY2xhc3NMaXN0LmFkZChcImJ5dGVtZC1kcm9wZG93blwiKTtcbiAgICAgICAgICBpZiAoaXRlbS50aXRsZSkge1xuICAgICAgICAgICAgY29uc3QgZHJvcGRvd25UaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBkcm9wZG93blRpdGxlLmNsYXNzTGlzdC5hZGQoXCJieXRlbWQtZHJvcGRvd24tdGl0bGVcIik7XG4gICAgICAgICAgICBkcm9wZG93blRpdGxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGl0ZW0udGl0bGUpKTtcbiAgICAgICAgICAgIGRyb3Bkb3duLmFwcGVuZENoaWxkKGRyb3Bkb3duVGl0bGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBoYW5kbGVyLmFjdGlvbnMuZm9yRWFjaCgoc3ViQWN0aW9uLCBpKSA9PiB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICBjb25zdCBkcm9wZG93bkl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgZHJvcGRvd25JdGVtLmNsYXNzTGlzdC5hZGQoXCJieXRlbWQtZHJvcGRvd24taXRlbVwiKTtcbiAgICAgICAgICAgIGRyb3Bkb3duSXRlbS5zZXRBdHRyaWJ1dGUodGlwcHlQYXRoS2V5LCBbLi4ucGF0aHMsIGldLmpvaW4oXCItXCIpKTtcbiAgICAgICAgICAgIGlmICgoKF9hID0gc3ViQWN0aW9uLmhhbmRsZXIpID09IG51bGwgPyB2b2lkIDAgOiBfYS50eXBlKSA9PT0gXCJkcm9wZG93blwiKSB7XG4gICAgICAgICAgICAgIGRyb3Bkb3duSXRlbS5jbGFzc0xpc3QuYWRkKHRpcHB5Q2xhc3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlZmVyZW5jZS5jbGFzc0xpc3QuY29udGFpbnModGlwcHlDbGFzc1JpZ2h0KSkge1xuICAgICAgICAgICAgICBkcm9wZG93bkl0ZW0uY2xhc3NMaXN0LmFkZCh0aXBweUNsYXNzUmlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZHJvcGRvd25JdGVtLmlubmVySFRNTCA9IGAke3N1YkFjdGlvbi5pY29uID8gYDxkaXYgY2xhc3M9XCJieXRlbWQtZHJvcGRvd24taXRlbS1pY29uXCI+JHtzdWJBY3Rpb24uaWNvbn08L2Rpdj5gIDogXCJcIn08ZGl2IGNsYXNzPVwiYnl0ZW1kLWRyb3Bkb3duLWl0ZW0tdGl0bGVcIj4ke3N1YkFjdGlvbi50aXRsZX08L2Rpdj5gO1xuICAgICAgICAgICAgZHJvcGRvd24uYXBwZW5kQ2hpbGQoZHJvcGRvd25JdGVtKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRQcm9wcyh7XG4gICAgICAgICAgICBhbGxvd0hUTUw6IHRydWUsXG4gICAgICAgICAgICBzaG93T25DcmVhdGU6IHRydWUsXG4gICAgICAgICAgICB0aGVtZTogXCJsaWdodC1ib3JkZXJcIixcbiAgICAgICAgICAgIHBsYWNlbWVudDogXCJib3R0b20tc3RhcnRcIixcbiAgICAgICAgICAgIGludGVyYWN0aXZlOiB0cnVlLFxuICAgICAgICAgICAgaW50ZXJhY3RpdmVEZWJvdW5jZTogNTAsXG4gICAgICAgICAgICBhcnJvdzogZmFsc2UsXG4gICAgICAgICAgICBvZmZzZXQ6IFswLCA0XSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGRyb3Bkb3duLm91dGVySFRNTCxcbiAgICAgICAgICAgIG9uSGlkZGVuKGlucykge1xuICAgICAgICAgICAgICBpbnMuZGVzdHJveSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uQ3JlYXRlKGlucykge1xuICAgICAgICAgICAgICBbLi4uaW5zLnBvcHBlci5xdWVyeVNlbGVjdG9yQWxsKFwiLmJ5dGVtZC1kcm9wZG93bi1pdGVtXCIpXS5mb3JFYWNoKChlbCwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICBjb25zdCBhY3Rpb25IYW5kbGVyID0gKF9hID0gaGFuZGxlci5hY3Rpb25zW2ldKSA9PSBudWxsID8gdm9pZCAwIDogX2EuaGFuZGxlcjtcbiAgICAgICAgICAgICAgICBpZiAoKGFjdGlvbkhhbmRsZXIgPT0gbnVsbCA/IHZvaWQgMCA6IGFjdGlvbkhhbmRsZXIudHlwZSkgPT09IFwiYWN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHsgbW91c2VlbnRlciwgbW91c2VsZWF2ZSB9ID0gYWN0aW9uSGFuZGxlcjtcbiAgICAgICAgICAgICAgICAgIGlmIChtb3VzZWVudGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWVudGVyXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBtb3VzZWVudGVyKGNvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGlmIChtb3VzZWxlYXZlKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBtb3VzZWxlYXZlKGNvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgb25Nb3VudCgoKSA9PiB7XG4gICAgaW5pdDIoKTtcbiAgfSk7XG4gIGZ1bmN0aW9uIGhhbmRsZUNsaWNrKGUpIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0LmNsb3Nlc3QoYFske3RpcHB5UGF0aEtleX1dYCk7XG4gICAgaWYgKCF0YXJnZXQpXG4gICAgICByZXR1cm47XG4gICAgY29uc3QgaGFuZGxlciA9IChfYiA9IChfYSA9IGdldFBheWxvYWRGcm9tRWxlbWVudCh0YXJnZXQpKSA9PSBudWxsID8gdm9pZCAwIDogX2EuaXRlbSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLmhhbmRsZXI7XG4gICAgaWYgKChoYW5kbGVyID09IG51bGwgPyB2b2lkIDAgOiBoYW5kbGVyLnR5cGUpID09PSBcImFjdGlvblwiKSB7XG4gICAgICBoYW5kbGVyLmNsaWNrKGNvbnRleHQpO1xuICAgIH1cbiAgICBkZWxlZ2F0ZUluc3RhbmNlID09IG51bGwgPyB2b2lkIDAgOiBkZWxlZ2F0ZUluc3RhbmNlLmRlc3Ryb3koKTtcbiAgICBpbml0MigpO1xuICB9XG4gIGNvbnN0IGNsaWNrX2hhbmRsZXIgPSAoKSA9PiBkaXNwYXRjaChcInRhYlwiLCBcIndyaXRlXCIpO1xuICBjb25zdCBrZXlkb3duX2hhbmRsZXIgPSAoZSkgPT4gW1wiRW50ZXJcIiwgXCJTcGFjZVwiXS5pbmNsdWRlcyhlLmNvZGUpICYmIGRpc3BhdGNoKFwidGFiXCIsIFwid3JpdGVcIik7XG4gIGNvbnN0IGNsaWNrX2hhbmRsZXJfMSA9ICgpID0+IGRpc3BhdGNoKFwidGFiXCIsIFwicHJldmlld1wiKTtcbiAgY29uc3Qga2V5ZG93bl9oYW5kbGVyXzEgPSAoZSkgPT4gW1wiRW50ZXJcIiwgXCJTcGFjZVwiXS5pbmNsdWRlcyhlLmNvZGUpICYmIGRpc3BhdGNoKFwidGFiXCIsIFwicHJldmlld1wiKTtcbiAgZnVuY3Rpb24gZGl2Ml9iaW5kaW5nKCQkdmFsdWUpIHtcbiAgICBiaW5kaW5nX2NhbGxiYWNrc1skJHZhbHVlID8gXCJ1bnNoaWZ0XCIgOiBcInB1c2hcIl0oKCkgPT4ge1xuICAgICAgdG9vbGJhciA9ICQkdmFsdWU7XG4gICAgICAkJGludmFsaWRhdGUoNCwgdG9vbGJhcik7XG4gICAgfSk7XG4gIH1cbiAgY29uc3Qga2V5ZG93bl9oYW5kbGVyXzIgPSAoZSkgPT4gW1wiRW50ZXJcIiwgXCJTcGFjZVwiXS5pbmNsdWRlcyhlLmNvZGUpICYmIGhhbmRsZUNsaWNrKGUpO1xuICAkJHNlbGYuJCRzZXQgPSAoJCRwcm9wczIpID0+IHtcbiAgICBpZiAoXCJjb250ZXh0XCIgaW4gJCRwcm9wczIpXG4gICAgICAkJGludmFsaWRhdGUoOCwgY29udGV4dCA9ICQkcHJvcHMyLmNvbnRleHQpO1xuICAgIGlmIChcInNwbGl0XCIgaW4gJCRwcm9wczIpXG4gICAgICAkJGludmFsaWRhdGUoMCwgc3BsaXQgPSAkJHByb3BzMi5zcGxpdCk7XG4gICAgaWYgKFwiYWN0aXZlVGFiXCIgaW4gJCRwcm9wczIpXG4gICAgICAkJGludmFsaWRhdGUoMSwgYWN0aXZlVGFiID0gJCRwcm9wczIuYWN0aXZlVGFiKTtcbiAgICBpZiAoXCJmdWxsc2NyZWVuXCIgaW4gJCRwcm9wczIpXG4gICAgICAkJGludmFsaWRhdGUoOSwgZnVsbHNjcmVlbjIgPSAkJHByb3BzMi5mdWxsc2NyZWVuKTtcbiAgICBpZiAoXCJzaWRlYmFyXCIgaW4gJCRwcm9wczIpXG4gICAgICAkJGludmFsaWRhdGUoMTAsIHNpZGViYXIgPSAkJHByb3BzMi5zaWRlYmFyKTtcbiAgICBpZiAoXCJsb2NhbGVcIiBpbiAkJHByb3BzMilcbiAgICAgICQkaW52YWxpZGF0ZSgyLCBsb2NhbGUgPSAkJHByb3BzMi5sb2NhbGUpO1xuICAgIGlmIChcImFjdGlvbnNcIiBpbiAkJHByb3BzMilcbiAgICAgICQkaW52YWxpZGF0ZSgzLCBhY3Rpb25zID0gJCRwcm9wczIuYWN0aW9ucyk7XG4gICAgaWYgKFwicmlnaHRBZmZlcmVudEFjdGlvbnNcIiBpbiAkJHByb3BzMilcbiAgICAgICQkaW52YWxpZGF0ZSgxMSwgcmlnaHRBZmZlcmVudEFjdGlvbnMgPSAkJHByb3BzMi5yaWdodEFmZmVyZW50QWN0aW9ucyk7XG4gIH07XG4gICQkc2VsZi4kJC51cGRhdGUgPSAoKSA9PiB7XG4gICAgaWYgKCQkc2VsZi4kJC5kaXJ0eSAmIC8qc2lkZWJhciovXG4gICAgMTAyNCkge1xuICAgICAgJCRpbnZhbGlkYXRlKDE1LCB0b2NBY3RpdmUgPSBzaWRlYmFyID09PSBcInRvY1wiKTtcbiAgICB9XG4gICAgaWYgKCQkc2VsZi4kJC5kaXJ0eSAmIC8qc2lkZWJhciovXG4gICAgMTAyNCkge1xuICAgICAgJCRpbnZhbGlkYXRlKDE0LCBoZWxwQWN0aXZlID0gc2lkZWJhciA9PT0gXCJoZWxwXCIpO1xuICAgIH1cbiAgICBpZiAoJCRzZWxmLiQkLmRpcnR5ICYgLyphY3RpdmVUYWIqL1xuICAgIDIpIHtcbiAgICAgICQkaW52YWxpZGF0ZSgxMywgd3JpdGVBY3RpdmUgPSBhY3RpdmVUYWIgPT09IFwid3JpdGVcIik7XG4gICAgfVxuICAgIGlmICgkJHNlbGYuJCQuZGlydHkgJiAvKmFjdGl2ZVRhYiovXG4gICAgMikge1xuICAgICAgJCRpbnZhbGlkYXRlKDEyLCBwcmV2aWV3QWN0aXZlID0gYWN0aXZlVGFiID09PSBcInByZXZpZXdcIik7XG4gICAgfVxuICAgIGlmICgkJHNlbGYuJCQuZGlydHkgJiAvKnRvY0FjdGl2ZSwgbG9jYWxlLCBoZWxwQWN0aXZlLCB3cml0ZUFjdGl2ZSwgc3BsaXQsIHByZXZpZXdBY3RpdmUsIGZ1bGxzY3JlZW4sIHJpZ2h0QWZmZXJlbnRBY3Rpb25zKi9cbiAgICA2NDAwNSkge1xuICAgICAgJCRpbnZhbGlkYXRlKDUsIHJpZ2h0QWN0aW9ucyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIHRpdGxlOiB0b2NBY3RpdmUgPyBsb2NhbGUuY2xvc2VUb2MgOiBsb2NhbGUudG9jLFxuICAgICAgICAgIGljb246IGljb25zLkFsaWduVGV4dExlZnRPbmUsXG4gICAgICAgICAgaGFuZGxlcjoge1xuICAgICAgICAgICAgdHlwZTogXCJhY3Rpb25cIixcbiAgICAgICAgICAgIGNsaWNrKCkge1xuICAgICAgICAgICAgICBkaXNwYXRjaChcImNsaWNrXCIsIFwidG9jXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgYWN0aXZlOiB0b2NBY3RpdmVcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHRpdGxlOiBoZWxwQWN0aXZlID8gbG9jYWxlLmNsb3NlSGVscCA6IGxvY2FsZS5oZWxwLFxuICAgICAgICAgIGljb246IGljb25zLkhlbHBjZW50ZXIsXG4gICAgICAgICAgaGFuZGxlcjoge1xuICAgICAgICAgICAgdHlwZTogXCJhY3Rpb25cIixcbiAgICAgICAgICAgIGNsaWNrKCkge1xuICAgICAgICAgICAgICBkaXNwYXRjaChcImNsaWNrXCIsIFwiaGVscFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGFjdGl2ZTogaGVscEFjdGl2ZVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgdGl0bGU6IHdyaXRlQWN0aXZlID8gbG9jYWxlLmV4aXRXcml0ZU9ubHkgOiBsb2NhbGUud3JpdGVPbmx5LFxuICAgICAgICAgIGljb246IGljb25zLkxlZnRFeHBhbmQsXG4gICAgICAgICAgaGFuZGxlcjoge1xuICAgICAgICAgICAgdHlwZTogXCJhY3Rpb25cIixcbiAgICAgICAgICAgIGNsaWNrKCkge1xuICAgICAgICAgICAgICBkaXNwYXRjaChcInRhYlwiLCBcIndyaXRlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgYWN0aXZlOiB3cml0ZUFjdGl2ZSxcbiAgICAgICAgICBoaWRkZW46ICFzcGxpdFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgdGl0bGU6IHByZXZpZXdBY3RpdmUgPyBsb2NhbGUuZXhpdFByZXZpZXdPbmx5IDogbG9jYWxlLnByZXZpZXdPbmx5LFxuICAgICAgICAgIGljb246IGljb25zLlJpZ2h0RXhwYW5kLFxuICAgICAgICAgIGhhbmRsZXI6IHtcbiAgICAgICAgICAgIHR5cGU6IFwiYWN0aW9uXCIsXG4gICAgICAgICAgICBjbGljaygpIHtcbiAgICAgICAgICAgICAgZGlzcGF0Y2goXCJ0YWJcIiwgXCJwcmV2aWV3XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgYWN0aXZlOiBwcmV2aWV3QWN0aXZlLFxuICAgICAgICAgIGhpZGRlbjogIXNwbGl0XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICB0aXRsZTogZnVsbHNjcmVlbjIgPyBsb2NhbGUuZXhpdEZ1bGxzY3JlZW4gOiBsb2NhbGUuZnVsbHNjcmVlbixcbiAgICAgICAgICBpY29uOiBmdWxsc2NyZWVuMiA/IGljb25zLk9mZlNjcmVlbiA6IGljb25zLkZ1bGxTY3JlZW4sXG4gICAgICAgICAgaGFuZGxlcjoge1xuICAgICAgICAgICAgdHlwZTogXCJhY3Rpb25cIixcbiAgICAgICAgICAgIGNsaWNrKCkge1xuICAgICAgICAgICAgICBkaXNwYXRjaChcImNsaWNrXCIsIFwiZnVsbHNjcmVlblwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICB0aXRsZTogbG9jYWxlLnNvdXJjZSxcbiAgICAgICAgICBpY29uOiBpY29ucy5HaXRodWJPbmUsXG4gICAgICAgICAgaGFuZGxlcjoge1xuICAgICAgICAgICAgdHlwZTogXCJhY3Rpb25cIixcbiAgICAgICAgICAgIGNsaWNrKCkge1xuICAgICAgICAgICAgICB3aW5kb3cub3BlbihcImh0dHBzOi8vZ2l0aHViLmNvbS9ieXRlZGFuY2UvYnl0ZW1kXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgLi4ucmlnaHRBZmZlcmVudEFjdGlvbnNcbiAgICAgIF0pO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIFtcbiAgICBzcGxpdCxcbiAgICBhY3RpdmVUYWIsXG4gICAgbG9jYWxlLFxuICAgIGFjdGlvbnMsXG4gICAgdG9vbGJhcixcbiAgICByaWdodEFjdGlvbnMsXG4gICAgZGlzcGF0Y2gsXG4gICAgaGFuZGxlQ2xpY2ssXG4gICAgY29udGV4dCxcbiAgICBmdWxsc2NyZWVuMixcbiAgICBzaWRlYmFyLFxuICAgIHJpZ2h0QWZmZXJlbnRBY3Rpb25zLFxuICAgIHByZXZpZXdBY3RpdmUsXG4gICAgd3JpdGVBY3RpdmUsXG4gICAgaGVscEFjdGl2ZSxcbiAgICB0b2NBY3RpdmUsXG4gICAgY2xpY2tfaGFuZGxlcixcbiAgICBrZXlkb3duX2hhbmRsZXIsXG4gICAgY2xpY2tfaGFuZGxlcl8xLFxuICAgIGtleWRvd25faGFuZGxlcl8xLFxuICAgIGRpdjJfYmluZGluZyxcbiAgICBrZXlkb3duX2hhbmRsZXJfMlxuICBdO1xufVxuY2xhc3MgVG9vbGJhciBleHRlbmRzIFN2ZWx0ZUNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICBzdXBlcigpO1xuICAgIGluaXQodGhpcywgb3B0aW9ucywgaW5zdGFuY2UkMiwgY3JlYXRlX2ZyYWdtZW50JDIsIG5vdF9lcXVhbCwge1xuICAgICAgY29udGV4dDogOCxcbiAgICAgIHNwbGl0OiAwLFxuICAgICAgYWN0aXZlVGFiOiAxLFxuICAgICAgZnVsbHNjcmVlbjogOSxcbiAgICAgIHNpZGViYXI6IDEwLFxuICAgICAgbG9jYWxlOiAyLFxuICAgICAgYWN0aW9uczogMyxcbiAgICAgIHJpZ2h0QWZmZXJlbnRBY3Rpb25zOiAxMVxuICAgIH0pO1xuICB9XG59XG5jb25zdCBzY2hlbWFTdHIgPSBKU09OLnN0cmluZ2lmeShkZWZhdWx0U2NoZW1hKTtcbmZ1bmN0aW9uIGdldFByb2Nlc3Nvcih7XG4gIHNhbml0aXplLFxuICBwbHVnaW5zLFxuICByZW1hcmtSZWh5cGU6IHJlbWFya1JlaHlwZU9wdGlvbnMgPSB7fVxufSkge1xuICBsZXQgcHJvY2Vzc29yID0gdW5pZmllZCgpLnVzZShyZW1hcmtQYXJzZSk7XG4gIHBsdWdpbnMgPT0gbnVsbCA/IHZvaWQgMCA6IHBsdWdpbnMuZm9yRWFjaCgoeyByZW1hcmsgfSkgPT4ge1xuICAgIGlmIChyZW1hcmspXG4gICAgICBwcm9jZXNzb3IgPSByZW1hcmsocHJvY2Vzc29yKTtcbiAgfSk7XG4gIHByb2Nlc3NvciA9IHByb2Nlc3Nvci51c2UocmVtYXJrUmVoeXBlLCB7IGFsbG93RGFuZ2Vyb3VzSHRtbDogdHJ1ZSwgLi4ucmVtYXJrUmVoeXBlT3B0aW9ucyB9KS51c2UocmVoeXBlUmF3KTtcbiAgbGV0IHNjaGVtYSA9IEpTT04ucGFyc2Uoc2NoZW1hU3RyKTtcbiAgc2NoZW1hLmF0dHJpYnV0ZXNbXCIqXCJdLnB1c2goXCJjbGFzc05hbWVcIik7XG4gIGlmICh0eXBlb2Ygc2FuaXRpemUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIHNjaGVtYSA9IHNhbml0aXplKHNjaGVtYSk7XG4gIH1cbiAgcHJvY2Vzc29yID0gcHJvY2Vzc29yLnVzZShyZWh5cGVTYW5pdGl6ZSwgc2NoZW1hKTtcbiAgcGx1Z2lucyA9PSBudWxsID8gdm9pZCAwIDogcGx1Z2lucy5mb3JFYWNoKCh7IHJlaHlwZSB9KSA9PiB7XG4gICAgaWYgKHJlaHlwZSlcbiAgICAgIHByb2Nlc3NvciA9IHJlaHlwZShwcm9jZXNzb3IpO1xuICB9KTtcbiAgcmV0dXJuIHByb2Nlc3Nvci51c2UocmVoeXBlU3RyaW5naWZ5KTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZV9mcmFnbWVudCQxKGN0eCkge1xuICBsZXQgZGl2O1xuICByZXR1cm4ge1xuICAgIGMoKSB7XG4gICAgICBkaXYgPSBlbGVtZW50KFwiZGl2XCIpO1xuICAgICAgYXR0cihkaXYsIFwiY2xhc3NcIiwgXCJtYXJrZG93bi1ib2R5XCIpO1xuICAgIH0sXG4gICAgbSh0YXJnZXQsIGFuY2hvcikge1xuICAgICAgaW5zZXJ0KHRhcmdldCwgZGl2LCBhbmNob3IpO1xuICAgICAgZGl2LmlubmVySFRNTCA9IC8qaHRtbCovXG4gICAgICBjdHhbMV07XG4gICAgICBjdHhbOF0oZGl2KTtcbiAgICB9LFxuICAgIHAoY3R4MiwgW2RpcnR5XSkge1xuICAgICAgaWYgKGRpcnR5ICYgLypodG1sKi9cbiAgICAgIDIpXG4gICAgICAgIGRpdi5pbm5lckhUTUwgPSAvKmh0bWwqL1xuICAgICAgICBjdHgyWzFdO1xuICAgIH0sXG4gICAgaTogbm9vcCxcbiAgICBvOiBub29wLFxuICAgIGQoZGV0YWNoaW5nKSB7XG4gICAgICBpZiAoZGV0YWNoaW5nKVxuICAgICAgICBkZXRhY2goZGl2KTtcbiAgICAgIGN0eFs4XShudWxsKTtcbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiBpbnN0YW5jZSQxKCQkc2VsZiwgJCRwcm9wcywgJCRpbnZhbGlkYXRlKSB7XG4gIGxldCBodG1sO1xuICBjb25zdCBkaXNwYXRjaCA9IGNyZWF0ZUV2ZW50RGlzcGF0Y2hlcigpO1xuICBsZXQgeyB2YWx1ZSA9IFwiXCIgfSA9ICQkcHJvcHM7XG4gIGxldCB7IHBsdWdpbnMgPSBbXSB9ID0gJCRwcm9wcztcbiAgbGV0IHsgc2FuaXRpemUgPSB2b2lkIDAgfSA9ICQkcHJvcHM7XG4gIGxldCB7IHJlbWFya1JlaHlwZTogcmVtYXJrUmVoeXBlMiA9IHZvaWQgMCB9ID0gJCRwcm9wcztcbiAgbGV0IG1hcmtkb3duQm9keTtcbiAgbGV0IGNicyA9IFtdO1xuICBmdW5jdGlvbiBvbigpIHtcbiAgICBjYnMgPSBwbHVnaW5zLm1hcCgocCkgPT4ge1xuICAgICAgdmFyIF9hO1xuICAgICAgcmV0dXJuIChfYSA9IHAudmlld2VyRWZmZWN0KSA9PSBudWxsID8gdm9pZCAwIDogX2EuY2FsbChwLCB7IG1hcmtkb3duQm9keSwgZmlsZSB9KTtcbiAgICB9KTtcbiAgfVxuICBmdW5jdGlvbiBvZmYoKSB7XG4gICAgY2JzLmZvckVhY2goKGNiKSA9PiBjYiA9PSBudWxsID8gdm9pZCAwIDogY2IoKSk7XG4gIH1cbiAgb25Nb3VudCgoKSA9PiB7XG4gICAgbWFya2Rvd25Cb2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgdmFyIF9hO1xuICAgICAgY29uc3QgJCA9IGUudGFyZ2V0O1xuICAgICAgaWYgKCQudGFnTmFtZSAhPT0gXCJBXCIpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGNvbnN0IGhyZWYgPSAkLmdldEF0dHJpYnV0ZShcImhyZWZcIik7XG4gICAgICBpZiAoIShocmVmID09IG51bGwgPyB2b2lkIDAgOiBocmVmLnN0YXJ0c1dpdGgoXCIjXCIpKSlcbiAgICAgICAgcmV0dXJuO1xuICAgICAgKF9hID0gbWFya2Rvd25Cb2R5LnF1ZXJ5U2VsZWN0b3IoXCIjdXNlci1jb250ZW50LVwiICsgaHJlZi5zbGljZSgxKSkpID09IG51bGwgPyB2b2lkIDAgOiBfYS5zY3JvbGxJbnRvVmlldygpO1xuICAgIH0pO1xuICB9KTtcbiAgb25EZXN0cm95KG9mZik7XG4gIGxldCBmaWxlO1xuICBsZXQgaSA9IDA7XG4gIGNvbnN0IGRpc3BhdGNoUGx1Z2luID0gKCkgPT4gKHRyZWUsIGZpbGUyKSA9PiB7XG4gICAgdGljaygpLnRoZW4oKCkgPT4ge1xuICAgICAgZGlzcGF0Y2goXCJoYXN0XCIsIHsgaGFzdDogdHJlZSwgZmlsZTogZmlsZTIgfSk7XG4gICAgfSk7XG4gIH07XG4gIGFmdGVyVXBkYXRlKCgpID0+IHtcbiAgICBvZmYoKTtcbiAgICBvbigpO1xuICB9KTtcbiAgZnVuY3Rpb24gZGl2X2JpbmRpbmcoJCR2YWx1ZSkge1xuICAgIGJpbmRpbmdfY2FsbGJhY2tzWyQkdmFsdWUgPyBcInVuc2hpZnRcIiA6IFwicHVzaFwiXSgoKSA9PiB7XG4gICAgICBtYXJrZG93bkJvZHkgPSAkJHZhbHVlO1xuICAgICAgJCRpbnZhbGlkYXRlKDAsIG1hcmtkb3duQm9keSk7XG4gICAgfSk7XG4gIH1cbiAgJCRzZWxmLiQkc2V0ID0gKCQkcHJvcHMyKSA9PiB7XG4gICAgaWYgKFwidmFsdWVcIiBpbiAkJHByb3BzMilcbiAgICAgICQkaW52YWxpZGF0ZSgyLCB2YWx1ZSA9ICQkcHJvcHMyLnZhbHVlKTtcbiAgICBpZiAoXCJwbHVnaW5zXCIgaW4gJCRwcm9wczIpXG4gICAgICAkJGludmFsaWRhdGUoMywgcGx1Z2lucyA9ICQkcHJvcHMyLnBsdWdpbnMpO1xuICAgIGlmIChcInNhbml0aXplXCIgaW4gJCRwcm9wczIpXG4gICAgICAkJGludmFsaWRhdGUoNCwgc2FuaXRpemUgPSAkJHByb3BzMi5zYW5pdGl6ZSk7XG4gICAgaWYgKFwicmVtYXJrUmVoeXBlXCIgaW4gJCRwcm9wczIpXG4gICAgICAkJGludmFsaWRhdGUoNSwgcmVtYXJrUmVoeXBlMiA9ICQkcHJvcHMyLnJlbWFya1JlaHlwZSk7XG4gIH07XG4gICQkc2VsZi4kJC51cGRhdGUgPSAoKSA9PiB7XG4gICAgaWYgKCQkc2VsZi4kJC5kaXJ0eSAmIC8qc2FuaXRpemUsIHBsdWdpbnMsIHJlbWFya1JlaHlwZSwgdmFsdWUsIGkqL1xuICAgIDE4OCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgJCRpbnZhbGlkYXRlKDYsIGZpbGUgPSBnZXRQcm9jZXNzb3Ioe1xuICAgICAgICAgIHNhbml0aXplLFxuICAgICAgICAgIHBsdWdpbnM6IFtcbiAgICAgICAgICAgIC4uLnBsdWdpbnMsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIC8vIHJlbWFyazogKHApID0+XG4gICAgICAgICAgICAgIC8vICAgcC51c2UoKCkgPT4gKHRyZWUpID0+e1xuICAgICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2codHJlZSlcbiAgICAgICAgICAgICAgLy8gICB9KSxcbiAgICAgICAgICAgICAgcmVoeXBlOiAocHJvY2Vzc29yKSA9PiBwcm9jZXNzb3IudXNlKGRpc3BhdGNoUGx1Z2luKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF0sXG4gICAgICAgICAgcmVtYXJrUmVoeXBlOiByZW1hcmtSZWh5cGUyXG4gICAgICAgIH0pLnByb2Nlc3NTeW5jKHZhbHVlKSk7XG4gICAgICAgICQkaW52YWxpZGF0ZSg3LCBpKyssIGkpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCQkc2VsZi4kJC5kaXJ0eSAmIC8qZmlsZSwgaSovXG4gICAgMTkyKSB7XG4gICAgICAkJGludmFsaWRhdGUoMSwgaHRtbCA9IGAke2ZpbGV9PCEtLSR7aX0tLT5gKTtcbiAgICB9XG4gIH07XG4gIHJldHVybiBbXG4gICAgbWFya2Rvd25Cb2R5LFxuICAgIGh0bWwsXG4gICAgdmFsdWUsXG4gICAgcGx1Z2lucyxcbiAgICBzYW5pdGl6ZSxcbiAgICByZW1hcmtSZWh5cGUyLFxuICAgIGZpbGUsXG4gICAgaSxcbiAgICBkaXZfYmluZGluZ1xuICBdO1xufVxuY2xhc3MgVmlld2VyIGV4dGVuZHMgU3ZlbHRlQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHN1cGVyKCk7XG4gICAgaW5pdCh0aGlzLCBvcHRpb25zLCBpbnN0YW5jZSQxLCBjcmVhdGVfZnJhZ21lbnQkMSwgbm90X2VxdWFsLCB7XG4gICAgICB2YWx1ZTogMixcbiAgICAgIHBsdWdpbnM6IDMsXG4gICAgICBzYW5pdGl6ZTogNCxcbiAgICAgIHJlbWFya1JlaHlwZTogNVxuICAgIH0pO1xuICB9XG59XG5mdW5jdGlvbiBjcmVhdGVfaWZfYmxvY2soY3R4KSB7XG4gIGxldCB2aWV3ZXI7XG4gIGxldCBjdXJyZW50O1xuICB2aWV3ZXIgPSBuZXcgVmlld2VyKHtcbiAgICBwcm9wczoge1xuICAgICAgdmFsdWU6IChcbiAgICAgICAgLypkZWJvdW5jZWRWYWx1ZSovXG4gICAgICAgIGN0eFsxNl1cbiAgICAgICksXG4gICAgICBwbHVnaW5zOiAoXG4gICAgICAgIC8qcGx1Z2lucyovXG4gICAgICAgIGN0eFsxXVxuICAgICAgKSxcbiAgICAgIHNhbml0aXplOiAoXG4gICAgICAgIC8qc2FuaXRpemUqL1xuICAgICAgICBjdHhbMl1cbiAgICAgICksXG4gICAgICByZW1hcmtSZWh5cGU6IChcbiAgICAgICAgLypyZW1hcmtSZWh5cGUqL1xuICAgICAgICBjdHhbM11cbiAgICAgIClcbiAgICB9XG4gIH0pO1xuICB2aWV3ZXIuJG9uKFxuICAgIFwiaGFzdFwiLFxuICAgIC8qaGFzdF9oYW5kbGVyKi9cbiAgICBjdHhbMzVdXG4gICk7XG4gIHJldHVybiB7XG4gICAgYygpIHtcbiAgICAgIGNyZWF0ZV9jb21wb25lbnQodmlld2VyLiQkLmZyYWdtZW50KTtcbiAgICB9LFxuICAgIG0odGFyZ2V0LCBhbmNob3IpIHtcbiAgICAgIG1vdW50X2NvbXBvbmVudCh2aWV3ZXIsIHRhcmdldCwgYW5jaG9yKTtcbiAgICAgIGN1cnJlbnQgPSB0cnVlO1xuICAgIH0sXG4gICAgcChjdHgyLCBkaXJ0eSkge1xuICAgICAgY29uc3Qgdmlld2VyX2NoYW5nZXMgPSB7fTtcbiAgICAgIGlmIChkaXJ0eVswXSAmIC8qZGVib3VuY2VkVmFsdWUqL1xuICAgICAgNjU1MzYpXG4gICAgICAgIHZpZXdlcl9jaGFuZ2VzLnZhbHVlID0gLypkZWJvdW5jZWRWYWx1ZSovXG4gICAgICAgIGN0eDJbMTZdO1xuICAgICAgaWYgKGRpcnR5WzBdICYgLypwbHVnaW5zKi9cbiAgICAgIDIpXG4gICAgICAgIHZpZXdlcl9jaGFuZ2VzLnBsdWdpbnMgPSAvKnBsdWdpbnMqL1xuICAgICAgICBjdHgyWzFdO1xuICAgICAgaWYgKGRpcnR5WzBdICYgLypzYW5pdGl6ZSovXG4gICAgICA0KVxuICAgICAgICB2aWV3ZXJfY2hhbmdlcy5zYW5pdGl6ZSA9IC8qc2FuaXRpemUqL1xuICAgICAgICBjdHgyWzJdO1xuICAgICAgaWYgKGRpcnR5WzBdICYgLypyZW1hcmtSZWh5cGUqL1xuICAgICAgOClcbiAgICAgICAgdmlld2VyX2NoYW5nZXMucmVtYXJrUmVoeXBlID0gLypyZW1hcmtSZWh5cGUqL1xuICAgICAgICBjdHgyWzNdO1xuICAgICAgdmlld2VyLiRzZXQodmlld2VyX2NoYW5nZXMpO1xuICAgIH0sXG4gICAgaShsb2NhbCkge1xuICAgICAgaWYgKGN1cnJlbnQpXG4gICAgICAgIHJldHVybjtcbiAgICAgIHRyYW5zaXRpb25faW4odmlld2VyLiQkLmZyYWdtZW50LCBsb2NhbCk7XG4gICAgICBjdXJyZW50ID0gdHJ1ZTtcbiAgICB9LFxuICAgIG8obG9jYWwpIHtcbiAgICAgIHRyYW5zaXRpb25fb3V0KHZpZXdlci4kJC5mcmFnbWVudCwgbG9jYWwpO1xuICAgICAgY3VycmVudCA9IGZhbHNlO1xuICAgIH0sXG4gICAgZChkZXRhY2hpbmcpIHtcbiAgICAgIGRlc3Ryb3lfY29tcG9uZW50KHZpZXdlciwgZGV0YWNoaW5nKTtcbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiBjcmVhdGVfZnJhZ21lbnQoY3R4KSB7XG4gIGxldCBkaXY1O1xuICBsZXQgdG9vbGJhcjtcbiAgbGV0IGRpdjQ7XG4gIGxldCBkaXYwO1xuICBsZXQgZGl2MF9zdHlsZV92YWx1ZTtcbiAgbGV0IGRpdjE7XG4gIGxldCBkaXYxX3N0eWxlX3ZhbHVlO1xuICBsZXQgZGl2MztcbiAgbGV0IGRpdjI7XG4gIGxldCByYXdfdmFsdWUgPSBpY29ucy5DbG9zZSArIFwiXCI7XG4gIGxldCBoZWxwMjtcbiAgbGV0IHRvYzI7XG4gIGxldCBzdGF0dXM7XG4gIGxldCBjdXJyZW50O1xuICBsZXQgbW91bnRlZDtcbiAgbGV0IGRpc3Bvc2U7XG4gIHRvb2xiYXIgPSBuZXcgVG9vbGJhcih7XG4gICAgcHJvcHM6IHtcbiAgICAgIGNvbnRleHQ6IChcbiAgICAgICAgLypjb250ZXh0Ki9cbiAgICAgICAgY3R4WzEwXVxuICAgICAgKSxcbiAgICAgIHNwbGl0OiAoXG4gICAgICAgIC8qc3BsaXQqL1xuICAgICAgICBjdHhbMTFdXG4gICAgICApLFxuICAgICAgYWN0aXZlVGFiOiAoXG4gICAgICAgIC8qYWN0aXZlVGFiKi9cbiAgICAgICAgY3R4WzhdXG4gICAgICApLFxuICAgICAgc2lkZWJhcjogKFxuICAgICAgICAvKnNpZGViYXIqL1xuICAgICAgICBjdHhbOV1cbiAgICAgICksXG4gICAgICBmdWxsc2NyZWVuOiAoXG4gICAgICAgIC8qZnVsbHNjcmVlbiovXG4gICAgICAgIGN0eFsxNV1cbiAgICAgICksXG4gICAgICByaWdodEFmZmVyZW50QWN0aW9uczogKFxuICAgICAgICAvKmFjdGlvbnMqL1xuICAgICAgICBjdHhbMjFdLnJpZ2h0QWN0aW9uc1xuICAgICAgKSxcbiAgICAgIGxvY2FsZTogKFxuICAgICAgICAvKm1lcmdlZExvY2FsZSovXG4gICAgICAgIGN0eFsxMl1cbiAgICAgICksXG4gICAgICBhY3Rpb25zOiAoXG4gICAgICAgIC8qYWN0aW9ucyovXG4gICAgICAgIGN0eFsyMV0ubGVmdEFjdGlvbnNcbiAgICAgIClcbiAgICB9XG4gIH0pO1xuICB0b29sYmFyLiRvbihcbiAgICBcImtleVwiLFxuICAgIC8qa2V5X2hhbmRsZXIqL1xuICAgIGN0eFszMV1cbiAgKTtcbiAgdG9vbGJhci4kb24oXG4gICAgXCJ0YWJcIixcbiAgICAvKnRhYl9oYW5kbGVyKi9cbiAgICBjdHhbMzJdXG4gICk7XG4gIHRvb2xiYXIuJG9uKFxuICAgIFwiY2xpY2tcIixcbiAgICAvKmNsaWNrX2hhbmRsZXIqL1xuICAgIGN0eFszM11cbiAgKTtcbiAgbGV0IGlmX2Jsb2NrID0gIS8qb3ZlcnJpZGVQcmV2aWV3Ki9cbiAgY3R4WzRdICYmIC8qc3BsaXQqL1xuICAoY3R4WzExXSB8fCAvKmFjdGl2ZVRhYiovXG4gIGN0eFs4XSA9PT0gXCJwcmV2aWV3XCIpICYmIGNyZWF0ZV9pZl9ibG9jayhjdHgpO1xuICBoZWxwMiA9IG5ldyBIZWxwKHtcbiAgICBwcm9wczoge1xuICAgICAgbG9jYWxlOiAoXG4gICAgICAgIC8qbWVyZ2VkTG9jYWxlKi9cbiAgICAgICAgY3R4WzEyXVxuICAgICAgKSxcbiAgICAgIGFjdGlvbnM6IChcbiAgICAgICAgLyphY3Rpb25zKi9cbiAgICAgICAgY3R4WzIxXS5sZWZ0QWN0aW9uc1xuICAgICAgKSxcbiAgICAgIHZpc2libGU6IChcbiAgICAgICAgLypzaWRlYmFyKi9cbiAgICAgICAgY3R4WzldID09PSBcImhlbHBcIlxuICAgICAgKVxuICAgIH1cbiAgfSk7XG4gIHRvYzIgPSBuZXcgVG9jKHtcbiAgICBwcm9wczoge1xuICAgICAgaGFzdDogKFxuICAgICAgICAvKmhhc3QqL1xuICAgICAgICBjdHhbMThdXG4gICAgICApLFxuICAgICAgbG9jYWxlOiAoXG4gICAgICAgIC8qbWVyZ2VkTG9jYWxlKi9cbiAgICAgICAgY3R4WzEyXVxuICAgICAgKSxcbiAgICAgIGN1cnJlbnRCbG9ja0luZGV4OiAoXG4gICAgICAgIC8qY3VycmVudEJsb2NrSW5kZXgqL1xuICAgICAgICBjdHhbMjBdXG4gICAgICApLFxuICAgICAgdmlzaWJsZTogKFxuICAgICAgICAvKnNpZGViYXIqL1xuICAgICAgICBjdHhbOV0gPT09IFwidG9jXCJcbiAgICAgIClcbiAgICB9XG4gIH0pO1xuICB0b2MyLiRvbihcbiAgICBcImNsaWNrXCIsXG4gICAgLypjbGlja19oYW5kbGVyXzIqL1xuICAgIGN0eFszOV1cbiAgKTtcbiAgc3RhdHVzID0gbmV3IFN0YXR1cyh7XG4gICAgcHJvcHM6IHtcbiAgICAgIGxvY2FsZTogKFxuICAgICAgICAvKm1lcmdlZExvY2FsZSovXG4gICAgICAgIGN0eFsxMl1cbiAgICAgICksXG4gICAgICBzaG93U3luYzogIS8qb3ZlcnJpZGVQcmV2aWV3Ki9cbiAgICAgIGN0eFs0XSAmJiAvKnNwbGl0Ki9cbiAgICAgIGN0eFsxMV0sXG4gICAgICB2YWx1ZTogKFxuICAgICAgICAvKmRlYm91bmNlZFZhbHVlKi9cbiAgICAgICAgY3R4WzE2XVxuICAgICAgKSxcbiAgICAgIHN5bmNFbmFibGVkOiAoXG4gICAgICAgIC8qc3luY0VuYWJsZWQqL1xuICAgICAgICBjdHhbMTddXG4gICAgICApLFxuICAgICAgaXNsaW1pdGVkOiAoXG4gICAgICAgIC8qdmFsdWUqL1xuICAgICAgICBjdHhbMF0ubGVuZ3RoID4gLyptYXhMZW5ndGgqL1xuICAgICAgICBjdHhbNV1cbiAgICAgIClcbiAgICB9XG4gIH0pO1xuICBzdGF0dXMuJG9uKFxuICAgIFwic3luY1wiLFxuICAgIC8qc3luY19oYW5kbGVyKi9cbiAgICBjdHhbNDBdXG4gICk7XG4gIHN0YXR1cy4kb24oXG4gICAgXCJ0b3BcIixcbiAgICAvKnRvcF9oYW5kbGVyKi9cbiAgICBjdHhbNDFdXG4gICk7XG4gIHJldHVybiB7XG4gICAgYygpIHtcbiAgICAgIGRpdjUgPSBlbGVtZW50KFwiZGl2XCIpO1xuICAgICAgY3JlYXRlX2NvbXBvbmVudCh0b29sYmFyLiQkLmZyYWdtZW50KTtcbiAgICAgIGRpdjQgPSBlbGVtZW50KFwiZGl2XCIpO1xuICAgICAgZGl2MCA9IGVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBkaXYxID0gZWxlbWVudChcImRpdlwiKTtcbiAgICAgIGlmIChpZl9ibG9jaylcbiAgICAgICAgaWZfYmxvY2suYygpO1xuICAgICAgZGl2MyA9IGVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBkaXYyID0gZWxlbWVudChcImRpdlwiKTtcbiAgICAgIGNyZWF0ZV9jb21wb25lbnQoaGVscDIuJCQuZnJhZ21lbnQpO1xuICAgICAgY3JlYXRlX2NvbXBvbmVudCh0b2MyLiQkLmZyYWdtZW50KTtcbiAgICAgIGNyZWF0ZV9jb21wb25lbnQoc3RhdHVzLiQkLmZyYWdtZW50KTtcbiAgICAgIGF0dHIoZGl2MCwgXCJjbGFzc1wiLCBcImJ5dGVtZC1lZGl0b3JcIik7XG4gICAgICBhdHRyKGRpdjAsIFwic3R5bGVcIiwgZGl2MF9zdHlsZV92YWx1ZSA9IC8qc3R5bGVzKi9cbiAgICAgIGN0eFsyMl0uZWRpdCk7XG4gICAgICBhdHRyKGRpdjEsIFwiY2xhc3NcIiwgXCJieXRlbWQtcHJldmlld1wiKTtcbiAgICAgIGF0dHIoZGl2MSwgXCJzdHlsZVwiLCBkaXYxX3N0eWxlX3ZhbHVlID0gLypzdHlsZXMqL1xuICAgICAgY3R4WzIyXS5wcmV2aWV3KTtcbiAgICAgIGF0dHIoZGl2MiwgXCJjbGFzc1wiLCBcImJ5dGVtZC1zaWRlYmFyLWNsb3NlXCIpO1xuICAgICAgYXR0cihkaXYzLCBcImNsYXNzXCIsIFwiYnl0ZW1kLXNpZGViYXJcIik7XG4gICAgICB0b2dnbGVfY2xhc3MoXG4gICAgICAgIGRpdjMsXG4gICAgICAgIFwiYnl0ZW1kLWhpZGRlblwiLFxuICAgICAgICAvKnNpZGViYXIqL1xuICAgICAgICBjdHhbOV0gPT09IGZhbHNlXG4gICAgICApO1xuICAgICAgYXR0cihkaXY0LCBcImNsYXNzXCIsIFwiYnl0ZW1kLWJvZHlcIik7XG4gICAgICBhdHRyKGRpdjUsIFwiY2xhc3NcIiwgXCJieXRlbWRcIik7XG4gICAgICB0b2dnbGVfY2xhc3MoXG4gICAgICAgIGRpdjUsXG4gICAgICAgIFwiYnl0ZW1kLXNwbGl0XCIsXG4gICAgICAgIC8qc3BsaXQqL1xuICAgICAgICBjdHhbMTFdICYmIC8qYWN0aXZlVGFiKi9cbiAgICAgICAgY3R4WzhdID09PSBmYWxzZVxuICAgICAgKTtcbiAgICAgIHRvZ2dsZV9jbGFzcyhcbiAgICAgICAgZGl2NSxcbiAgICAgICAgXCJieXRlbWQtZnVsbHNjcmVlblwiLFxuICAgICAgICAvKmZ1bGxzY3JlZW4qL1xuICAgICAgICBjdHhbMTVdXG4gICAgICApO1xuICAgIH0sXG4gICAgbSh0YXJnZXQsIGFuY2hvcikge1xuICAgICAgaW5zZXJ0KHRhcmdldCwgZGl2NSwgYW5jaG9yKTtcbiAgICAgIG1vdW50X2NvbXBvbmVudCh0b29sYmFyLCBkaXY1LCBudWxsKTtcbiAgICAgIGFwcGVuZChkaXY1LCBkaXY0KTtcbiAgICAgIGFwcGVuZChkaXY0LCBkaXYwKTtcbiAgICAgIGN0eFszNF0oZGl2MCk7XG4gICAgICBhcHBlbmQoZGl2NCwgZGl2MSk7XG4gICAgICBpZiAoaWZfYmxvY2spXG4gICAgICAgIGlmX2Jsb2NrLm0oZGl2MSwgbnVsbCk7XG4gICAgICBjdHhbMzZdKGRpdjEpO1xuICAgICAgYXBwZW5kKGRpdjQsIGRpdjMpO1xuICAgICAgYXBwZW5kKGRpdjMsIGRpdjIpO1xuICAgICAgZGl2Mi5pbm5lckhUTUwgPSByYXdfdmFsdWU7XG4gICAgICBtb3VudF9jb21wb25lbnQoaGVscDIsIGRpdjMsIG51bGwpO1xuICAgICAgbW91bnRfY29tcG9uZW50KHRvYzIsIGRpdjMsIG51bGwpO1xuICAgICAgbW91bnRfY29tcG9uZW50KHN0YXR1cywgZGl2NSwgbnVsbCk7XG4gICAgICBjdHhbNDJdKGRpdjUpO1xuICAgICAgY3VycmVudCA9IHRydWU7XG4gICAgICBpZiAoIW1vdW50ZWQpIHtcbiAgICAgICAgZGlzcG9zZSA9IFtcbiAgICAgICAgICBsaXN0ZW4oXG4gICAgICAgICAgICBkaXYyLFxuICAgICAgICAgICAgXCJjbGlja1wiLFxuICAgICAgICAgICAgLypjbGlja19oYW5kbGVyXzEqL1xuICAgICAgICAgICAgY3R4WzM3XVxuICAgICAgICAgICksXG4gICAgICAgICAgbGlzdGVuKGRpdjIsIFwia2V5ZG93blwiLCBzZWxmKFxuICAgICAgICAgICAgLyprZXlkb3duX2hhbmRsZXIqL1xuICAgICAgICAgICAgY3R4WzM4XVxuICAgICAgICAgICkpXG4gICAgICAgIF07XG4gICAgICAgIG1vdW50ZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH0sXG4gICAgcChjdHgyLCBkaXJ0eSkge1xuICAgICAgY29uc3QgdG9vbGJhcl9jaGFuZ2VzID0ge307XG4gICAgICBpZiAoZGlydHlbMF0gJiAvKmNvbnRleHQqL1xuICAgICAgMTAyNClcbiAgICAgICAgdG9vbGJhcl9jaGFuZ2VzLmNvbnRleHQgPSAvKmNvbnRleHQqL1xuICAgICAgICBjdHgyWzEwXTtcbiAgICAgIGlmIChkaXJ0eVswXSAmIC8qc3BsaXQqL1xuICAgICAgMjA0OClcbiAgICAgICAgdG9vbGJhcl9jaGFuZ2VzLnNwbGl0ID0gLypzcGxpdCovXG4gICAgICAgIGN0eDJbMTFdO1xuICAgICAgaWYgKGRpcnR5WzBdICYgLyphY3RpdmVUYWIqL1xuICAgICAgMjU2KVxuICAgICAgICB0b29sYmFyX2NoYW5nZXMuYWN0aXZlVGFiID0gLyphY3RpdmVUYWIqL1xuICAgICAgICBjdHgyWzhdO1xuICAgICAgaWYgKGRpcnR5WzBdICYgLypzaWRlYmFyKi9cbiAgICAgIDUxMilcbiAgICAgICAgdG9vbGJhcl9jaGFuZ2VzLnNpZGViYXIgPSAvKnNpZGViYXIqL1xuICAgICAgICBjdHgyWzldO1xuICAgICAgaWYgKGRpcnR5WzBdICYgLypmdWxsc2NyZWVuKi9cbiAgICAgIDMyNzY4KVxuICAgICAgICB0b29sYmFyX2NoYW5nZXMuZnVsbHNjcmVlbiA9IC8qZnVsbHNjcmVlbiovXG4gICAgICAgIGN0eDJbMTVdO1xuICAgICAgaWYgKGRpcnR5WzBdICYgLyphY3Rpb25zKi9cbiAgICAgIDIwOTcxNTIpXG4gICAgICAgIHRvb2xiYXJfY2hhbmdlcy5yaWdodEFmZmVyZW50QWN0aW9ucyA9IC8qYWN0aW9ucyovXG4gICAgICAgIGN0eDJbMjFdLnJpZ2h0QWN0aW9ucztcbiAgICAgIGlmIChkaXJ0eVswXSAmIC8qbWVyZ2VkTG9jYWxlKi9cbiAgICAgIDQwOTYpXG4gICAgICAgIHRvb2xiYXJfY2hhbmdlcy5sb2NhbGUgPSAvKm1lcmdlZExvY2FsZSovXG4gICAgICAgIGN0eDJbMTJdO1xuICAgICAgaWYgKGRpcnR5WzBdICYgLyphY3Rpb25zKi9cbiAgICAgIDIwOTcxNTIpXG4gICAgICAgIHRvb2xiYXJfY2hhbmdlcy5hY3Rpb25zID0gLyphY3Rpb25zKi9cbiAgICAgICAgY3R4MlsyMV0ubGVmdEFjdGlvbnM7XG4gICAgICB0b29sYmFyLiRzZXQodG9vbGJhcl9jaGFuZ2VzKTtcbiAgICAgIGlmICghY3VycmVudCB8fCBkaXJ0eVswXSAmIC8qc3R5bGVzKi9cbiAgICAgIDQxOTQzMDQgJiYgZGl2MF9zdHlsZV92YWx1ZSAhPT0gKGRpdjBfc3R5bGVfdmFsdWUgPSAvKnN0eWxlcyovXG4gICAgICBjdHgyWzIyXS5lZGl0KSkge1xuICAgICAgICBhdHRyKGRpdjAsIFwic3R5bGVcIiwgZGl2MF9zdHlsZV92YWx1ZSk7XG4gICAgICB9XG4gICAgICBpZiAoIS8qb3ZlcnJpZGVQcmV2aWV3Ki9cbiAgICAgIGN0eDJbNF0gJiYgLypzcGxpdCovXG4gICAgICAoY3R4MlsxMV0gfHwgLyphY3RpdmVUYWIqL1xuICAgICAgY3R4Mls4XSA9PT0gXCJwcmV2aWV3XCIpKSB7XG4gICAgICAgIGlmIChpZl9ibG9jaykge1xuICAgICAgICAgIGlmX2Jsb2NrLnAoY3R4MiwgZGlydHkpO1xuICAgICAgICAgIGlmIChkaXJ0eVswXSAmIC8qb3ZlcnJpZGVQcmV2aWV3LCBzcGxpdCwgYWN0aXZlVGFiKi9cbiAgICAgICAgICAyMzIwKSB7XG4gICAgICAgICAgICB0cmFuc2l0aW9uX2luKGlmX2Jsb2NrLCAxKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWZfYmxvY2sgPSBjcmVhdGVfaWZfYmxvY2soY3R4Mik7XG4gICAgICAgICAgaWZfYmxvY2suYygpO1xuICAgICAgICAgIHRyYW5zaXRpb25faW4oaWZfYmxvY2ssIDEpO1xuICAgICAgICAgIGlmX2Jsb2NrLm0oZGl2MSwgbnVsbCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoaWZfYmxvY2spIHtcbiAgICAgICAgZ3JvdXBfb3V0cm9zKCk7XG4gICAgICAgIHRyYW5zaXRpb25fb3V0KGlmX2Jsb2NrLCAxLCAxLCAoKSA9PiB7XG4gICAgICAgICAgaWZfYmxvY2sgPSBudWxsO1xuICAgICAgICB9KTtcbiAgICAgICAgY2hlY2tfb3V0cm9zKCk7XG4gICAgICB9XG4gICAgICBpZiAoIWN1cnJlbnQgfHwgZGlydHlbMF0gJiAvKnN0eWxlcyovXG4gICAgICA0MTk0MzA0ICYmIGRpdjFfc3R5bGVfdmFsdWUgIT09IChkaXYxX3N0eWxlX3ZhbHVlID0gLypzdHlsZXMqL1xuICAgICAgY3R4MlsyMl0ucHJldmlldykpIHtcbiAgICAgICAgYXR0cihkaXYxLCBcInN0eWxlXCIsIGRpdjFfc3R5bGVfdmFsdWUpO1xuICAgICAgfVxuICAgICAgY29uc3QgaGVscF9jaGFuZ2VzID0ge307XG4gICAgICBpZiAoZGlydHlbMF0gJiAvKm1lcmdlZExvY2FsZSovXG4gICAgICA0MDk2KVxuICAgICAgICBoZWxwX2NoYW5nZXMubG9jYWxlID0gLyptZXJnZWRMb2NhbGUqL1xuICAgICAgICBjdHgyWzEyXTtcbiAgICAgIGlmIChkaXJ0eVswXSAmIC8qYWN0aW9ucyovXG4gICAgICAyMDk3MTUyKVxuICAgICAgICBoZWxwX2NoYW5nZXMuYWN0aW9ucyA9IC8qYWN0aW9ucyovXG4gICAgICAgIGN0eDJbMjFdLmxlZnRBY3Rpb25zO1xuICAgICAgaWYgKGRpcnR5WzBdICYgLypzaWRlYmFyKi9cbiAgICAgIDUxMilcbiAgICAgICAgaGVscF9jaGFuZ2VzLnZpc2libGUgPSAvKnNpZGViYXIqL1xuICAgICAgICBjdHgyWzldID09PSBcImhlbHBcIjtcbiAgICAgIGhlbHAyLiRzZXQoaGVscF9jaGFuZ2VzKTtcbiAgICAgIGNvbnN0IHRvY19jaGFuZ2VzID0ge307XG4gICAgICBpZiAoZGlydHlbMF0gJiAvKmhhc3QqL1xuICAgICAgMjYyMTQ0KVxuICAgICAgICB0b2NfY2hhbmdlcy5oYXN0ID0gLypoYXN0Ki9cbiAgICAgICAgY3R4MlsxOF07XG4gICAgICBpZiAoZGlydHlbMF0gJiAvKm1lcmdlZExvY2FsZSovXG4gICAgICA0MDk2KVxuICAgICAgICB0b2NfY2hhbmdlcy5sb2NhbGUgPSAvKm1lcmdlZExvY2FsZSovXG4gICAgICAgIGN0eDJbMTJdO1xuICAgICAgaWYgKGRpcnR5WzBdICYgLypjdXJyZW50QmxvY2tJbmRleCovXG4gICAgICAxMDQ4NTc2KVxuICAgICAgICB0b2NfY2hhbmdlcy5jdXJyZW50QmxvY2tJbmRleCA9IC8qY3VycmVudEJsb2NrSW5kZXgqL1xuICAgICAgICBjdHgyWzIwXTtcbiAgICAgIGlmIChkaXJ0eVswXSAmIC8qc2lkZWJhciovXG4gICAgICA1MTIpXG4gICAgICAgIHRvY19jaGFuZ2VzLnZpc2libGUgPSAvKnNpZGViYXIqL1xuICAgICAgICBjdHgyWzldID09PSBcInRvY1wiO1xuICAgICAgdG9jMi4kc2V0KHRvY19jaGFuZ2VzKTtcbiAgICAgIGlmICghY3VycmVudCB8fCBkaXJ0eVswXSAmIC8qc2lkZWJhciovXG4gICAgICA1MTIpIHtcbiAgICAgICAgdG9nZ2xlX2NsYXNzKFxuICAgICAgICAgIGRpdjMsXG4gICAgICAgICAgXCJieXRlbWQtaGlkZGVuXCIsXG4gICAgICAgICAgLypzaWRlYmFyKi9cbiAgICAgICAgICBjdHgyWzldID09PSBmYWxzZVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgY29uc3Qgc3RhdHVzX2NoYW5nZXMgPSB7fTtcbiAgICAgIGlmIChkaXJ0eVswXSAmIC8qbWVyZ2VkTG9jYWxlKi9cbiAgICAgIDQwOTYpXG4gICAgICAgIHN0YXR1c19jaGFuZ2VzLmxvY2FsZSA9IC8qbWVyZ2VkTG9jYWxlKi9cbiAgICAgICAgY3R4MlsxMl07XG4gICAgICBpZiAoZGlydHlbMF0gJiAvKm92ZXJyaWRlUHJldmlldywgc3BsaXQqL1xuICAgICAgMjA2NClcbiAgICAgICAgc3RhdHVzX2NoYW5nZXMuc2hvd1N5bmMgPSAhLypvdmVycmlkZVByZXZpZXcqL1xuICAgICAgICBjdHgyWzRdICYmIC8qc3BsaXQqL1xuICAgICAgICBjdHgyWzExXTtcbiAgICAgIGlmIChkaXJ0eVswXSAmIC8qZGVib3VuY2VkVmFsdWUqL1xuICAgICAgNjU1MzYpXG4gICAgICAgIHN0YXR1c19jaGFuZ2VzLnZhbHVlID0gLypkZWJvdW5jZWRWYWx1ZSovXG4gICAgICAgIGN0eDJbMTZdO1xuICAgICAgaWYgKGRpcnR5WzBdICYgLypzeW5jRW5hYmxlZCovXG4gICAgICAxMzEwNzIpXG4gICAgICAgIHN0YXR1c19jaGFuZ2VzLnN5bmNFbmFibGVkID0gLypzeW5jRW5hYmxlZCovXG4gICAgICAgIGN0eDJbMTddO1xuICAgICAgaWYgKGRpcnR5WzBdICYgLyp2YWx1ZSwgbWF4TGVuZ3RoKi9cbiAgICAgIDMzKVxuICAgICAgICBzdGF0dXNfY2hhbmdlcy5pc2xpbWl0ZWQgPSAvKnZhbHVlKi9cbiAgICAgICAgY3R4MlswXS5sZW5ndGggPiAvKm1heExlbmd0aCovXG4gICAgICAgIGN0eDJbNV07XG4gICAgICBzdGF0dXMuJHNldChzdGF0dXNfY2hhbmdlcyk7XG4gICAgICBpZiAoIWN1cnJlbnQgfHwgZGlydHlbMF0gJiAvKnNwbGl0LCBhY3RpdmVUYWIqL1xuICAgICAgMjMwNCkge1xuICAgICAgICB0b2dnbGVfY2xhc3MoXG4gICAgICAgICAgZGl2NSxcbiAgICAgICAgICBcImJ5dGVtZC1zcGxpdFwiLFxuICAgICAgICAgIC8qc3BsaXQqL1xuICAgICAgICAgIGN0eDJbMTFdICYmIC8qYWN0aXZlVGFiKi9cbiAgICAgICAgICBjdHgyWzhdID09PSBmYWxzZVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgaWYgKCFjdXJyZW50IHx8IGRpcnR5WzBdICYgLypmdWxsc2NyZWVuKi9cbiAgICAgIDMyNzY4KSB7XG4gICAgICAgIHRvZ2dsZV9jbGFzcyhcbiAgICAgICAgICBkaXY1LFxuICAgICAgICAgIFwiYnl0ZW1kLWZ1bGxzY3JlZW5cIixcbiAgICAgICAgICAvKmZ1bGxzY3JlZW4qL1xuICAgICAgICAgIGN0eDJbMTVdXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSxcbiAgICBpKGxvY2FsKSB7XG4gICAgICBpZiAoY3VycmVudClcbiAgICAgICAgcmV0dXJuO1xuICAgICAgdHJhbnNpdGlvbl9pbih0b29sYmFyLiQkLmZyYWdtZW50LCBsb2NhbCk7XG4gICAgICB0cmFuc2l0aW9uX2luKGlmX2Jsb2NrKTtcbiAgICAgIHRyYW5zaXRpb25faW4oaGVscDIuJCQuZnJhZ21lbnQsIGxvY2FsKTtcbiAgICAgIHRyYW5zaXRpb25faW4odG9jMi4kJC5mcmFnbWVudCwgbG9jYWwpO1xuICAgICAgdHJhbnNpdGlvbl9pbihzdGF0dXMuJCQuZnJhZ21lbnQsIGxvY2FsKTtcbiAgICAgIGN1cnJlbnQgPSB0cnVlO1xuICAgIH0sXG4gICAgbyhsb2NhbCkge1xuICAgICAgdHJhbnNpdGlvbl9vdXQodG9vbGJhci4kJC5mcmFnbWVudCwgbG9jYWwpO1xuICAgICAgdHJhbnNpdGlvbl9vdXQoaWZfYmxvY2spO1xuICAgICAgdHJhbnNpdGlvbl9vdXQoaGVscDIuJCQuZnJhZ21lbnQsIGxvY2FsKTtcbiAgICAgIHRyYW5zaXRpb25fb3V0KHRvYzIuJCQuZnJhZ21lbnQsIGxvY2FsKTtcbiAgICAgIHRyYW5zaXRpb25fb3V0KHN0YXR1cy4kJC5mcmFnbWVudCwgbG9jYWwpO1xuICAgICAgY3VycmVudCA9IGZhbHNlO1xuICAgIH0sXG4gICAgZChkZXRhY2hpbmcpIHtcbiAgICAgIGlmIChkZXRhY2hpbmcpXG4gICAgICAgIGRldGFjaChkaXY1KTtcbiAgICAgIGRlc3Ryb3lfY29tcG9uZW50KHRvb2xiYXIpO1xuICAgICAgY3R4WzM0XShudWxsKTtcbiAgICAgIGlmIChpZl9ibG9jaylcbiAgICAgICAgaWZfYmxvY2suZCgpO1xuICAgICAgY3R4WzM2XShudWxsKTtcbiAgICAgIGRlc3Ryb3lfY29tcG9uZW50KGhlbHAyKTtcbiAgICAgIGRlc3Ryb3lfY29tcG9uZW50KHRvYzIpO1xuICAgICAgZGVzdHJveV9jb21wb25lbnQoc3RhdHVzKTtcbiAgICAgIGN0eFs0Ml0obnVsbCk7XG4gICAgICBtb3VudGVkID0gZmFsc2U7XG4gICAgICBydW5fYWxsKGRpc3Bvc2UpO1xuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIGluc3RhbmNlKCQkc2VsZiwgJCRwcm9wcywgJCRpbnZhbGlkYXRlKSB7XG4gIGxldCBtZXJnZWRMb2NhbGU7XG4gIGxldCBhY3Rpb25zO1xuICBsZXQgc3BsaXQ7XG4gIGxldCBzdHlsZXM7XG4gIGxldCBjb250ZXh0O1xuICBsZXQgeyB2YWx1ZSA9IFwiXCIgfSA9ICQkcHJvcHM7XG4gIGxldCB7IHBsdWdpbnMgPSBbXSB9ID0gJCRwcm9wcztcbiAgbGV0IHsgc2FuaXRpemUgPSB2b2lkIDAgfSA9ICQkcHJvcHM7XG4gIGxldCB7IHJlbWFya1JlaHlwZTogcmVtYXJrUmVoeXBlMiA9IHZvaWQgMCB9ID0gJCRwcm9wcztcbiAgbGV0IHsgbW9kZSA9IFwiYXV0b1wiIH0gPSAkJHByb3BzO1xuICBsZXQgeyBwcmV2aWV3RGVib3VuY2UgPSAzMDAgfSA9ICQkcHJvcHM7XG4gIGxldCB7IHBsYWNlaG9sZGVyID0gdm9pZCAwIH0gPSAkJHByb3BzO1xuICBsZXQgeyBlZGl0b3JDb25maWcgPSB2b2lkIDAgfSA9ICQkcHJvcHM7XG4gIGxldCB7IGxvY2FsZSA9IHZvaWQgMCB9ID0gJCRwcm9wcztcbiAgbGV0IHsgdXBsb2FkSW1hZ2VzID0gdm9pZCAwIH0gPSAkJHByb3BzO1xuICBsZXQgeyBvdmVycmlkZVByZXZpZXcgPSB2b2lkIDAgfSA9ICQkcHJvcHM7XG4gIGxldCB7IG1heExlbmd0aCA9IEluZmluaXR5IH0gPSAkJHByb3BzO1xuICBjb25zdCBkaXNwYXRjaCA9IGNyZWF0ZUV2ZW50RGlzcGF0Y2hlcigpO1xuICBsZXQgcm9vdDtcbiAgbGV0IGVkaXRvckVsO1xuICBsZXQgcHJldmlld0VsO1xuICBsZXQgY29udGFpbmVyV2lkdGggPSBJbmZpbml0eTtcbiAgbGV0IGNvZGVtaXJyb3I7XG4gIGxldCBlZGl0b3I7XG4gIGxldCBhY3RpdmVUYWI7XG4gIGxldCBmdWxsc2NyZWVuMiA9IGZhbHNlO1xuICBsZXQgc2lkZWJhciA9IGZhbHNlO1xuICBsZXQgY2JzID0gW107XG4gIGxldCBrZXlNYXAgPSB7fTtcbiAgZnVuY3Rpb24gb24oKSB7XG4gICAgY2JzID0gcGx1Z2lucy5tYXAoKHApID0+IHtcbiAgICAgIHZhciBfYTtcbiAgICAgIHJldHVybiAoX2EgPSBwLmVkaXRvckVmZmVjdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNhbGwocCwgY29udGV4dCk7XG4gICAgfSk7XG4gICAga2V5TWFwID0ge307XG4gICAgYWN0aW9ucy5sZWZ0QWN0aW9ucy5mb3JFYWNoKCh7IGhhbmRsZXIgfSkgPT4ge1xuICAgICAgaWYgKChoYW5kbGVyID09IG51bGwgPyB2b2lkIDAgOiBoYW5kbGVyLnR5cGUpID09PSBcImFjdGlvblwiICYmIGhhbmRsZXIuc2hvcnRjdXQpIHtcbiAgICAgICAga2V5TWFwW2hhbmRsZXIuc2hvcnRjdXRdID0gKCkgPT4ge1xuICAgICAgICAgIGhhbmRsZXIuY2xpY2soY29udGV4dCk7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSk7XG4gICAgZWRpdG9yLmFkZEtleU1hcChrZXlNYXApO1xuICB9XG4gIGZ1bmN0aW9uIG9mZigpIHtcbiAgICBjYnMuZm9yRWFjaCgoY2IpID0+IGNiICYmIGNiKCkpO1xuICAgIGVkaXRvciA9PSBudWxsID8gdm9pZCAwIDogZWRpdG9yLnJlbW92ZUtleU1hcChrZXlNYXApO1xuICB9XG4gIGxldCBkZWJvdW5jZWRWYWx1ZSA9IHZhbHVlO1xuICBjb25zdCBzZXREZWJvdW5jZWRWYWx1ZSA9IGRlYm91bmNlKFxuICAgICh2YWx1ZTIpID0+IHtcbiAgICAgICQkaW52YWxpZGF0ZSgxNiwgZGVib3VuY2VkVmFsdWUgPSB2YWx1ZTIpO1xuICAgICAgb3ZlcnJpZGVQcmV2aWV3ID09IG51bGwgPyB2b2lkIDAgOiBvdmVycmlkZVByZXZpZXcocHJldmlld0VsLCB7XG4gICAgICAgIHZhbHVlOiBkZWJvdW5jZWRWYWx1ZSxcbiAgICAgICAgcGx1Z2lucyxcbiAgICAgICAgc2FuaXRpemUsXG4gICAgICAgIHJlbWFya1JlaHlwZTogcmVtYXJrUmVoeXBlMlxuICAgICAgfSk7XG4gICAgfSxcbiAgICBwcmV2aWV3RGVib3VuY2VcbiAgKTtcbiAgbGV0IHN5bmNFbmFibGVkID0gdHJ1ZTtcbiAgbGV0IGVkaXRDYWxsZWQgPSBmYWxzZTtcbiAgbGV0IHByZXZpZXdDYWxsZWQgPSBmYWxzZTtcbiAgbGV0IGVkaXRQcztcbiAgbGV0IHByZXZpZXdQcztcbiAgbGV0IGhhc3QgPSB7IHR5cGU6IFwicm9vdFwiLCBjaGlsZHJlbjogW10gfTtcbiAgbGV0IHZmaWxlO1xuICBsZXQgY3VycmVudEJsb2NrSW5kZXggPSAwO1xuICBvbk1vdW50KGFzeW5jICgpID0+IHtcbiAgICAkJGludmFsaWRhdGUoMzAsIGNvZGVtaXJyb3IgPSBjcmVhdGVDb2RlTWlycm9yKCkpO1xuICAgICQkaW52YWxpZGF0ZSg3LCBlZGl0b3IgPSBjb2RlbWlycm9yKGVkaXRvckVsLCB7XG4gICAgICB2YWx1ZSxcbiAgICAgIG1vZGU6IFwieWFtbC1mcm9udG1hdHRlclwiLFxuICAgICAgbGluZVdyYXBwaW5nOiB0cnVlLFxuICAgICAgdGFiU2l6ZTogOCxcbiAgICAgIGluZGVudFVuaXQ6IDQsXG4gICAgICBleHRyYUtleXM6IHtcbiAgICAgICAgRW50ZXI6IFwibmV3bGluZUFuZEluZGVudENvbnRpbnVlTWFya2Rvd25MaXN0XCJcbiAgICAgIH0sXG4gICAgICAuLi5lZGl0b3JDb25maWcsXG4gICAgICBwbGFjZWhvbGRlclxuICAgIH0pKTtcbiAgICBlZGl0b3IuYWRkS2V5TWFwKHtcbiAgICAgIFRhYjogXCJpbmRlbnRNb3JlXCIsXG4gICAgICBcIlNoaWZ0LVRhYlwiOiBcImluZGVudExlc3NcIlxuICAgIH0pO1xuICAgIGVkaXRvci5vbihcImNoYW5nZVwiLCAoKSA9PiB7XG4gICAgICBkaXNwYXRjaChcImNoYW5nZVwiLCB7IHZhbHVlOiBlZGl0b3IuZ2V0VmFsdWUoKSB9KTtcbiAgICB9KTtcbiAgICBjb25zdCB1cGRhdGVCbG9ja1Bvc2l0aW9ucyA9IHRocm90dGxlKFxuICAgICAgKCkgPT4ge1xuICAgICAgICBlZGl0UHMgPSBbXTtcbiAgICAgICAgcHJldmlld1BzID0gW107XG4gICAgICAgIGNvbnN0IHNjcm9sbEluZm8gPSBlZGl0b3IuZ2V0U2Nyb2xsSW5mbygpO1xuICAgICAgICBjb25zdCBib2R5ID0gcHJldmlld0VsLmNoaWxkTm9kZXNbMF07XG4gICAgICAgIGlmICghKGJvZHkgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBsZWZ0Tm9kZXMgPSBoYXN0LmNoaWxkcmVuLmZpbHRlcigodikgPT4gdi50eXBlID09PSBcImVsZW1lbnRcIik7XG4gICAgICAgIGNvbnN0IHJpZ2h0Tm9kZXMgPSBbLi4uYm9keS5jaGlsZE5vZGVzXS5maWx0ZXIoKHYpID0+IHYgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVmdE5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY29uc3QgbGVmdE5vZGUgPSBsZWZ0Tm9kZXNbaV07XG4gICAgICAgICAgY29uc3QgcmlnaHROb2RlID0gcmlnaHROb2Rlc1tpXTtcbiAgICAgICAgICBpZiAoIWxlZnROb2RlLnBvc2l0aW9uKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgbGVmdCA9IGVkaXRvci5oZWlnaHRBdExpbmUobGVmdE5vZGUucG9zaXRpb24uc3RhcnQubGluZSAtIDEsIFwibG9jYWxcIikgLyAoc2Nyb2xsSW5mby5oZWlnaHQgLSBzY3JvbGxJbmZvLmNsaWVudEhlaWdodCk7XG4gICAgICAgICAgY29uc3QgcmlnaHQgPSAocmlnaHROb2RlLm9mZnNldFRvcCAtIGJvZHkub2Zmc2V0VG9wKSAvIChwcmV2aWV3RWwuc2Nyb2xsSGVpZ2h0IC0gcHJldmlld0VsLmNsaWVudEhlaWdodCk7XG4gICAgICAgICAgaWYgKGxlZnQgPj0gMSB8fCByaWdodCA+PSAxKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgZWRpdFBzLnB1c2gobGVmdCk7XG4gICAgICAgICAgcHJldmlld1BzLnB1c2gocmlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIGVkaXRQcy5wdXNoKDEpO1xuICAgICAgICBwcmV2aWV3UHMucHVzaCgxKTtcbiAgICAgIH0sXG4gICAgICAxZTNcbiAgICApO1xuICAgIGNvbnN0IGVkaXRvclNjcm9sbEhhbmRsZXIgPSAoKSA9PiB7XG4gICAgICBpZiAob3ZlcnJpZGVQcmV2aWV3KVxuICAgICAgICByZXR1cm47XG4gICAgICBpZiAoIXN5bmNFbmFibGVkKVxuICAgICAgICByZXR1cm47XG4gICAgICBpZiAocHJldmlld0NhbGxlZCkge1xuICAgICAgICBwcmV2aWV3Q2FsbGVkID0gZmFsc2U7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHVwZGF0ZUJsb2NrUG9zaXRpb25zKCk7XG4gICAgICBjb25zdCBpbmZvID0gZWRpdG9yLmdldFNjcm9sbEluZm8oKTtcbiAgICAgIGNvbnN0IGxlZnRSYXRpbyA9IGluZm8udG9wIC8gKGluZm8uaGVpZ2h0IC0gaW5mby5jbGllbnRIZWlnaHQpO1xuICAgICAgY29uc3Qgc3RhcnRJbmRleCA9IGZpbmRTdGFydEluZGV4KGxlZnRSYXRpbywgZWRpdFBzKTtcbiAgICAgIGNvbnN0IHJpZ2h0UmF0aW8gPSAobGVmdFJhdGlvIC0gZWRpdFBzW3N0YXJ0SW5kZXhdKSAqIChwcmV2aWV3UHNbc3RhcnRJbmRleCArIDFdIC0gcHJldmlld1BzW3N0YXJ0SW5kZXhdKSAvIChlZGl0UHNbc3RhcnRJbmRleCArIDFdIC0gZWRpdFBzW3N0YXJ0SW5kZXhdKSArIHByZXZpZXdQc1tzdGFydEluZGV4XTtcbiAgICAgIHByZXZpZXdFbC5zY3JvbGxUbygwLCByaWdodFJhdGlvICogKHByZXZpZXdFbC5zY3JvbGxIZWlnaHQgLSBwcmV2aWV3RWwuY2xpZW50SGVpZ2h0KSk7XG4gICAgICBlZGl0Q2FsbGVkID0gdHJ1ZTtcbiAgICB9O1xuICAgIGNvbnN0IHByZXZpZXdTY3JvbGxIYW5kbGVyID0gKCkgPT4ge1xuICAgICAgaWYgKG92ZXJyaWRlUHJldmlldylcbiAgICAgICAgcmV0dXJuO1xuICAgICAgdXBkYXRlQmxvY2tQb3NpdGlvbnMoKTtcbiAgICAgICQkaW52YWxpZGF0ZSgyMCwgY3VycmVudEJsb2NrSW5kZXggPSBmaW5kU3RhcnRJbmRleChwcmV2aWV3RWwuc2Nyb2xsVG9wIC8gKHByZXZpZXdFbC5zY3JvbGxIZWlnaHQgLSBwcmV2aWV3RWwub2Zmc2V0SGVpZ2h0KSwgcHJldmlld1BzKSk7XG4gICAgICBpZiAoIXN5bmNFbmFibGVkKVxuICAgICAgICByZXR1cm47XG4gICAgICBpZiAoZWRpdENhbGxlZCkge1xuICAgICAgICBlZGl0Q2FsbGVkID0gZmFsc2U7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJpZ2h0UmF0aW8gPSBwcmV2aWV3RWwuc2Nyb2xsVG9wIC8gKHByZXZpZXdFbC5zY3JvbGxIZWlnaHQgLSBwcmV2aWV3RWwuY2xpZW50SGVpZ2h0KTtcbiAgICAgIGNvbnN0IHN0YXJ0SW5kZXggPSBmaW5kU3RhcnRJbmRleChyaWdodFJhdGlvLCBwcmV2aWV3UHMpO1xuICAgICAgY29uc3QgbGVmdFJhdGlvID0gKHJpZ2h0UmF0aW8gLSBwcmV2aWV3UHNbc3RhcnRJbmRleF0pICogKGVkaXRQc1tzdGFydEluZGV4ICsgMV0gLSBlZGl0UHNbc3RhcnRJbmRleF0pIC8gKHByZXZpZXdQc1tzdGFydEluZGV4ICsgMV0gLSBwcmV2aWV3UHNbc3RhcnRJbmRleF0pICsgZWRpdFBzW3N0YXJ0SW5kZXhdO1xuICAgICAgaWYgKGlzTmFOKGxlZnRSYXRpbykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgaW5mbyA9IGVkaXRvci5nZXRTY3JvbGxJbmZvKCk7XG4gICAgICBlZGl0b3Iuc2Nyb2xsVG8oMCwgbGVmdFJhdGlvICogKGluZm8uaGVpZ2h0IC0gaW5mby5jbGllbnRIZWlnaHQpKTtcbiAgICAgIHByZXZpZXdDYWxsZWQgPSB0cnVlO1xuICAgIH07XG4gICAgZWRpdG9yLm9uKFwic2Nyb2xsXCIsIGVkaXRvclNjcm9sbEhhbmRsZXIpO1xuICAgIHByZXZpZXdFbC5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIHByZXZpZXdTY3JvbGxIYW5kbGVyLCB7IHBhc3NpdmU6IHRydWUgfSk7XG4gICAgY29uc3QgaGFuZGxlSW1hZ2VzID0gYXN5bmMgKGUsIGl0ZW1MaXN0KSA9PiB7XG4gICAgICBpZiAoIXVwbG9hZEltYWdlcylcbiAgICAgICAgcmV0dXJuO1xuICAgICAgY29uc3QgZmlsZXMgPSBBcnJheS5mcm9tKGl0ZW1MaXN0ICE9IG51bGwgPyBpdGVtTGlzdCA6IFtdKS5tYXAoKGl0ZW0pID0+IHtcbiAgICAgICAgaWYgKGl0ZW0udHlwZS5zdGFydHNXaXRoKFwiaW1hZ2UvXCIpKSB7XG4gICAgICAgICAgcmV0dXJuIGl0ZW0uZ2V0QXNGaWxlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pLmZpbHRlcigoZikgPT4gZiAhPSBudWxsKTtcbiAgICAgIGlmIChmaWxlcy5sZW5ndGgpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBhd2FpdCBoYW5kbGVJbWFnZVVwbG9hZChjb250ZXh0LCB1cGxvYWRJbWFnZXMsIGZpbGVzKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGVkaXRvci5vbihcImRyb3BcIiwgYXN5bmMgKF8sIGUpID0+IHtcbiAgICAgIHZhciBfYTtcbiAgICAgIGhhbmRsZUltYWdlcyhlLCAoX2EgPSBlLmRhdGFUcmFuc2ZlcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLml0ZW1zKTtcbiAgICB9KTtcbiAgICBlZGl0b3Iub24oXCJwYXN0ZVwiLCBhc3luYyAoXywgZSkgPT4ge1xuICAgICAgdmFyIF9hO1xuICAgICAgaGFuZGxlSW1hZ2VzKGUsIChfYSA9IGUuY2xpcGJvYXJkRGF0YSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLml0ZW1zKTtcbiAgICB9KTtcbiAgICBuZXcgUmVzaXplT2JzZXJ2ZXIoKGVudHJpZXMpID0+IHtcbiAgICAgICQkaW52YWxpZGF0ZSgyOSwgY29udGFpbmVyV2lkdGggPSBlbnRyaWVzWzBdLmNvbnRlbnRSZWN0LndpZHRoKTtcbiAgICB9KS5vYnNlcnZlKHJvb3QsIHtcbiAgICAgIGJveDogXCJib3JkZXItYm94XCJcbiAgICAgIC8vIGNvbnNvbGUubG9nKGNvbnRhaW5lcldpZHRoKTtcbiAgICB9KTtcbiAgfSk7XG4gIG9uRGVzdHJveShvZmYpO1xuICBjb25zdCBrZXlfaGFuZGxlciA9IChlKSA9PiB7XG4gICAgZWRpdG9yLnNldE9wdGlvbihcImtleU1hcFwiLCBlLmRldGFpbCk7XG4gICAgZWRpdG9yLmZvY3VzKCk7XG4gIH07XG4gIGNvbnN0IHRhYl9oYW5kbGVyID0gKGUpID0+IHtcbiAgICBjb25zdCB2ID0gZS5kZXRhaWw7XG4gICAgaWYgKHNwbGl0KSB7XG4gICAgICAkJGludmFsaWRhdGUoOCwgYWN0aXZlVGFiID0gYWN0aXZlVGFiID09PSB2ID8gZmFsc2UgOiB2KTtcbiAgICB9IGVsc2Uge1xuICAgICAgJCRpbnZhbGlkYXRlKDgsIGFjdGl2ZVRhYiA9IHYpO1xuICAgIH1cbiAgICBpZiAoYWN0aXZlVGFiID09PSBcIndyaXRlXCIpIHtcbiAgICAgIHRpY2soKS50aGVuKCgpID0+IHtcbiAgICAgICAgZWRpdG9yICYmIGVkaXRvci5mb2N1cygpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICh2ID09PSBcIndyaXRlXCIpIHtcbiAgICAgIHRpY2soKS50aGVuKCgpID0+IHtcbiAgICAgICAgZWRpdG9yICYmIGVkaXRvci5zZXRTaXplKG51bGwsIG51bGwpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuICBjb25zdCBjbGlja19oYW5kbGVyID0gKGUpID0+IHtcbiAgICBzd2l0Y2ggKGUuZGV0YWlsKSB7XG4gICAgICBjYXNlIFwiZnVsbHNjcmVlblwiOlxuICAgICAgICAkJGludmFsaWRhdGUoMTUsIGZ1bGxzY3JlZW4yID0gIWZ1bGxzY3JlZW4yKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiaGVscFwiOlxuICAgICAgICAkJGludmFsaWRhdGUoOSwgc2lkZWJhciA9IHNpZGViYXIgPT09IFwiaGVscFwiID8gZmFsc2UgOiBcImhlbHBcIik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcInRvY1wiOlxuICAgICAgICAkJGludmFsaWRhdGUoOSwgc2lkZWJhciA9IHNpZGViYXIgPT09IFwidG9jXCIgPyBmYWxzZSA6IFwidG9jXCIpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH07XG4gIGZ1bmN0aW9uIGRpdjBfYmluZGluZygkJHZhbHVlKSB7XG4gICAgYmluZGluZ19jYWxsYmFja3NbJCR2YWx1ZSA/IFwidW5zaGlmdFwiIDogXCJwdXNoXCJdKCgpID0+IHtcbiAgICAgIGVkaXRvckVsID0gJCR2YWx1ZTtcbiAgICAgICQkaW52YWxpZGF0ZSgxMywgZWRpdG9yRWwpO1xuICAgIH0pO1xuICB9XG4gIGNvbnN0IGhhc3RfaGFuZGxlciA9IChlKSA9PiB7XG4gICAgJCRpbnZhbGlkYXRlKDE4LCBoYXN0ID0gZS5kZXRhaWwuaGFzdCk7XG4gICAgJCRpbnZhbGlkYXRlKDE5LCB2ZmlsZSA9IGUuZGV0YWlsLmZpbGUpO1xuICB9O1xuICBmdW5jdGlvbiBkaXYxX2JpbmRpbmcoJCR2YWx1ZSkge1xuICAgIGJpbmRpbmdfY2FsbGJhY2tzWyQkdmFsdWUgPyBcInVuc2hpZnRcIiA6IFwicHVzaFwiXSgoKSA9PiB7XG4gICAgICBwcmV2aWV3RWwgPSAkJHZhbHVlO1xuICAgICAgJCRpbnZhbGlkYXRlKDE0LCBwcmV2aWV3RWwpO1xuICAgIH0pO1xuICB9XG4gIGNvbnN0IGNsaWNrX2hhbmRsZXJfMSA9ICgpID0+IHtcbiAgICAkJGludmFsaWRhdGUoOSwgc2lkZWJhciA9IGZhbHNlKTtcbiAgfTtcbiAgY29uc3Qga2V5ZG93bl9oYW5kbGVyID0gKGUpID0+IHtcbiAgICBpZiAoW1wiRW50ZXJcIiwgXCJTcGFjZVwiXS5pbmNsdWRlcyhlLmNvZGUpKSB7XG4gICAgICAkJGludmFsaWRhdGUoOSwgc2lkZWJhciA9IGZhbHNlKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGNsaWNrX2hhbmRsZXJfMiA9IChlKSA9PiB7XG4gICAgY29uc3QgaGVhZGluZ3MgPSBwcmV2aWV3RWwucXVlcnlTZWxlY3RvckFsbChcImgxLGgyLGgzLGg0LGg1LGg2XCIpO1xuICAgIGhlYWRpbmdzW2UuZGV0YWlsXS5zY3JvbGxJbnRvVmlldygpO1xuICB9O1xuICBjb25zdCBzeW5jX2hhbmRsZXIgPSAoZSkgPT4ge1xuICAgICQkaW52YWxpZGF0ZSgxNywgc3luY0VuYWJsZWQgPSBlLmRldGFpbCk7XG4gIH07XG4gIGNvbnN0IHRvcF9oYW5kbGVyID0gKCkgPT4ge1xuICAgIGVkaXRvci5zY3JvbGxUbyhudWxsLCAwKTtcbiAgICBwcmV2aWV3RWwuc2Nyb2xsVG8oeyB0b3A6IDAgfSk7XG4gIH07XG4gIGZ1bmN0aW9uIGRpdjVfYmluZGluZygkJHZhbHVlKSB7XG4gICAgYmluZGluZ19jYWxsYmFja3NbJCR2YWx1ZSA/IFwidW5zaGlmdFwiIDogXCJwdXNoXCJdKCgpID0+IHtcbiAgICAgIHJvb3QgPSAkJHZhbHVlO1xuICAgICAgJCRpbnZhbGlkYXRlKDYsIHJvb3QpO1xuICAgIH0pO1xuICB9XG4gICQkc2VsZi4kJHNldCA9ICgkJHByb3BzMikgPT4ge1xuICAgIGlmIChcInZhbHVlXCIgaW4gJCRwcm9wczIpXG4gICAgICAkJGludmFsaWRhdGUoMCwgdmFsdWUgPSAkJHByb3BzMi52YWx1ZSk7XG4gICAgaWYgKFwicGx1Z2luc1wiIGluICQkcHJvcHMyKVxuICAgICAgJCRpbnZhbGlkYXRlKDEsIHBsdWdpbnMgPSAkJHByb3BzMi5wbHVnaW5zKTtcbiAgICBpZiAoXCJzYW5pdGl6ZVwiIGluICQkcHJvcHMyKVxuICAgICAgJCRpbnZhbGlkYXRlKDIsIHNhbml0aXplID0gJCRwcm9wczIuc2FuaXRpemUpO1xuICAgIGlmIChcInJlbWFya1JlaHlwZVwiIGluICQkcHJvcHMyKVxuICAgICAgJCRpbnZhbGlkYXRlKDMsIHJlbWFya1JlaHlwZTIgPSAkJHByb3BzMi5yZW1hcmtSZWh5cGUpO1xuICAgIGlmIChcIm1vZGVcIiBpbiAkJHByb3BzMilcbiAgICAgICQkaW52YWxpZGF0ZSgyMywgbW9kZSA9ICQkcHJvcHMyLm1vZGUpO1xuICAgIGlmIChcInByZXZpZXdEZWJvdW5jZVwiIGluICQkcHJvcHMyKVxuICAgICAgJCRpbnZhbGlkYXRlKDI0LCBwcmV2aWV3RGVib3VuY2UgPSAkJHByb3BzMi5wcmV2aWV3RGVib3VuY2UpO1xuICAgIGlmIChcInBsYWNlaG9sZGVyXCIgaW4gJCRwcm9wczIpXG4gICAgICAkJGludmFsaWRhdGUoMjUsIHBsYWNlaG9sZGVyID0gJCRwcm9wczIucGxhY2Vob2xkZXIpO1xuICAgIGlmIChcImVkaXRvckNvbmZpZ1wiIGluICQkcHJvcHMyKVxuICAgICAgJCRpbnZhbGlkYXRlKDI2LCBlZGl0b3JDb25maWcgPSAkJHByb3BzMi5lZGl0b3JDb25maWcpO1xuICAgIGlmIChcImxvY2FsZVwiIGluICQkcHJvcHMyKVxuICAgICAgJCRpbnZhbGlkYXRlKDI3LCBsb2NhbGUgPSAkJHByb3BzMi5sb2NhbGUpO1xuICAgIGlmIChcInVwbG9hZEltYWdlc1wiIGluICQkcHJvcHMyKVxuICAgICAgJCRpbnZhbGlkYXRlKDI4LCB1cGxvYWRJbWFnZXMgPSAkJHByb3BzMi51cGxvYWRJbWFnZXMpO1xuICAgIGlmIChcIm92ZXJyaWRlUHJldmlld1wiIGluICQkcHJvcHMyKVxuICAgICAgJCRpbnZhbGlkYXRlKDQsIG92ZXJyaWRlUHJldmlldyA9ICQkcHJvcHMyLm92ZXJyaWRlUHJldmlldyk7XG4gICAgaWYgKFwibWF4TGVuZ3RoXCIgaW4gJCRwcm9wczIpXG4gICAgICAkJGludmFsaWRhdGUoNSwgbWF4TGVuZ3RoID0gJCRwcm9wczIubWF4TGVuZ3RoKTtcbiAgfTtcbiAgJCRzZWxmLiQkLnVwZGF0ZSA9ICgpID0+IHtcbiAgICBpZiAoJCRzZWxmLiQkLmRpcnR5WzBdICYgLypsb2NhbGUqL1xuICAgIDEzNDIxNzcyOCkge1xuICAgICAgJCRpbnZhbGlkYXRlKDEyLCBtZXJnZWRMb2NhbGUgPSB7IC4uLmVuLCAuLi5sb2NhbGUgfSk7XG4gICAgfVxuICAgIGlmICgkJHNlbGYuJCQuZGlydHlbMF0gJiAvKm1lcmdlZExvY2FsZSwgcGx1Z2lucywgdXBsb2FkSW1hZ2VzKi9cbiAgICAyNjg0Mzk1NTQpIHtcbiAgICAgICQkaW52YWxpZGF0ZSgyMSwgYWN0aW9ucyA9IGdldEJ1aWx0aW5BY3Rpb25zKG1lcmdlZExvY2FsZSwgcGx1Z2lucywgdXBsb2FkSW1hZ2VzKSk7XG4gICAgfVxuICAgIGlmICgkJHNlbGYuJCQuZGlydHlbMF0gJiAvKm1vZGUsIGNvbnRhaW5lcldpZHRoKi9cbiAgICA1NDUyNTk1MjApIHtcbiAgICAgICQkaW52YWxpZGF0ZSgxMSwgc3BsaXQgPSBtb2RlID09PSBcInNwbGl0XCIgfHwgbW9kZSA9PT0gXCJhdXRvXCIgJiYgY29udGFpbmVyV2lkdGggPj0gODAwKTtcbiAgICB9XG4gICAgaWYgKCQkc2VsZi4kJC5kaXJ0eVswXSAmIC8qc3BsaXQqL1xuICAgIDIwNDgpIHtcbiAgICAgICgoXykgPT4ge1xuICAgICAgICBpZiAoc3BsaXQpXG4gICAgICAgICAgJCRpbnZhbGlkYXRlKDgsIGFjdGl2ZVRhYiA9IGZhbHNlKTtcbiAgICAgIH0pKCk7XG4gICAgfVxuICAgIGlmICgkJHNlbGYuJCQuZGlydHlbMF0gJiAvKnNwbGl0LCBhY3RpdmVUYWIsIHNpZGViYXIqL1xuICAgIDI4MTYpIHtcbiAgICAgICQkaW52YWxpZGF0ZSgyMiwgc3R5bGVzID0gKCgpID0+IHtcbiAgICAgICAgbGV0IGVkaXQ7XG4gICAgICAgIGxldCBwcmV2aWV3MjtcbiAgICAgICAgaWYgKHNwbGl0ICYmIGFjdGl2ZVRhYiA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBpZiAoc2lkZWJhcikge1xuICAgICAgICAgICAgZWRpdCA9IGB3aWR0aDpjYWxjKDUwJSAtICR7c2lkZWJhciA/IDE0MCA6IDB9cHgpYDtcbiAgICAgICAgICAgIHByZXZpZXcyID0gYHdpZHRoOmNhbGMoNTAlIC0gJHtzaWRlYmFyID8gMTQwIDogMH1weClgO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlZGl0ID0gXCJ3aWR0aDo1MCVcIjtcbiAgICAgICAgICAgIHByZXZpZXcyID0gXCJ3aWR0aDo1MCVcIjtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoYWN0aXZlVGFiID09PSBcInByZXZpZXdcIikge1xuICAgICAgICAgIGVkaXQgPSBcImRpc3BsYXk6bm9uZVwiO1xuICAgICAgICAgIHByZXZpZXcyID0gYHdpZHRoOmNhbGMoMTAwJSAtICR7c2lkZWJhciA/IDI4MCA6IDB9cHgpYDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlZGl0ID0gYHdpZHRoOmNhbGMoMTAwJSAtICR7c2lkZWJhciA/IDI4MCA6IDB9cHgpYDtcbiAgICAgICAgICBwcmV2aWV3MiA9IFwiZGlzcGxheTpub25lXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgZWRpdCwgcHJldmlldzogcHJldmlldzIgfTtcbiAgICAgIH0pKCkpO1xuICAgIH1cbiAgICBpZiAoJCRzZWxmLiQkLmRpcnR5WzBdICYgLypjb2RlbWlycm9yLCBlZGl0b3IsIHJvb3QqL1xuICAgIDEwNzM3NDIwMTYpIHtcbiAgICAgICQkaW52YWxpZGF0ZSgxMCwgY29udGV4dCA9ICgoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQyID0ge1xuICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICBjb2RlbWlycm9yLFxuICAgICAgICAgIGVkaXRvcixcbiAgICAgICAgICByb290LFxuICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAuLi5jcmVhdGVFZGl0b3JVdGlscyhjb2RlbWlycm9yLCBlZGl0b3IpXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBjb250ZXh0MjtcbiAgICAgIH0pKCkpO1xuICAgIH1cbiAgICBpZiAoJCRzZWxmLiQkLmRpcnR5WzBdICYgLyp2YWx1ZSovXG4gICAgMSkge1xuICAgICAgc2V0RGVib3VuY2VkVmFsdWUodmFsdWUpO1xuICAgIH1cbiAgICBpZiAoJCRzZWxmLiQkLmRpcnR5WzBdICYgLyplZGl0b3IsIHZhbHVlKi9cbiAgICAxMjkpIHtcbiAgICAgIGlmIChlZGl0b3IgJiYgdmFsdWUgIT09IGVkaXRvci5nZXRWYWx1ZSgpKSB7XG4gICAgICAgIGVkaXRvci5zZXRWYWx1ZSh2YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICgkJHNlbGYuJCQuZGlydHlbMF0gJiAvKmVkaXRvciwgcGx1Z2lucyovXG4gICAgMTMwKSB7XG4gICAgICBpZiAoZWRpdG9yICYmIHBsdWdpbnMpIHtcbiAgICAgICAgb2ZmKCk7XG4gICAgICAgIHRpY2soKS50aGVuKCgpID0+IHtcbiAgICAgICAgICBvbigpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIHJldHVybiBbXG4gICAgdmFsdWUsXG4gICAgcGx1Z2lucyxcbiAgICBzYW5pdGl6ZSxcbiAgICByZW1hcmtSZWh5cGUyLFxuICAgIG92ZXJyaWRlUHJldmlldyxcbiAgICBtYXhMZW5ndGgsXG4gICAgcm9vdCxcbiAgICBlZGl0b3IsXG4gICAgYWN0aXZlVGFiLFxuICAgIHNpZGViYXIsXG4gICAgY29udGV4dCxcbiAgICBzcGxpdCxcbiAgICBtZXJnZWRMb2NhbGUsXG4gICAgZWRpdG9yRWwsXG4gICAgcHJldmlld0VsLFxuICAgIGZ1bGxzY3JlZW4yLFxuICAgIGRlYm91bmNlZFZhbHVlLFxuICAgIHN5bmNFbmFibGVkLFxuICAgIGhhc3QsXG4gICAgdmZpbGUsXG4gICAgY3VycmVudEJsb2NrSW5kZXgsXG4gICAgYWN0aW9ucyxcbiAgICBzdHlsZXMsXG4gICAgbW9kZSxcbiAgICBwcmV2aWV3RGVib3VuY2UsXG4gICAgcGxhY2Vob2xkZXIsXG4gICAgZWRpdG9yQ29uZmlnLFxuICAgIGxvY2FsZSxcbiAgICB1cGxvYWRJbWFnZXMsXG4gICAgY29udGFpbmVyV2lkdGgsXG4gICAgY29kZW1pcnJvcixcbiAgICBrZXlfaGFuZGxlcixcbiAgICB0YWJfaGFuZGxlcixcbiAgICBjbGlja19oYW5kbGVyLFxuICAgIGRpdjBfYmluZGluZyxcbiAgICBoYXN0X2hhbmRsZXIsXG4gICAgZGl2MV9iaW5kaW5nLFxuICAgIGNsaWNrX2hhbmRsZXJfMSxcbiAgICBrZXlkb3duX2hhbmRsZXIsXG4gICAgY2xpY2tfaGFuZGxlcl8yLFxuICAgIHN5bmNfaGFuZGxlcixcbiAgICB0b3BfaGFuZGxlcixcbiAgICBkaXY1X2JpbmRpbmdcbiAgXTtcbn1cbmNsYXNzIEVkaXRvciBleHRlbmRzIFN2ZWx0ZUNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICBzdXBlcigpO1xuICAgIGluaXQoXG4gICAgICB0aGlzLFxuICAgICAgb3B0aW9ucyxcbiAgICAgIGluc3RhbmNlLFxuICAgICAgY3JlYXRlX2ZyYWdtZW50LFxuICAgICAgbm90X2VxdWFsLFxuICAgICAge1xuICAgICAgICB2YWx1ZTogMCxcbiAgICAgICAgcGx1Z2luczogMSxcbiAgICAgICAgc2FuaXRpemU6IDIsXG4gICAgICAgIHJlbWFya1JlaHlwZTogMyxcbiAgICAgICAgbW9kZTogMjMsXG4gICAgICAgIHByZXZpZXdEZWJvdW5jZTogMjQsXG4gICAgICAgIHBsYWNlaG9sZGVyOiAyNSxcbiAgICAgICAgZWRpdG9yQ29uZmlnOiAyNixcbiAgICAgICAgbG9jYWxlOiAyNyxcbiAgICAgICAgdXBsb2FkSW1hZ2VzOiAyOCxcbiAgICAgICAgb3ZlcnJpZGVQcmV2aWV3OiA0LFxuICAgICAgICBtYXhMZW5ndGg6IDVcbiAgICAgIH0sXG4gICAgICBudWxsLFxuICAgICAgWy0xLCAtMV1cbiAgICApO1xuICB9XG59XG5leHBvcnQge1xuICBFZGl0b3IsXG4gIFZpZXdlcixcbiAgZ2V0UHJvY2Vzc29yXG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/bytemd/dist/index.mjs\n");

/***/ })

};
;